<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>mort’s mythopœia - tech</title>
    <subtitle>with apologies</subtitle>
    <link rel="self" type="application/atom+xml" href="https://mort.io/tags/tech/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://mort.io"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2026-01-22T00:00:00+00:00</updated>
    <id>https://mort.io/tags/tech/atom.xml</id>
    <entry xml:lang="en">
        <title>Some Remarks on the Risks of Lawful Access</title>
        <published>2026-01-22T00:00:00+00:00</published>
        <updated>2026-01-22T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/cosi-lawful-access/"/>
        <id>https://mort.io/blog/cosi-lawful-access/</id>
        
        <content type="html" xml:base="https://mort.io/blog/cosi-lawful-access/">&lt;p&gt;Last summer I was invited to participate in an informal meeting of the EU
Standing Committee on Operational Cooperation on Internal Security (COSI). The
session I was asked to join concerned end-to-end encryption (“E2EE”). I was
asked to “…set the scene for the discussion laying out in layman’s terms the
technical possibilities of access to data and the technical consequences of it”,
before being followed by the two other organizations presenting.&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-chatham-1&quot;&gt;&lt;a href=&quot;#fn-chatham&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I present below the remarks I made. Unusually for me, I actually wrote down all
the words I intended to say in advance rather than using slides and winging it
in the usual way. The context and topic felt like it would be worth avoiding
slips of the tongue in this case. I gave it pretty much as written—even when I
try, I can’t help a small amount of ad libbing! But I did not deviate
significantly from this text.&lt;&#x2F;p&gt;
&lt;p&gt;Having sought feedback from others on this, I would like to add a couple of
remarks as a preface.&lt;&#x2F;p&gt;
&lt;p&gt;First, the “Police Behaving Badly” paper puts the percentage of cybercrime
convictions involving police at 56% in the first half of 2024, and details how
police have had encrypted communication data but had it leaked by a corrupt
intelligence analyst advising her drug dealer friend that it was compromised.&lt;&#x2F;p&gt;
&lt;p&gt;Second, although I did try to be clear, I could have been more explicit that a
significant challenge in this space is the inevitability of software bugs.
(Approximately) All software contains bugs and it is almost certain that any
exceptional access system, due to the unavoidable complexity of such systems,
will contain bugs and so will not work as intended. The position I am trying to
take is that, while that is insufficient reason to reject every such proposal,
it is important to be realistic about the risks so that the costs and benefits
can be weighed rationally.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;who-am-i&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#who-am-i&quot; aria-label=&quot;Anchor link for: who-am-i&quot;&gt;Who am I?&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;First, I should introduce myself. I am Richard Mortier, more commonly known as
Mort. I am a professor in the Department of Computer Science &amp;amp; Technology at
Cambridge University, UK, and Fellow of Christ’s College, Cambridge. I
previously spent 6 years as a researcher with Microsoft Research Cambridge,
and 6 months with Sprint Advanced Technology Labs, California, and I have
founded three startups. I am currently also a member of the UK’s Investigatory
Powers’ Commissioner’s Office Technology Advisory Panel.&lt;&#x2F;p&gt;
&lt;p&gt;My primary expertise is in computer systems and networking, and human-computer
interaction. I thus speak on this topic as a computer scientist with general
expertise in computer systems rather than as a specialist in encryption or
messaging systems. I make these remarks in a personal capacity, representing
no-one’s views but my own.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;this-debate&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#this-debate&quot; aria-label=&quot;Anchor link for: this-debate&quot;&gt;This debate&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;I have been asked to speak to you today about &lt;strong&gt;lawful&lt;&#x2F;strong&gt; or &lt;strong&gt;exceptional
access&lt;&#x2F;strong&gt;. I will stay above the nitty-gritty technical details of encryption,
communications protocols and so on, while still staying sufficiently grounded
in technology that this is not a purely abstract, philosophical debate.&lt;&#x2F;p&gt;
&lt;p&gt;My impression of this debate is that it can often descend into an unhelpful
back and forth between two extreme positions that I might simplistically
characterize as “We must provide lawful access—think of the children!” and
“We cannot provide lawful access—privacy is a fundamental right!”. “We
must!” “We can’t!” and so on.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;my-position&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#my-position&quot; aria-label=&quot;Anchor link for: my-position&quot;&gt;My position&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;I wish to re-frame this debate to place those positions at the two extremes of
what is actually a spectrum of possibilities ranging from one where we have
mechanisms to provide perfectly secure, invisible communication among group
members where groups can form and dissolve on an ad hoc basis, to one where no
communication is possible without authorized bodies having full access to all
communication content and metadata.&lt;&#x2F;p&gt;
&lt;p&gt;Neither extreme is sensible or achievable in my view—but intermediate
positions might be. The basis for a society to decide where it wants to be on
that spectrum requires articulation and evaluation of the risks involved. I
observe, as a computer scientist, that building any large-scale
network-connected secure system is complex, and all complexity has costs and
introduces risks. Typically, the more complex, the more cost and the more
risk. Implementation of lawful access mechanisms is inevitably complex as they
are powerful and must be secured against external and internal bad actors.&lt;&#x2F;p&gt;
&lt;p&gt;This needs to be acknowledged in the discussion. These are not trivial
mechanisms and may even involve research activity in order to articulate the
design space and understand the trade-offs involved. Justification for these
mechanisms thus needs to be stronger than “we once had this ability, so we are
worried about losing it”.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;relevant-terms&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#relevant-terms&quot; aria-label=&quot;Anchor link for: relevant-terms&quot;&gt;Relevant terms&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;I will define some relevant terms.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Encryption&lt;&#x2F;strong&gt; refers to the transformation of &lt;em&gt;plain text&lt;&#x2F;em&gt; information into a
&lt;em&gt;cipher text&lt;&#x2F;em&gt; such that only the authorized parties can decrypt the cipher
text, transforming it back into the plain text. Such transformations are
usually described in mathematical terms.&lt;&#x2F;p&gt;
&lt;p&gt;An &lt;strong&gt;encryption scheme&lt;&#x2F;strong&gt; is a scheme for exchanging secret data over an
insecure channel using encryption. As they are based on mathematical
operations, it is generally possible to give guarantees about how
computationally difficult it is to, for example, work out the plain text that
produced a given cipher text—that is, to break the encryption scheme.&lt;&#x2F;p&gt;
&lt;p&gt;There are many such schemes with a range of trade-offs between complexity,
computational cost, and how difficult they make it for an unauthorized party
to decrypt a cipher text. All rely at some level on the creation and
consumption of secret &lt;strong&gt;key material&lt;&#x2F;strong&gt; to perform transformations between
plain text and cipher text.&lt;&#x2F;p&gt;
&lt;p&gt;In practice, an encryption scheme has to be reduced to an implementation,
usually in software. It takes considerable effort to ensure that a given
implementation correctly implements the encryption scheme, and even more
effort to ensure that it does not leak information about the plain text
message or the secret key material during encryption or (attempted)
decryption.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Secure messaging systems&lt;&#x2F;strong&gt; are Internet-connected services that provide for
exchange of messages between two or more individual devices. Older systems
provide message exchange by having devices send messages to central servers
that then replicate those messages, transmitting them to other devices
participating in the conversation. This requires those central servers to have
access to the secret key material so that they can decrypt messages to work
out where to send them on to.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;End-to-end encryption&lt;&#x2F;strong&gt; refers to those encryption systems where this is not
the case: the central servers that assist in replication of messages to the
intended recipients do not have access to the secret key material and so
cannot decrypt the encrypted messages. Only the participating devices can do
that. End-to-end encryption is increasingly common in consumer-grade messaging
applications.&lt;&#x2F;p&gt;
&lt;p&gt;Finally, &lt;strong&gt;lawful&lt;&#x2F;strong&gt; (or &lt;strong&gt;exceptional&lt;&#x2F;strong&gt;) &lt;strong&gt;access&lt;&#x2F;strong&gt; in this context refers to
technical mechanisms provided to enable authorized bodies such as law
enforcement and intelligence services to access communications systems on
production of suitable authorization. In the UK, for example, this would
entail the relevant body seeking a suitable warrant under the Investigatory
Powers Act (2016) as amended. Lawful access mechanisms have historically been
provided in many communication systems.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;the-problem&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#the-problem&quot; aria-label=&quot;Anchor link for: the-problem&quot;&gt;The problem&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;End-to-end encryption does make provision of lawful access more difficult: the
secret key material is in principle never held by the service provider and so
they cannot simply grant access to messages. Mechanisms would need to be added
to enable such access. But as soon as any mechanism exists for a third party
to gain access to decrypted messages, bad actors will also seek to exploit it.&lt;&#x2F;p&gt;
&lt;p&gt;As such mechanisms are powerful, as with any additional feature they add
complexity and increase the likelihood of creating vulnerabilities that can be
attacked. And so the argument goes that we &lt;strong&gt;cannot&lt;&#x2F;strong&gt; provide lawful access
mechanisms because it would be irresponsible to do so, weakening protections
that law-abiding members of society rely upon for so many different purposes.&lt;&#x2F;p&gt;
&lt;p&gt;But, so the counter-argument continues, lawful access is necessary to protect
the public including the vulnerable and children. Bad actors make use of
secure messaging services to exchange illegal material, to plan and execute
serious crimes, to commit terrorism and so forth. So mechanisms for lawful
access &lt;strong&gt;must&lt;&#x2F;strong&gt; be provided otherwise it is impossible for law enforcement to
carry out their duties to enforce the law and protect society. And so the
argument continues that we must provide mechanisms for lawful access.&lt;&#x2F;p&gt;
&lt;p&gt;We can’t. We must. We can’t. We must. Both positions are extreme points in a
spectrum of risk. What I believe we can and must do is take a risk-based
approach to this challenge: articulate the risks and, if we decide they are
worth taking, develop mechanisms to mitigate them. Lawful access can be done
and has been done—but should it be done, and how?&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;two-principles&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#two-principles&quot; aria-label=&quot;Anchor link for: two-principles&quot;&gt;Two principles&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;So what are the principles to consider, what risks do such mechanisms create,
and how might we consider them?&lt;&#x2F;p&gt;
&lt;p&gt;The first principle is that any lawful access mechanism is, by definition,
powerful. It allows an authorized party to access information that people wish
to keep secret. It is not therefore something that is easy to design,
implement, test, maintain and operate: considerable care will be required, and
potentially considerable expense incurred.&lt;&#x2F;p&gt;
&lt;p&gt;The second is that any such mechanism can and will be abused. Bad actors will
seek to exploit it to gain access to information, and may well succeed from
time to time. Those unauthorized accesses will come from external bad actors
but also internal bad actors. As well as the maintenance costs this creates,
it also suggests that accountability and transparency are critical.&lt;&#x2F;p&gt;
&lt;p&gt;For example, the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.cl.cam.ac.uk&#x2F;~ah793&#x2F;cccd.html&quot;&gt;Cambridge Computer Crime
Database&lt;&#x2F;a&gt; is a database of
cybercrime events of many kinds where the offender or alleged offender has
been arrested, charged and&#x2F;or prosecuted in the UK, dating from 1 January
2010. In the last 6 months of 2023, nearly half of the cases involved police
as offenders. I am not saying that these directly involve lawful access or
similar mechanisms, or that such incidents are commonplace—but it is
undeniable that they do occur, and that lawful access mechanisms could create
another route by which they can be carried out. Bad actors will also be
present in the service providers. Strong powers require strong oversight.&lt;&#x2F;p&gt;
&lt;p&gt;The debate cannot continue under the assumptions that this is a
straightforward technology to build and protect against unauthorized use, and
that authorized users will always use it lawfully.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;thinking-about-risk-necessity-proportionality&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#thinking-about-risk-necessity-proportionality&quot; aria-label=&quot;Anchor link for: thinking-about-risk-necessity-proportionality&quot;&gt;Thinking about risk: necessity &amp;amp; proportionality&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;I think it is useful to think about the risks from a perspective of necessity
and proportionality.&lt;&#x2F;p&gt;
&lt;p&gt;First, &lt;strong&gt;necessity&lt;&#x2F;strong&gt;: what is it that lawful access enables, and why?
Mechanisms could be built to enable a range of types of lawful access. For
example, access to the content of all messages; access to the content of all
messages involving certain keywords or with attached images that trigger some
flag; access to the content of all messages involving certain participants;
access to the content of selected messages; or access to metadata about
messages such as participant identifiers, message timestamps, locations of
transmission and reception, whether for all messages, all messages involving
certain parties, or specific messages. To determine what access is appropriate
requires articulating the purpose: to what use will the information be put? By
whom? And are there really no existing mechanisms by which the desired outcome
can be achieved?&lt;&#x2F;p&gt;
&lt;p&gt;Second, &lt;strong&gt;proportionality&lt;&#x2F;strong&gt;: what are the effects of exercising lawful access,
and how are the harms to be balanced against the benefits? All the mechanisms
listed above create risks when abused—but some create more risks than
others. Creating an ability, however well protected, to read any and all
messages between any communicating parties clearly creates enormous potential
for privacy infringement and crime. Creating an ability simply to know which
accounts communicated and when also creates risks but perhaps lesser ones in
most cases.&lt;&#x2F;p&gt;
&lt;p&gt;These perspectives need to be tested and debated before suitable mechanisms
can be designed, implemented, and exercised. Oversight mechanisms—perhaps
including by non-governmental organizations—need to be part of the design.
The intended benefits need to be articulated. Usage and impact need to be
tracked. Scope creep and the ability to silently expand the reach of such a
capability to enable mass surveillance needs to be guarded against. Comparison
needs to be made against alternative current approaches. For example, a
warrant can be obtained to hack a target’s phone giving access to all content
on that device, not just their messages; is that more or less intrusive than
providing a mechanism that enables selected messages or communications’
metadata to be obtained on presentation of a suitable warrant, but which
simply cannot be used to reveal any other content?&lt;&#x2F;p&gt;
&lt;p&gt;In a world where, as I understand it, policing resources are constantly being
stretched, how will law enforcement ensure it has the capacity to use
effectively information gained via such lawful access mechanisms? The risks
created by these mechanisms, once deployed, are always present even when they
are not being legally exercised: creating the mechanisms and then not
effectively using them considerably reduces any proportionality argument. If
the resource to sift existing data is already stretched, how will putting more
hay on the haystack help in finding the needles?&lt;&#x2F;p&gt;
&lt;p&gt;For example, the success of operations against systems such as
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;EncroChat&quot;&gt;Encrochat&lt;&#x2F;a&gt; and
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.bbc.co.uk&#x2F;news&#x2F;articles&#x2F;clyljpygxgjo&quot;&gt;Ghost&lt;&#x2F;a&gt; raises the question:
is it enough to concentrate on those systems that target criminal use? How
much extra will be gained by creating lawful access mechanisms in
consumer-grade systems? I am not saying nothing will be gained—but the
expected benefits need to be quantified for the case to be made.&lt;&#x2F;p&gt;
&lt;p&gt;Is the call for lawful access mechanisms based on specific, recorded instances
where they would have made a material difference to society? Or is it based
primarily on fear of a future where once useful mechanisms cease to be
available? “Once we could but now we cannot” is not a very strong argument for
necessity and proportionality given the way that technology has constantly
evolved over decades and centuries.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Communications_Assistance_for_Law_Enforcement_Act&quot;&gt;Communications Assistance for Law Enforcement Act (CALEA)
1994&lt;&#x2F;a&gt;
enforced US communications providers to implement wire-tapping capabilities.
It also mandated that those providers secure their networks. Unfortunately, it
seems that the implementation of &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.schneier.com&#x2F;blog&#x2F;archives&#x2F;2025&#x2F;04&#x2F;arguing-against-calea.html&quot;&gt;that capability created a risk that was
exploited&lt;&#x2F;a&gt;
by a group dubbed &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;techcrunch.com&#x2F;2024&#x2F;10&#x2F;07&#x2F;the-30-year-old-internet-backdoor-law-that-came-back-to-bite&#x2F;&quot;&gt;Salt
Typhoon&lt;&#x2F;a&gt;
to allow capture of sensitive call metadata in Washington D.C. Experts have
been reported as saying that such an attack was “inevitable”. How can such
risks, in terms of both likelihood and impact, be quantified and weighed in
the balance?&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;non-solutions&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#non-solutions&quot; aria-label=&quot;Anchor link for: non-solutions&quot;&gt;Non-solutions&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;It is worth at this point dismissing some ways that have in the past been
proposed for lawful access but which have very significant problems.&lt;&#x2F;p&gt;
&lt;p&gt;First, deliberately weakening encryption schemes. This simply does not work in
practice: bad actors will use more secure schemes anyway, and will seek to
exploit law-abiding services that use the weakened schemes, putting
law-abiding users at risk.&lt;&#x2F;p&gt;
&lt;p&gt;Second, forms of key escrow. This is where the secret key material is placed
under the control of some trusted party, and can be accessed on presentation
of a suitably authorized request. Unfortunately, this allows anyone who can
produce, whether or not legitimately, such a request to access &lt;strong&gt;all&lt;&#x2F;strong&gt;
communications.&lt;&#x2F;p&gt;
&lt;p&gt;Third, ghost users. This is where providers add law enforcement operatives to
chats without triggering notifications or otherwise informing chat
participants that a new member has been added. While in some ways technically
attractive, as described such a mechanism provides no means for accountability
and oversight: what record is made, and how is it inspected, that such an
action was carried out by the service provider, for what purpose, at what
time.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;a-possible-solution&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#a-possible-solution&quot; aria-label=&quot;Anchor link for: a-possible-solution&quot;&gt;A possible solution&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;I will close by sketching &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;martin.kleppmann.com&#x2F;2021&#x2F;07&#x2F;16&#x2F;cryptographic-backdoors-hotpets.html&quot;&gt;a proposal from a colleague, Dr Martin
Kleppmann&lt;&#x2F;a&gt;,
for a lawful access mechanism that seeks to balance benefits and harms,
published at the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;petsymposium.org&#x2F;2021&#x2F;hotpets.php&quot;&gt;HotPETS (Privacy Enhancing Technologies Symposium) Workshop
in 2021&lt;&#x2F;a&gt;. It seeks to ensure that
undetectable mass surveillance cannot be carried out, and that oversight can
be exercised in relevant jurisdictions.&lt;&#x2F;p&gt;
&lt;p&gt;In short, it provides a public &lt;em&gt;transparency log&lt;&#x2F;em&gt; into which all accepted
lawful access requests are written with a few publicly readable fields
indicating the requesting body, the warrant jurisdiction, its basis and
validity period, plus some cryptographic commitment as to the target for the
warrant. Thus, anyone can see how many warrants are being issued, why, and
when &lt;em&gt;without the targets being revealed&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The service’s client application then checks the log and if it finds a valid
entry for the device it is running on, it uploads the requested data for the
indicated period to the specified LEA. This is similar to the message backup
procedure already provided for by many secure messaging applications.&lt;&#x2F;p&gt;
&lt;p&gt;At the same time, a trusted oversight body in the jurisdiction can cross-check
log entries against issued warrants, and require the service provider to
reveal the targets of those warrants so that proportionality can be justified
by reference to the seriousness of the crime of which they are accused.&lt;&#x2F;p&gt;
&lt;p&gt;This provides targeted upload of data, reducing the ease with which bad actors
can use it to acquire data themselves. It enables interested parties, perhaps
including civil society organizations, to monitor general use of the mechanism
so that moves towards mass surveillance can be detected. It enables trusted
oversight bodies to exercise powers to inspect and ensure that necessity and
proportionality requirements are being met.&lt;&#x2F;p&gt;
&lt;p&gt;This is not a fully worked up proposal, and it does not thoroughly address
every possible challenge. To produce such a proposal would require, as well as
some of the discussion and debate referred to above, more technical details
about how the communications services that would be subject to such mechanisms
are architected and operated. But it hopefully serves as an example of an
approach that sits on the spectrum somewhere between “We can’t” and “We must”.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;conclusions&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#conclusions&quot; aria-label=&quot;Anchor link for: conclusions&quot;&gt;Conclusions&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;In summary then,&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;I believe that it is in principle possible to design, implement and deploy
lawful access mechanisms, even in end-to-end encrypted systems.&lt;&#x2F;li&gt;
&lt;li&gt;But doing so requires careful justification as to necessity and
proportionality: just because such mechanisms could be built and would be
useful does not automatically mean that they should be built.&lt;&#x2F;li&gt;
&lt;li&gt;Such justification must include realistic consideration of the risks even
just the existence of such mechanisms would introduce, as well as
mechanisms to mitigate those risks.&lt;&#x2F;li&gt;
&lt;li&gt;To maintain public trust in secure communications means that such strong
powers must be designed and implemented so as to enable strong oversight
by trusted bodies, likely including non-governmental bodies.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;blockquote&gt;
&lt;hr &#x2F;&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;references&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#references&quot; aria-label=&quot;Anchor link for: references&quot;&gt;References&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;“&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.lawfaremedia.org&#x2F;article&#x2F;principles-more-informed-exceptional-access-debate&quot;&gt;Principles for a More Informed Exceptional Access Debate&lt;&#x2F;a&gt;”,
Ian Levy &amp;amp; Crispin Robinson. 29 November 2018.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;“&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.cl.cam.ac.uk&#x2F;~ah793&#x2F;papers&#x2F;2019inside_out.pdf&quot;&gt;Inside out: Characterising cybercrimes committed inside and outside the
workplace&lt;&#x2F;a&gt;”.
Alice Hutchings and Ben Collier, Cambridge University. IEEE European
Symposium on Security and Privacy Workshops (EuroS&amp;amp;PW) 2019, pp. 481– 490.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;“&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gov.uk&#x2F;government&#x2F;publications&#x2F;open-letter-to-mark-zuckerberg&#x2F;written-testimony-of-chloe-squires-director-national-security-home-office&quot;&gt;Judiciary Committee United States Senate hearing: Encryption and Lawful
Access: Evaluating Benefits and Risks to Public Safety and Privacy&lt;&#x2F;a&gt;”,
Chloe Squires, Director National Security, Home Office. 23 December 2019.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;“&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;securephones.io&#x2F;main.html&quot;&gt;Data Security on Mobile Devices: Current State of the Art, Open
Problems, and Proposed Solutions&lt;&#x2F;a&gt;”,
Maximilian Zinkus, Tushar M. Jois, Matthew Green, Johns Hopkins
University. 6 June 2021.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;“&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;martin.kleppmann.com&#x2F;papers&#x2F;backdoors-hotpets21.pdf&quot;&gt;Harm Reduction for Cryptographic
Backdoors&lt;&#x2F;a&gt;”,
Martin Kleppmann, Cambridge University. 14th Workshop on Hot Topics in
Privacy Enhancing Technologies (HotPETs). 16 July 2021.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;“&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;home-affairs.ec.europa.eu&#x2F;networks&#x2F;high-level-group-hlg-access-data-effective-law-enforcement_en#recommendations&quot;&gt;Concluding report of the High-Level Group on access to data for
effective law enforcement&lt;&#x2F;a&gt;”.
15 November 2024.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;“&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.cl.cam.ac.uk&#x2F;~ah793&#x2F;papers&#x2F;2025police.pdf&quot;&gt;Police behaving
badly&lt;&#x2F;a&gt;”. Alice
Hutchings, Cambridge University. IEEE Security and Privacy, 23(1),
pp.80-82. 4 February 2025.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;blockquote&gt;
&lt;hr &#x2F;&gt;
&lt;hr &#x2F;&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-chatham&quot;&gt;
&lt;p&gt;A la the Chatham House Rule, we were asked not to reveal identities
of participants or the organizations they represented. I was there
in a private capacity, giving my own views as an academic computer
scientist. You might choose to guess who might be the sorts of
organization not in COSI with a stake in this debate; I couldn’t
possibly comment. &lt;a href=&quot;#fr-chatham-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Restarting audio</title>
        <published>2026-01-19T00:00:00+00:00</published>
        <updated>2026-01-19T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/restarting-audio/"/>
        <id>https://mort.io/blog/restarting-audio/</id>
        
        <content type="html" xml:base="https://mort.io/blog/restarting-audio/">&lt;p&gt;I run, at least for the time being, NixOS, generally from the main &#x2F; unstable
branch rather than a stable release. After a recent upgrade I found audio was
not working, most likely because &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.pipewire.org&#x2F;&quot;&gt;&lt;code&gt;pipewire&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
appeared to have stopped running. This is a jotting of the runes I invoked to
restart it.&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-aliases-1&quot;&gt;&lt;a href=&quot;#fn-aliases&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;&#x2F;p&gt;
&lt;p&gt;First, check whether any suitable looking process seems to be running:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; procs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; pipewire&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; PID:▲&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; User │ TTY CPU MEM CPU Time │ Command&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;            │&lt;&#x2F;span&gt;&lt;span&gt;     [%] [%]          │&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; 6008&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  mort │&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;     0.0 0.8&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 00:00:22 │ &#x2F;nix&#x2F;store&#x2F;ka3w75gd28llnz2ns8p9svlhl16mxaxi-slack-4.47.59&#x2F;lib&#x2F;slac...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; 6304&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  mort │&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;     0.0 0.3&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 00:00:09 │ &#x2F;proc&#x2F;self&#x2F;exe&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --type=utility --utility-sub-type=network.mojom.Net...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; 7171&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  mort │&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;     0.0 0.2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 00:00:01 │ &#x2F;proc&#x2F;self&#x2F;exe&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --type=utility --utility-sub-type=audio.mojom.Audio...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; procs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; pulseaudio&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; PID:▲&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; User │ TTY CPU MEM CPU Time │ Command&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;            │&lt;&#x2F;span&gt;&lt;span&gt;     [%] [%]          │&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then try to restart &lt;code&gt;pipewire&lt;&#x2F;code&gt; itself. First, as a user service:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; systemctl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --user&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; restart pipewire&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Failed&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; to restart pipewire.service: Unit pipewire.service not found.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Doesn’t exist so retry as a system service:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; systemctl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; restart pipewire&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ====&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Authentication&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; is required to restart &amp;#39;pipewire.service&amp;#39;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Authenticating&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; as: mort&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Password:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;==== AUTHENTICATION COMPLETE ====&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Failed&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; to restart pipewire.service: Unit pipewire.service is masked.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Bother. It’s masked. And unmasking doesn’t work due to NixOS using a read-only partition:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; systemctl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; unmask pipewire&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-unit-files ====&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Authentication&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; is required to manage system service or unit files.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Authenticating&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; as: mort&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Password:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;==== AUTHENTICATION COMPLETE ====&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Failed&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; to unmask unit: File &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;pipewire.service: Read-only file system&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Hmm. Maybe it’s not just &lt;code&gt;pipewire&lt;&#x2F;code&gt; – what about &lt;code&gt;wireplumber&lt;&#x2F;code&gt;?&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; ll&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;wireplumber.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - root root 1970-01-01 00:00 &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;wireplumber.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;dev&#x2F;null&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That’s a red-herring – this is a &lt;em&gt;user&lt;&#x2F;em&gt; service, so let’s look for our user units:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; ll&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ~&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxrwxr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 default.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 graphical-session-pre.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxrwxr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 graphical-session.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 sockets.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 sway-session.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 emacs.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;emacs.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gammastep.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gammastep.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gnome-keyring.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gnome-keyring.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gpg-agent-ssh.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gpg-agent-ssh.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gpg-agent.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gpg-agent.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gpg-agent.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gpg-agent.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 kanshi.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;kanshi.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 kbfs.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;kbfs.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 keybase.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;keybase.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-04-11 15:08 pipewire-pulse.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;xir78j1r5bk42jjxsszjwfx93sjc0d93-pipewire-1.4.1&#x2F;share&#x2F;systemd&#x2F;user&#x2F;pipewire-pulse.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-04-11 15:08 pipewire-pulse.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;xir78j1r5bk42jjxsszjwfx93sjc0d93-pipewire-1.4.1&#x2F;share&#x2F;systemd&#x2F;user&#x2F;pipewire-pulse.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-04-11 15:08 pipewire.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;xir78j1r5bk42jjxsszjwfx93sjc0d93-pipewire-1.4.1&#x2F;share&#x2F;systemd&#x2F;user&#x2F;pipewire.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-04-11 15:08 pipewire.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;xir78j1r5bk42jjxsszjwfx93sjc0d93-pipewire-1.4.1&#x2F;share&#x2F;systemd&#x2F;user&#x2F;pipewire.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 sway-session.target&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;sway-session.target&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 swayidle.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;swayidle.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 swayosd.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;swayosd.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 tray.target&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;tray.target&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Hmm. &lt;code&gt;wireplumber&lt;&#x2F;code&gt; is missing. Try enabling it:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; systemctl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --user&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; enable wireplumber&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Created&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; symlink &amp;#39;&#x2F;home&#x2F;mort&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;wireplumber.service&amp;#39; → &amp;#39;&#x2F;nix&#x2F;store&#x2F;3jk8py96bwnn0sgl1r0dwr0vif4cvivw-wireplumber-0.5.12&#x2F;share&#x2F;systemd&#x2F;user&#x2F;wireplumber.service&amp;#39;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Created&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; symlink &amp;#39;&#x2F;home&#x2F;mort&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;pipewire-session-manager.service&amp;#39; → &amp;#39;&#x2F;home&#x2F;mort&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;wireplumber.service&amp;#39;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Created&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; symlink &amp;#39;&#x2F;home&#x2F;mort&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;pipewire.service.wants&#x2F;wireplumber.service&amp;#39; → &amp;#39;&#x2F;nix&#x2F;store&#x2F;3jk8py96bwnn0sgl1r0dwr0vif4cvivw-wireplumber-0.5.12&#x2F;share&#x2F;systemd&#x2F;user&#x2F;wireplumber.service&amp;#39;.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Unit&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;3jk8py96bwnn0sgl1r0dwr0vif4cvivw-wireplumber-0.5.12&#x2F;share&#x2F;systemd&#x2F;user&#x2F;wireplumber.service is added as a dependency to a non-existent unit pipewire.service.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Unit&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;3jk8py96bwnn0sgl1r0dwr0vif4cvivw-wireplumber-0.5.12&#x2F;share&#x2F;systemd&#x2F;user&#x2F;wireplumber.service is added as a dependency to a non-existent unit pipewire.service.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Oho! That did something.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; ll&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ~&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxrwxr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 default.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 graphical-session-pre.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxrwxr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 graphical-session.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:54 pipewire.service.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 sockets.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 sway-session.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 emacs.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;emacs.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gammastep.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gammastep.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gnome-keyring.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gnome-keyring.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gpg-agent-ssh.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gpg-agent-ssh.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gpg-agent.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gpg-agent.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 gpg-agent.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gpg-agent.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 kanshi.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;kanshi.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 kbfs.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;kbfs.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 keybase.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;keybase.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-04-11 15:08 pipewire-pulse.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;xir78j1r5bk42jjxsszjwfx93sjc0d93-pipewire-1.4.1&#x2F;share&#x2F;systemd&#x2F;user&#x2F;pipewire-pulse.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-04-11 15:08 pipewire-pulse.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;xir78j1r5bk42jjxsszjwfx93sjc0d93-pipewire-1.4.1&#x2F;share&#x2F;systemd&#x2F;user&#x2F;pipewire-pulse.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:54 pipewire-session-manager.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;home&#x2F;mort&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;wireplumber.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-04-11 15:08 pipewire.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;xir78j1r5bk42jjxsszjwfx93sjc0d93-pipewire-1.4.1&#x2F;share&#x2F;systemd&#x2F;user&#x2F;pipewire.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-04-11 15:08 pipewire.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;xir78j1r5bk42jjxsszjwfx93sjc0d93-pipewire-1.4.1&#x2F;share&#x2F;systemd&#x2F;user&#x2F;pipewire.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 sway-session.target&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;sway-session.target&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 swayidle.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;swayidle.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 swayosd.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;swayosd.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 11:31 tray.target&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;vgn3nh0sij9gazgf5cjq7j7bvnwr8bnk-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;tray.target&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:54 wireplumber.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;3jk8py96bwnn0sgl1r0dwr0vif4cvivw-wireplumber-0.5.12&#x2F;share&#x2F;systemd&#x2F;user&#x2F;wireplumber.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;I also noticed that some of those symlinks were dangling, so I removed them:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:user&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; rm&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; pipewire-pulse.service pipewire-pulse.socket pipewire.service pipewire.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:user&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; ll&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxrwxr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 default.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 graphical-session-pre.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxrwxr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 graphical-session.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:54 pipewire.service.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 sockets.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;drwxr-xr-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 sway-session.target.wants&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 emacs.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;emacs.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 gammastep.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gammastep.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 gnome-keyring.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gnome-keyring.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 gpg-agent-ssh.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gpg-agent-ssh.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 gpg-agent.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gpg-agent.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 gpg-agent.socket&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;gpg-agent.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 kanshi.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;kanshi.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 kbfs.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;kbfs.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 keybase.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;keybase.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:54 pipewire-session-manager.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;home&#x2F;mort&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;wireplumber.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 sway-session.target&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;sway-session.target&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 swayidle.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;swayidle.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 swayosd.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;swayosd.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:55 tray.target&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;prhy3gb8fhy6yrjrpq98v6biy9zwg9y1-home-manager-files&#x2F;.config&#x2F;systemd&#x2F;user&#x2F;tray.target&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lrwxrwxrwx&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; - mort users 2025-12-22 14:54 wireplumber.service&lt;&#x2F;span&gt;&lt;span&gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;3jk8py96bwnn0sgl1r0dwr0vif4cvivw-wireplumber-0.5.12&#x2F;share&#x2F;systemd&#x2F;user&#x2F;wireplumber.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, check statuses and restart things as needed:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:user&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; systemctl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --user&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; status pipewire&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;●&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; pipewire.service - PipeWire Multimedia Service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;     Loaded:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; loaded&lt;&#x2F;span&gt;&lt;span&gt; (&#x2F;etc&#x2F;systemd&#x2F;user&#x2F;pipewire.service;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; enabled&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; preset:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ignored&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;    Drop-In:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;6sqgdcfscsq254xdq93sv0hjjyv0dz1i-user-units&#x2F;pipewire.service.d&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;             └─overrides.conf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;     Active:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; active&lt;&#x2F;span&gt;&lt;span&gt; (running) since Mon 2025-12-22 14:57:29 GMT;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; 6s&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ago&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; Invocation:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 6c08e0e9e0de494aa8f7491011d8d514&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;TriggeredBy:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ● pipewire.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   Main&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; PID:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 42345&lt;&#x2F;span&gt;&lt;span&gt; (pipewire)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;      Tasks:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 4&lt;&#x2F;span&gt;&lt;span&gt; (limit:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 37987&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;     Memory:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 8M&lt;&#x2F;span&gt;&lt;span&gt; (peak:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 8.2M&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;        CPU:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 50ms&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;     CGroup:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;user.slice&#x2F;user-1000.slice&#x2F;user@1000.service&#x2F;session.slice&#x2F;pipewire.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;             └─42345&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;334afxah19b3hr6ll93pfxlcyhhh2vws-pipewire-1.4.9&#x2F;bin&#x2F;pipewire&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Dec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 22&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 14:57:29 greyjay systemd[3323]: Started PipeWire Multimedia Service.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:user&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; systemctl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --user&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; restart pipewire-pulse&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:user&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; systemctl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --user&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; status pipewire-pulse&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;●&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; pipewire-pulse.service - PipeWire PulseAudio&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;     Loaded:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; loaded&lt;&#x2F;span&gt;&lt;span&gt; (&#x2F;etc&#x2F;systemd&#x2F;user&#x2F;pipewire-pulse.service;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; enabled&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; preset:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ignored&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;    Drop-In:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;6sqgdcfscsq254xdq93sv0hjjyv0dz1i-user-units&#x2F;pipewire-pulse.service.d&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;             └─overrides.conf&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;     Active:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; active&lt;&#x2F;span&gt;&lt;span&gt; (running) since Mon 2025-12-22 14:57:46 GMT;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; 4s&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ago&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; Invocation:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 46833e7c144a4b608ff829fe0c644594&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;TriggeredBy:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ● pipewire-pulse.socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   Main&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; PID:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 42442&lt;&#x2F;span&gt;&lt;span&gt; (pipewire-pulse)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;      Tasks:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 3&lt;&#x2F;span&gt;&lt;span&gt; (limit:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 37987&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;     Memory:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 2.7M&lt;&#x2F;span&gt;&lt;span&gt; (peak:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 3M&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;        CPU:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 24ms&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;     CGroup:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;user.slice&#x2F;user-1000.slice&#x2F;user@1000.service&#x2F;session.slice&#x2F;pipewire-pulse.service&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;             └─42442&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;334afxah19b3hr6ll93pfxlcyhhh2vws-pipewire-1.4.9&#x2F;bin&#x2F;pipewire-pulse&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Dec&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 22&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 14:57:46 greyjay systemd[3323]: Started PipeWire PulseAudio.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That seemed to fix things anyway.&lt;&#x2F;p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-aliases&quot;&gt;
&lt;p&gt;Note that this is pasted from my terminal so you may need &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-files&#x2F;blob&#x2F;main&#x2F;bash&#x2F;dot-bash_aliases&quot;&gt;my shell
aliases&lt;&#x2F;a&gt;
if you just want to cut’n’paste, not that I recommend it
particularly. &lt;a href=&quot;#fr-aliases-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Extracting ramblings</title>
        <published>2026-01-15T00:00:00+00:00</published>
        <updated>2026-01-15T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/extracting-rambling/"/>
        <id>https://mort.io/blog/extracting-rambling/</id>
        
        <content type="html" xml:base="https://mort.io/blog/extracting-rambling/">&lt;p&gt;Over a number of years—in fact, my word, decades—recorded my GPS tracks and
taken photos when I go walking.&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-walking-1&quot;&gt;&lt;a href=&quot;#fn-walking&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt; Over the years I’ve used a range of
apps with associated cloud services to capture and render this data,
predominantly EveryTrail and (until recently) Ramblr (who I think may have
bought EveryTrail or been bought by whoever bought EveryTrail).&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-platform-1&quot;&gt;&lt;a href=&quot;#fn-platform&quot;&gt;2&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I moved off EveryTrail a decade ago because, if I recall correctly, it went a
bit rubbish: it was slow, unreliable, the website sucked and so on. I extracted
my trails and did nothing with them—they just sat there on my laptop of the
moment.&lt;&#x2F;p&gt;
&lt;p&gt;I then switched to Ramblr but have found over the last year or two that it is
also becoming &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Enshittification&quot;&gt;enshittified&lt;&#x2F;a&gt; :(
Specifically, the app is becoming less reliable on iOS in terms of obtaining and
maintaining a GPS fix and the website is now frankly appalling in terms of
design and performance. At the same time they’ve reduced the features available
to free tier users and started trying to push me toward a pay-for tier.&lt;&#x2F;p&gt;
&lt;p&gt;So the time had come to move off Ramblr too. I found a basic “record my GPS
track” app that did little more than that, and certainly did not support
publishing tracks to a cloud service or similar. Which then left two other
problems: how to extract ~185 tracks from Ramblr, and how to usefully display
them with any associated photos.&lt;&#x2F;p&gt;
&lt;p&gt;I’ll deal with the latter point in a separate post but first: how to extract my
data from Ramblr. What follows was what I did for Ramblr specifically, but the
general approach is probably more widely applicable. I did this in Firefox,
similar capabilities exist in other major browsers. Begin by logging into the
website &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;ramblr.com&#x2F;&quot;&gt;https:&#x2F;&#x2F;ramblr.com&#x2F;&lt;&#x2F;a&gt; and turn on &lt;code&gt;Settings&lt;&#x2F;code&gt; &amp;gt; &lt;code&gt;Web Developer Tools&lt;&#x2F;code&gt; and
select the &lt;code&gt;Network&lt;&#x2F;code&gt; tab.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;obtain-a-list-of-trip-ids&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#obtain-a-list-of-trip-ids&quot; aria-label=&quot;Anchor link for: obtain-a-list-of-trip-ids&quot;&gt;Obtain a list of &lt;code&gt;trip_ids&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;We need to capture a list of the URLs corresponding to each track, or “trip” as
Ramblr calls them. I did so by visiting &lt;code&gt;My Archive&lt;&#x2F;code&gt;, selecting the second page
of trips and then examining the &lt;code&gt;Responses&lt;&#x2F;code&gt; tab. It turned out to be
‘https:&#x2F;&#x2F;www.ramblr.com&#x2F;trip&#x2F;search&#x2F;mysearchTrip_1767801082017’. Right-click on
the URL and select &lt;code&gt;Copy Value&lt;&#x2F;code&gt; &amp;gt; &lt;code&gt;Copy as cURL&lt;&#x2F;code&gt;. Paste that into a terminal and
execute to verify—you should see some JSON content being fetched. This is what
the base &lt;code&gt;My Archive&lt;&#x2F;code&gt; page renders to give you each page listing your trips.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;curl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -v&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;https:&#x2F;&#x2F;www.ramblr.com&#x2F;trip&#x2F;search&#x2F;mysearchTrip_1767790586587&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -X&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; POST&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;User-Agent: Mozilla&#x2F;5.0 (X11; Linux x86_64; rv:146.0) Gecko&#x2F;20100101 Firefox&#x2F;146.0&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept: application&#x2F;json, text&#x2F;javascript, *&#x2F;*; q=0.01&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept-Language: en-GB,en;q=0.5&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept-Encoding: gzip, deflate, br, zstd&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Content-Type: application&#x2F;x-www-form-urlencoded; charset=UTF-8&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;X-Requested-With: XMLHttpRequest&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Origin: https:&#x2F;&#x2F;www.ramblr.com&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Connection: keep-alive&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Referer: https:&#x2F;&#x2F;www.ramblr.com&#x2F;web&#x2F;mymap&#x2F;trip&#x2F;38704&#x2F;1125687&#x2F;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Cookie: cq_language=english; cq_session=a93967til7hr...; cq_latlng=...; _ga_...; _ga=...; cq_RamblrCustomer=jEOh...; cq_RainierUser=aPWx...; cq_RainierPresence=aPWx...; cq_presence=eSa8...; mainParam=&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Dest: empty&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Mode: cors&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Site: same-origin&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Pragma: no-cache&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Cache-Control: no-cache&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  --data-raw&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;text_srch=&amp;amp;activity=&amp;amp;difficulty=&amp;amp;distance_st=&amp;amp;distance_ed=&amp;amp;sort=10&amp;amp;bounds=&amp;amp;page=2&amp;amp;mode=1&amp;amp;user_id=&amp;amp;user_uid=38704&amp;amp;unit=1&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To get the full list then requires a bit of command line scripting and
experimentation to confirm which parameter needs to be replaced to fetch each
page of the &lt;code&gt;My Archive&lt;&#x2F;code&gt; tab, e.g.,&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; in&lt;&#x2F;span&gt;&lt;span&gt; $(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;seq&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1 14&lt;&#x2F;span&gt;&lt;span&gt;) ;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  PAGE&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$p&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  curl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -v --no-clobber -o&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; trips.json &amp;#39;https:&#x2F;&#x2F;www.ramblr.com&#x2F;trip&#x2F;search&#x2F;mysearchTrip_1767790586587&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -X&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; POST&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;User-Agent: Mozilla&#x2F;5.0 (X11; Linux x86_64; rv:146.0) Gecko&#x2F;20100101 Firefox&#x2F;146.0&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept: application&#x2F;json, text&#x2F;javascript, *&#x2F;*; q=0.01&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept-Language: en-GB,en;q=0.5&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept-Encoding: gzip, deflate, br, zstd&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Content-Type: application&#x2F;x-www-form-urlencoded; charset=UTF-8&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;X-Requested-With: XMLHttpRequest&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Origin: https:&#x2F;&#x2F;www.ramblr.com&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Connection: keep-alive&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Referer: https:&#x2F;&#x2F;www.ramblr.com&#x2F;web&#x2F;mymap&#x2F;trip&#x2F;38704&#x2F;1125687&#x2F;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Cookie: cq_language=english; cq_session=a93967til7hr...; cq_latlng=...; _ga_...; _ga=...; cq_RamblrCustomer=jEOh...; cq_RainierUser=aPWx...; cq_RainierPresence=aPWx...; cq_presence=eSa8...; mainParam=&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Dest: empty&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Mode: cors&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Site: same-origin&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Pragma: no-cache&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Cache-Control: no-cache&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  --data-raw&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;text_srch=&amp;amp;activity=&amp;amp;difficulty=&amp;amp;distance_st=&amp;amp;distance_ed=&amp;amp;sort=10&amp;amp;bounds=&amp;amp;page=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$PAGE&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;amp;mode=1&amp;amp;user_id=&amp;amp;user_uid=38704&amp;amp;unit=1&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That results in a set of files named &lt;code&gt;trips.json&lt;&#x2F;code&gt;, &lt;code&gt;trips.json.1&lt;&#x2F;code&gt;,
&lt;code&gt;trips.json.2&lt;&#x2F;code&gt; and so on. Finally, process those and extract the trip IDs so we
can subsequently fetch each one:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; trips.json&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; jq&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;.result.trip_list[].trip_id&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; tr&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -d&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;&amp;quot;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sort&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -n&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; uniq&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; trip_ids&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;fetching-each-trip&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#fetching-each-trip&quot; aria-label=&quot;Anchor link for: fetching-each-trip&quot;&gt;Fetching each trip&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Next we need the URL that will allow us to fetch a single trip. Find that by
clicking on a track and then the &lt;code&gt;Download GPX&lt;&#x2F;code&gt; button. In the web developer
tools &lt;code&gt;Network&lt;&#x2F;code&gt; tab spot the resulting URL—in this case
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.ramblr.com&#x2F;gpx&#x2F;downloadGPX&#x2F;TRIP_ID?v=1767801576157&quot;&gt;https:&#x2F;&#x2F;www.ramblr.com&#x2F;gpx&#x2F;downloadGPX&#x2F;TRIP_ID?v=1767801576157&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Finally, we iterate over the list of trip IDs to download each GPX track:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; trip_ids&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; | while&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; read&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; i&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  curl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $i&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.gpx &amp;quot;https:&#x2F;&#x2F;www.ramblr.com&#x2F;gpx&#x2F;downloadGPX&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$i&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;?v=1767801576157&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;   \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;User-Agent: Mozilla&#x2F;5.0 (X11; Linux x86_64; rv:146.0) Gecko&#x2F;20100101 Firefox&#x2F;146.0&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q=0.9,*&#x2F;*;q=0.8&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept-Language: en-GB,en;q=0.5&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;   -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept-Encoding: gzip, deflate, br, zstd&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Connection: keep-alive&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Referer: https:&#x2F;&#x2F;www.ramblr.com&#x2F;web&#x2F;mymap&#x2F;trip&#x2F;38704&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Cookie: cq_language=english; cq_latlng=...; _ga_...=GS2.1....; _ga=GA1.1....; cq_RamblrCustomer=jEOh...; cq_RainierUser=aPWx...; cq_RainierPresence=aPWx...; cq_presence=eSa8...; mainParam=; cq_session=e4po...&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Upgrade-Insecure-Requests: 1&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Dest: iframe&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Mode: navigate&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Site: same-origin&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Priority: u=4&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Pragma: no-cache&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Cache-Control: no-cache&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;TE: trailers&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And, if you want the KML which includes more metadata and photo thumbnails:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; trip_ids&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; | while&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; read&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; i&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  curl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;https:&#x2F;&#x2F;www.ramblr.com&#x2F;gpx&#x2F;downloadKML&#x2F;$i?v=1767803311189&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;User-Agent: Mozilla&#x2F;5.0 (X11; Linux x86_64; rv:146.0) Gecko&#x2F;20100101 Firefox&#x2F;146.0&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q=0.9,*&#x2F;*;q=0.8&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept-Language: en-GB,en;q=0.5&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Accept-Encoding: gzip, deflate, br, zstd&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Connection: keep-alive&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Referer: https:&#x2F;&#x2F;www.ramblr.com&#x2F;web&#x2F;mymap&#x2F;trip&#x2F;38704&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Cookie: cq_language=english; cq_latlng=...; _ga_...=GS2.1....; _ga=GA1.1....; cq_RamblrCustomer=jEOh...; cq_RainierUser=aPWx...; cq_RainierPresence=aPWx...; cq_presence=eSa8...; mainParam=; cq_session=e4po...&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Upgrade-Insecure-Requests: 1&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Dest: iframe&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Mode: navigate&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Sec-Fetch-Site: same-origin&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Priority: u=4&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Pragma: no-cache&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Cache-Control: no-cache&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;    -H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;TE: trailers&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And voila! You should have the GPX and&#x2F;or KML tracks corresponding to each of
your trips in Ramblr. Often a very similar process for extracting data from
other hosted platforms: examine the page in web developer tools, find the
relevant URL to fetch, work out the relevant parameters, and do some command
line scripting to iterate.&lt;&#x2F;p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-walking&quot;&gt;
&lt;p&gt;Something that I enjoy doing and wish I did more. &lt;a href=&quot;#fr-walking-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li id=&quot;fn-platform&quot;&gt;
&lt;p&gt;Changes may also have occurred because I switch platforms more
often than some, for devices and laptops, mixing between iOS,
Android, Windows, Linux. Currently Linux and iOS. Maybe a Linux
phone will be in my future, who knows. &lt;a href=&quot;#fr-platform-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Pinning packages</title>
        <published>2026-01-12T00:00:00+00:00</published>
        <updated>2026-01-12T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/pinning-pkgs/"/>
        <id>https://mort.io/blog/pinning-pkgs/</id>
        
        <content type="html" xml:base="https://mort.io/blog/pinning-pkgs/">&lt;p&gt;I run NixOS for the time being, usually tracking &lt;code&gt;unstable&lt;&#x2F;code&gt;. As a result, I have
from time to time found myself wanting to pin a package to a particular (older)
version because a package update doesn’t work, or at least doesn’t work for me.&lt;&#x2F;p&gt;
&lt;p&gt;Given what I understand NixOS’ intention to be—encapsulation of state,
eschewing the convenience of the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Filesystem_Hierarchy_Standard&quot;&gt;Filesystem Hierarchy Standard
(FHS)&lt;&#x2F;a&gt; for a layout
that allows multiple versions of the same package to exist alongside each
other—I always assumed this would be fairly straightforward. Just specify the
version of the package rather than accepting the default from the channel, and
off you go with all dependencies neatly installed alongside whatever else there
is.&lt;&#x2F;p&gt;
&lt;p&gt;Unfortunately not. And the amount of half-written, possibly once working, now
incomplete or just wrong hints at solutions that are out there is something I
have found infuriating.&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-seriously-1&quot;&gt;&lt;a href=&quot;#fn-seriously&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I needed to do this again last week because something happened with the latest
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;pipewire.pages.freedesktop.org&#x2F;wireplumber&#x2F;&quot;&gt;&lt;code&gt;wireplumber&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. And this
time I managed to make it work, so again, recording it here for future-me and
anyone else who might find it useful.&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-noting-1&quot;&gt;&lt;a href=&quot;#fn-noting&quot;&gt;2&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Setup is one that I think is reasonably common: I have a Nix &lt;em&gt;flake&lt;&#x2F;em&gt; that
declares a set of systems; each &lt;em&gt;system&lt;&#x2F;em&gt; references a per-machine set of
modules; each &lt;em&gt;module&lt;&#x2F;em&gt; then pulls in a configuration that installs and
configures some packages in the usual way.&lt;&#x2F;p&gt;
&lt;p&gt;So my laptop’s &lt;code&gt;default.nix&lt;&#x2F;code&gt; now contains the following two &lt;code&gt;let&lt;&#x2F;code&gt; declarations
specifying the &lt;code&gt;nixpkgs&lt;&#x2F;code&gt; repository version with the correct (in this case,
previous) &lt;code&gt;wireplumber&lt;&#x2F;code&gt; package plus the package itself within that repository.
The declarations that then cause &lt;code&gt;wireplumber&lt;&#x2F;code&gt; to be installed then just have to
override the &lt;code&gt;wireplumber.package&lt;&#x2F;code&gt; to use the pinned one just declared.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;nix&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  inputs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  lib&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  pkgs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  options&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;  ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;let&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;  wireplumber_0_5_12_pkgs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; import&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;builtins&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;fetchTree {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;    type&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;github&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;    owner&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;nixos&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;    repo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;nixpkgs&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;    rev&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;871b9fd269ff6246794583ce4ee1031e1da71895&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  }) {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; inherit&lt;&#x2F;span&gt;&lt;span&gt; (pkgs)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt; system&lt;&#x2F;span&gt;&lt;span&gt;; };&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;  wireplumber_0_5_12&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; wireplumber_0_5_12_pkgs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;wireplumber;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;in&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;  ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  services&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;pipewire&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;    enable&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; true&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;    wireplumber&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;      enable&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; true&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;      package&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; wireplumber_0_5_12;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    };&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  }&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;  ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  system&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;stateVersion&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;24.05&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To get the repo details, I initially used
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;lazamar.co.uk&#x2F;nix-versions&#x2F;?channel=nixpkgs-unstable&amp;amp;package=wireplumber&quot;&gt;https:&#x2F;&#x2F;lazamar.co.uk&#x2F;nix-versions&#x2F;?channel=nixpkgs-unstable&amp;amp;package=wireplumber&lt;&#x2F;a&gt;
but that seems only up-to-date to wireplumber 0.5.10, whereas the previous
version should be 0.5.12.&lt;&#x2F;p&gt;
&lt;p&gt;So to find the correct repo revision, I went back to
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;search.nixos.org&#x2F;packages?channel=25.11&amp;amp;query=wireplumber&quot;&gt;https:&#x2F;&#x2F;search.nixos.org&#x2F;packages?channel=25.11&amp;amp;query=wireplumber&lt;&#x2F;a&gt;
to find the latest stable version, clicked on the &lt;em&gt;Source&lt;&#x2F;em&gt; link to take me to &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;nixpkgs&#x2F;blob&#x2F;nixos-25.11&#x2F;pkgs&#x2F;development&#x2F;libraries&#x2F;pipewire&#x2F;wireplumber.nix#L89&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;nixpkgs&#x2F;blob&#x2F;nixos-25.11&#x2F;pkgs&#x2F;development&#x2F;libraries&#x2F;pipewire&#x2F;wireplumber.nix#L89&lt;&#x2F;a&gt;,
realized that was in 25.11 so visited &lt;code&gt;Releases&#x2F;Tags&lt;&#x2F;code&gt; &amp;gt; &lt;code&gt;Tags&lt;&#x2F;code&gt; &amp;gt; &lt;code&gt;25.11&lt;&#x2F;code&gt; which
linked to
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;nixpkgs&#x2F;commit&#x2F;871b9fd269ff6246794583ce4ee1031e1da71895&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;nixpkgs&#x2F;commit&#x2F;871b9fd269ff6246794583ce4ee1031e1da71895&lt;&#x2F;a&gt;—giving
me the commit ref to use above.&lt;&#x2F;p&gt;
&lt;p&gt;Probably, &lt;em&gt;surely&lt;&#x2F;em&gt;, easier ways to do this, but this way seemed to work for me.&lt;&#x2F;p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-seriously&quot;&gt;
&lt;p&gt;Seriously, if it’s so simple that you start your suggestion with
“Just do something like …”, how about you post something a bit
like a minimal working example? Or at least a reasonably complete
fragment? It’s as bad as paper reviewers that baldly state “this
work is not novel” without providing any pointers to the
earlier work that invalidates the novelty. &lt;a href=&quot;#fr-seriously-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li id=&quot;fn-noting&quot;&gt;
&lt;p&gt;Though, noting my comment above, with no guarantees that it will work
for you, now or ever, or that I’ll keep it up-to-date. This is a
blog, of sorts, not a manual. &lt;a href=&quot;#fr-noting-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Updating `eduroam`</title>
        <published>2026-01-06T00:00:00+00:00</published>
        <updated>2026-01-06T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/eduroam-update/"/>
        <id>https://mort.io/blog/eduroam-update/</id>
        
        <content type="html" xml:base="https://mort.io/blog/eduroam-update/">&lt;p&gt;The University recently rolled its public certificate for
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;eduroam.org&#x2F;&quot;&gt;&lt;code&gt;eduroam&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and the old one was dropped a couple of days
ago. So double-checking that all devices still worked resulted in some fiddling
to make it so. Twice over because the local preferred Department Wi-Fi network
is &lt;code&gt;Internal-CL&lt;&#x2F;code&gt; for which I can use the same credentials.&lt;&#x2F;p&gt;
&lt;p&gt;My phone (iOS 26) was in a weird state. First off, due to having not turned off
“iCloud Passwords &amp;amp; Keychain” it turned out to have shared the credentials I
gave to my iPad. I do not want this—we can generate our own credentials, and I
generate them per-device deliberately—so that had to be turned off:
&lt;code&gt;Settings &amp;gt; Apple Account &amp;gt; iCloud &amp;gt; Saved to iCloud ... See All &amp;gt; Passwords &amp;amp; Keychain &amp;gt; Sync this iPhone&lt;&#x2F;code&gt; = &lt;code&gt;OFF&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Then I could forget and then rejoin &lt;code&gt;eduroam&lt;&#x2F;code&gt; using my usual credentials worked
just fine. But I couldn’t connect at all to &lt;code&gt;Internal-CL&lt;&#x2F;code&gt;—I wasn’t even
prompted for a username&#x2F;password. Also couldn’t remove it or forget it: it
showed as a “managed network” in &lt;code&gt;Settings &amp;gt; Wi-Fi &amp;gt; Edit&lt;&#x2F;code&gt;. So visited
&lt;code&gt;Settings &amp;gt; General &amp;gt; Device &amp;amp; VPN Management&lt;&#x2F;code&gt; which showed &lt;code&gt;Internal-CL&lt;&#x2F;code&gt; as a
“device profile”. Removed that, and then reconnected using the usual credentials
and all was well.&lt;&#x2F;p&gt;
&lt;p&gt;My laptop runs NixOS so I often have to do things like this by hand. This time,
rather than faffing with &lt;code&gt;nmtui&lt;&#x2F;code&gt; I thought I’d have a go from the command-line
as I’ve &lt;a href=&quot;&#x2F;blog&#x2F;wifi-password&#x2F;&quot;&gt;recently found&lt;&#x2F;a&gt; &lt;a href=&quot;&#x2F;blog&#x2F;re-connecting&#x2F;&quot;&gt;it to work
well&lt;&#x2F;a&gt;. Building off &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;help.uis.cam.ac.uk&#x2F;service&#x2F;wifi&#x2F;connect-to-eduroam&#x2F;other-devices#server&quot;&gt;the manual instructions from
UIS&lt;&#x2F;a&gt;
plus &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;gist.github.com&#x2F;optimista&#x2F;803bbca64ae92dacab7a37e2977f1804&quot;&gt;a relevant
gist&lt;&#x2F;a&gt;, the
following seems to work:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; connection add type wifi con-name &amp;#39;NAME&amp;#39; ssid &amp;#39;SSID&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  ipv4.method auto 802-1x.eap peap 802-1x.phase2-auth mschapv2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  802-1x.identity &amp;#39;USERNAME&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  802-1x.password &amp;#39;PASSWORD&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  wifi-sec.key-mgmt wpa-eap&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…setting &lt;code&gt;NAME&lt;&#x2F;code&gt;=&lt;code&gt;SSID&lt;&#x2F;code&gt; to be &lt;code&gt;eduroam&lt;&#x2F;code&gt; or &lt;code&gt;Internal-CL&lt;&#x2F;code&gt;, and &lt;code&gt;USERNAME&lt;&#x2F;code&gt; and
&lt;code&gt;PASSWORD&lt;&#x2F;code&gt; to be my usual network credentials.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Re-connecting Wi-Fi</title>
        <published>2025-12-27T00:00:00+00:00</published>
        <updated>2025-12-27T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/re-connecting/"/>
        <id>https://mort.io/blog/re-connecting/</id>
        
        <content type="html" xml:base="https://mort.io/blog/re-connecting/">&lt;p&gt;Having gone home to visit my parents for Christmas, I am pleasantly surprised to
find that their village has finally acquired fibre broadband. As it’s always
been a mobile signal blackspot—typically I find it hovers somewhere between
&lt;em&gt;No signal&lt;&#x2F;em&gt; and &lt;em&gt;E&lt;&#x2F;em&gt;, occasionally claiming &lt;em&gt;3G&lt;&#x2F;em&gt; or &lt;em&gt;4G&lt;&#x2F;em&gt;, although I am told that
most of those indicators are a lie—it is nice to have &amp;gt;100Mb&#x2F;s and, above all,
a stable connection.&lt;&#x2F;p&gt;
&lt;p&gt;One unintended, if easy to fix, side effect is that their Wi-Fi access point
changed. The SSID was ported over but the old passphrase was insufficiently long
for the new model so it had to change. After about a minute of wondering why I
couldn’t connect, I realized what was going on and fired up &lt;code&gt;nmtui&lt;&#x2F;code&gt; to change
the passphrase.&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-also-1&quot;&gt;&lt;a href=&quot;#fn-also&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;sup&gt;,&lt;&#x2F;sup&gt;&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-dad-1&quot;&gt;&lt;a href=&quot;#fn-dad&quot;&gt;2&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt; Unfortunately the colour scheme for
the &lt;em&gt;Modify connection&lt;&#x2F;em&gt; page was illegible to me. So I finally read the man
pages for &lt;code&gt;nmcli&lt;&#x2F;code&gt; to do it from the command line.&lt;&#x2F;p&gt;
&lt;p&gt;Herewith the crib in case anyone else other than future-me will find it useful.
No need for &lt;code&gt;sudo&lt;&#x2F;code&gt; in my case as I’m in the &lt;code&gt;networkmanager&lt;&#x2F;code&gt; group.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# set the passphrase for existing wireless network (&amp;quot;connection&amp;quot;) NAME to PASSPHRASE&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; connection modify &amp;#39;NAME&amp;#39; wifi-sec.psk &amp;#39;PASSPHRASE&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# create a new connection NAME on SSID with PASSPHRASE&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; connection add type wifi&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      con-name &amp;#39;NAME&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      ssid &amp;#39;SSID&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      802-11-wireless-security.key-mgmt wpa-psk&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      wifi-sec.psk &amp;#39;PASSPHRASE&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# change to the network NAME you just created&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; connection up &amp;#39;NAME&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-also&quot;&gt;
&lt;p&gt;And to add the 2.4GHz specific Wi-Fi network that was created to
support the new solar panel inverter installation because the inverter
is too far away in signal terms from the access point for 5GHz to
reach. &lt;a href=&quot;#fr-also-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li id=&quot;fn-dad&quot;&gt;
&lt;p&gt;And, of course, once my dad had remembered that it had indeed changed
and furthermore, what the new one was. &lt;a href=&quot;#fr-dad-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Displaying Wi-Fi configuration</title>
        <published>2025-12-09T00:00:00+00:00</published>
        <updated>2025-12-09T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/wifi-password/"/>
        <id>https://mort.io/blog/wifi-password/</id>
        
        <content type="html" xml:base="https://mort.io/blog/wifi-password/">&lt;p&gt;&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-late-1&quot;&gt;&lt;a href=&quot;#fn-late&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;At the start of the month, I was away at the final &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;edgeless-project.eu&#x2F;&quot;&gt;EU EDGELESS
project&lt;&#x2F;a&gt; plenary meeting. As this was hosted by an
industrial partner rather than a University &lt;code&gt;eduroam&lt;&#x2F;code&gt; was of no use to me—I
had to use the local guest Wi-Fi.&lt;&#x2F;p&gt;
&lt;p&gt;This was fine in fact—but I was pleasantly surprised to encounter a rather
neat Linux networking CLI tool feature I’d not come across before.&lt;&#x2F;p&gt;
 &lt;figure class=&quot;fi fr pd1&quot;&gt;&lt;img src=&quot;qr-code.webp&quot; class=&quot;fr pd1&quot; alt=&quot;A QR code encoding Wi-Fi network credentials.&quot; width=&quot;240&quot; height=&quot;1&quot; loading=&quot;lazy&quot; &#x2F;&gt;&lt;figcaption&gt;A QR code encoding Wi-Fi network credentials.&lt;&#x2F;figcaption&gt;&lt;&#x2F;figure&gt;
&lt;p&gt;I needed to share details with a colleague who arrived after the meeting
started. Turns out that, rather than having to copy them in by hand, all I
needed to do was run &lt;code&gt;nmcli&lt;&#x2F;code&gt; with appropriate options to get the SSID and
password on &lt;code&gt;stdout&lt;&#x2F;code&gt; &lt;strong&gt;plus&lt;&#x2F;strong&gt; a handy QR code &lt;em&gt;also on &lt;code&gt;stdout&lt;&#x2F;code&gt;&lt;&#x2F;em&gt; for my
colleague to point their camera-ful devices at.&lt;&#x2F;p&gt;
&lt;p&gt;Neat.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:~&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; nmcli&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; device wifi show-password&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;SSID:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; WIFI Kepler2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Security:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; WPA&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Password:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; F72SUjf0QdT4NzPB52&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-late&quot;&gt;
&lt;p&gt;Ok, so this was actually posted on 27 December 2025 but is dated 9
December 2025 because I wrote it then, got distracted, and forgot to
commit. Doh. &lt;a href=&quot;#fr-late-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Back to my Roots</title>
        <published>2025-11-05T00:00:00+00:00</published>
        <updated>2025-11-05T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/back-to-my-roots/"/>
        <id>https://mort.io/blog/back-to-my-roots/</id>
        
        <content type="html" xml:base="https://mort.io/blog/back-to-my-roots/">&lt;p&gt;This is another one of those that’s largely documenting something for myself,
but I’m sharing it in case others find it useful. And because
self-aggrandisement is what it’s all about these days amirite?&lt;&#x2F;p&gt;
&lt;p&gt;I recently had issues because my NixOS installation ran out of space in the root
partition wherein lies &lt;code&gt;&#x2F;nix&#x2F;store&#x2F;&lt;&#x2F;code&gt;, the read-only filesystem containing the
Nix store. It’s a pain when this runs out of space because then upgrading gets
tricky—due to rollback support, there’s a general tendency to need enough
space for at least all the new stuff in the new version &lt;em&gt;in addition&lt;&#x2F;em&gt; to the old
versions.&lt;&#x2F;p&gt;
&lt;p&gt;I’d done all the usual garbage collection to try to free up as much space as
possible—but still not enough free. What to do? This had used to work so I
figured it was probably something to do with some content that should be being
garbage collected but wasn’t—I’ve had that problem before when playing around
with flakes. Some searching around showed that the solution was actually
relatively straightforward.&lt;&#x2F;p&gt;
&lt;p&gt;First, find the roots – these are linked in &lt;code&gt;&#x2F;nix&#x2F;var&#x2F;nix&#x2F;gcroots&lt;&#x2F;code&gt; – then
resolve them and use &lt;code&gt;nix path-info --closure-size&lt;&#x2F;code&gt; to list all the closures
with their real sizes. Something like:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;#!&#x2F;usr&#x2F;bin&#x2F;env bash&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; in&lt;&#x2F;span&gt;&lt;span&gt; $(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;find&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;var&#x2F;nix&#x2F;gcroots&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -type&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; l&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -readable&lt;&#x2F;span&gt;&lt;span&gt;);&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  res&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;res&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;$(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;readlink&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;) $(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nix&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; path-info&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --closure-size -sh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;)&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$res&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sort&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -h -k3,3&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This gave me the following (line numbers added after the fact):&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;nix&#x2F;var&#x2F;nix&#x2F;profiles&#x2F;default-1-link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;57904rflsfh46y7fxi62rzc7sidc9vmq-user-environment&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   0.3&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   0.5&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;nix&#x2F;var&#x2F;nix&#x2F;profiles&#x2F;per-user&#x2F;mort&#x2F;channels-2-link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;57904rflsfh46y7fxi62rzc7sidc9vmq-user-environment&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   0.3&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   0.5&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;3&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;nix&#x2F;var&#x2F;nix&#x2F;profiles&#x2F;per-user&#x2F;root&#x2F;channels-117-link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;fnlgy7im4rcd4ssh8xxy0kcr3aac7paf-user-environment&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   0.8&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	 394.1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; MiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;4&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;home&#x2F;mort&#x2F;.cache&#x2F;nix&#x2F;flake-registry.json&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;pc6y12ccrlvmgfbp0rs34cbj8mbsyyvk-flake-registry.json&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   7.3&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   7.3&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;5&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;home&#x2F;mort&#x2F;.local&#x2F;state&#x2F;nix&#x2F;profiles&#x2F;home-manager-425-link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;p8y1zr968ajjnva0whznygvqv09fvdd2-home-manager-generation&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  17.5&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  14.1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;6&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;home&#x2F;mort&#x2F;.local&#x2F;state&#x2F;home-manager&#x2F;gcroots&#x2F;current-home&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;kmb5w2qymnnhqv3wz3k1nw0psp2qqgmx-home-manager-generation&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  17.6&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   3.0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;7&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;nix&#x2F;var&#x2F;nix&#x2F;profiles&#x2F;system-931-link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;sinifrppd8m6kah30wywc27adyzqhgzy-nixos-system-greyjay-25.11.20251028.08dacfc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  18.5&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   8.4&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;8&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;run&#x2F;booted-system&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;sinifrppd8m6kah30wywc27adyzqhgzy-nixos-system-greyjay-25.11.20251028.08dacfc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  18.5&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   8.4&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;9&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;run&#x2F;current-system&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;sinifrppd8m6kah30wywc27adyzqhgzy-nixos-system-greyjay-25.11.20251028.08dacfc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  18.5&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   8.4&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;10&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;nix&#x2F;var&#x2F;nix&#x2F;profiles&#x2F;per-user&#x2F;mort&#x2F;profile-1167-link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;6fc897c236g7yjpz467plxmzp5ycx87w-profile&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  66.0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   3.0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The first three lines under &lt;code&gt;&#x2F;nix&#x2F;var&#x2F;nix&#x2F;profiles&lt;&#x2F;code&gt; are small and channel-state
related; the fourth is also tiny and something flake-related. Lines 8 and 9  beginning
&lt;code&gt;&#x2F;run&#x2F;&lt;&#x2F;code&gt; are the currently running system so leave them alone; the match of the underlying path with that of line 7 shows that 931 is the currently running generation.&lt;&#x2F;p&gt;
&lt;p&gt;However, lines 5 and 6 are suspicious:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;5&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;home&#x2F;mort&#x2F;.local&#x2F;state&#x2F;nix&#x2F;profiles&#x2F;home-manager-425-link&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;p8y1zr968ajjnva0whznygvqv09fvdd2-home-manager-generation&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  17.5&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  14.1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;giallo-ln&quot;&gt;6&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;home&#x2F;mort&#x2F;.local&#x2F;state&#x2F;home-manager&#x2F;gcroots&#x2F;current-home&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;nix&#x2F;store&#x2F;kmb5w2qymnnhqv3wz3k1nw0psp2qqgmx-home-manager-generation&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	  17.6&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KiB&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	   3.0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;These look like dead roots from random rebuilds, tryouts, whatever. And the
first one is big at over 14GiB. So just delete it and re-run garbage
collection:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;rm&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ~&#x2F;.local&#x2F;state&#x2F;nix&#x2F;profiles&#x2F;home-manager-425-link&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; nix-store&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --gc&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; nix-store&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --gc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nixos-rebuild&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; switch&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Lo and behold! suddenly I have about 15GiB extra free. Happy days :)&lt;&#x2F;p&gt;
&lt;p&gt;In the end, I tweaked that script to the following (logically) one-liner;
recorded here so I can copy’n’paste it again in future:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;fd&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -t&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; l . &#x2F;nix&#x2F;var&#x2F;nix&#x2F;gcroots&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; xargs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; readlink&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; | while&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; read&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; link&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  printf&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;%s &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $link&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  test&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -r&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $link&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; nix&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; path-info&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -Ssh&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $link&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;done |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; tr&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -d&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; tr&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;\t&amp;quot; &amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; tr&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sort&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -h -t&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -k3&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; uniq&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; tr&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot; &amp;quot; &amp;quot;\t&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>E(pi)glot-tal start</title>
        <published>2025-10-29T00:00:00+00:00</published>
        <updated>2025-10-29T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/emacs-eglot/"/>
        <id>https://mort.io/blog/emacs-eglot/</id>
        
        <content type="html" xml:base="https://mort.io/blog/emacs-eglot/">&lt;p&gt;Following on from an earlier post about &lt;a href=&quot;&#x2F;blog&#x2F;treesitting-emacs&#x2F;&quot;&gt;Tree-sitter&lt;&#x2F;a&gt;,
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;emacs&#x2F;manual&#x2F;html_node&#x2F;eglot&#x2F;index.html&quot;&gt;Eglot&lt;&#x2F;a&gt; is
the Emacs &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;microsoft.github.io&#x2F;language-server-protocol&#x2F;&quot;&gt;Language Server Protocol
(LSP)&lt;&#x2F;a&gt; client. Being also
now included in Emacs from v29, it works well with
&lt;a href=&quot;&#x2F;blog&#x2F;treesitting-emacs&#x2F;&quot;&gt;Tree-sitter&lt;&#x2F;a&gt;, integrating servers that can provide
rich semantic analysis and tooling for a wide range of languages.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;basic-eglot-configuration&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#basic-eglot-configuration&quot; aria-label=&quot;Anchor link for: basic-eglot-configuration&quot;&gt;Basic Eglot configuration&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;I split my Emacs configuration for Eglot across some default configuration plus
language specific modes, as far as possible. Default configuration first:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; eglot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (setq-default eglot-workspace-configuration ...) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;;; ...but see below&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :custom&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (eglot-send-changes-idle-time &lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;0.5&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (eglot-extend-to-xref &lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;t&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :hook&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (eglot-managed-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; eglot-inlay-hints-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (prog-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   .&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;lambda&lt;&#x2F;span&gt;&lt;span&gt; ()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;unless&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;eq&lt;&#x2F;span&gt;&lt;span&gt; major-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;emacs-lisp-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;       (eglot-ensure))))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (before-save&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   .&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;lambda&lt;&#x2F;span&gt;&lt;span&gt; ()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;if&lt;&#x2F;span&gt;&lt;span&gt; (eglot-managed-p)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;         (eglot-format))))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :bind&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (:map&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   eglot-mode-map&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-c c a&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; eglot-code-actions)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-c c o&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; eglot-code-actions-organize-imports)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-c c r&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; eglot-rename)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-c c f&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; eglot-format)))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This sets up Eglot to run for all programming modes (&lt;code&gt;prog-mode&lt;&#x2F;code&gt;) except
&lt;code&gt;emacs-lisp-mode&lt;&#x2F;code&gt; because there is no LSP for that, it being rather integral to
Emacs itself! I will also configure it for a few non-programming modes in other
relevant &lt;code&gt;use-package&lt;&#x2F;code&gt; stanzas. Finally, I configure calling Eglot’s (language
specific) format function before saving, and a few useful key-bindings. See
below for &lt;a href=&quot;https:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;emacs-eglot&#x2F;#workspace-configuration&quot;&gt;workspace configuration&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I also add &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jdtsmith&#x2F;eglot-booster&quot;&gt;&lt;code&gt;eglot-booster&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; as that
enables Eglot to use the &lt;code&gt;emacs-lsp-booster&lt;&#x2F;code&gt; wrapper which should speed up LSP
server interactions:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; eglot-booster&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :vc (:url&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;https:&#x2F;&#x2F;github.com&#x2F;jdtsmith&#x2F;eglot-booster&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :after eglot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config (eglot-booster-mode))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;configuring-for-specific-languages&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#configuring-for-specific-languages&quot; aria-label=&quot;Anchor link for: configuring-for-specific-languages&quot;&gt;Configuring for specific languages&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;simple-toml-and-bash&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#simple-toml-and-bash&quot; aria-label=&quot;Anchor link for: simple-toml-and-bash&quot;&gt;Simple: TOML and Bash&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;Configuring for a particular language is then relatively straightforward for
some. For example, for TOML I use &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;tombi-toml.github.io&#x2F;tombi&#x2F;&quot;&gt;Tombi&lt;&#x2F;a&gt;
in the tree-sitter TOML mode, &lt;code&gt;toml-ts-mode&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; toml-ts-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :mode&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.toml&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :hook eglot-ensure &lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;;; not a `prog-mode` so not set by the global default&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :init (add-to-list &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;major-mode-remap-alist &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;((toml-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; toml-ts-mode)))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config (add-to-list &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;eglot-server-programs &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(toml-ts-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;tombi&amp;quot; &amp;quot;lsp&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;))))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This replaces the default &lt;code&gt;toml-mode&lt;&#x2F;code&gt; with the tree-sitter &lt;code&gt;toml-ts-mode&lt;&#x2F;code&gt;, and
ensures the Tombi TOML language server is running when in that mode.&lt;&#x2F;p&gt;
&lt;p&gt;Bash is similarly straightforward using the
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;bash-lsp&#x2F;bash-language-server&quot;&gt;&lt;code&gt;bash-language-server&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; bash-ts-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :ensure&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; nil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; ;; as there&amp;#39;s no package to install&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :custom&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (tab-width &lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (sh-basic-offset &lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :init&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (add-to-list &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;major-mode-remap-alist &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(bash-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; bash-ts-mode))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (add-to-list &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;major-mode-remap-alist &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(sh-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; bash-ts-mode)))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This stops &lt;code&gt;use-package&lt;&#x2F;code&gt; complaining that there is no &lt;code&gt;bash-ts-mode&lt;&#x2F;code&gt; package,
sets tabs to be just two spaces for both &lt;code&gt;shfmt&lt;&#x2F;code&gt; and &lt;code&gt;indent-for-tab-command&lt;&#x2F;code&gt;
(YMMV), and remaps the default &lt;code&gt;bash-&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;sh-&lt;&#x2F;code&gt; modes to use this &lt;code&gt;bash-ts-mode&lt;&#x2F;code&gt;. I
don’t need to set &lt;code&gt;eglot-server-programs&lt;&#x2F;code&gt; in this case because the
pre-configured default is set to use &lt;code&gt;bash-language-server&lt;&#x2F;code&gt; appropriately.&lt;&#x2F;p&gt;
&lt;p&gt;I did try using the &lt;code&gt;:initializationOptions&lt;&#x2F;code&gt; option when starting the
&lt;code&gt;bash-language-server&lt;&#x2F;code&gt; as follows:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;:config&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(add-to-list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;eglot-server-programs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(bash-ts-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   .&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;bash-language-server&amp;quot; &amp;quot;start&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    :initializationOptions&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    (:backgroundAnalysisMaxFiles&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;     0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; ;; turn off background analysis of directory tree&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     :shfmt (:binaryNextLine&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt; :caseIndent&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt; :simplifyCode&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt; :spaceRedirects&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt;)))))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…but unfortunately it seems that &lt;code&gt;bash-language-server&lt;&#x2F;code&gt; doesn’t respect this
option, so it needs to be set in &lt;code&gt;eglot-workspace-configuration&lt;&#x2F;code&gt; (see below).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;slightly-more-complex-nix&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#slightly-more-complex-nix&quot; aria-label=&quot;Anchor link for: slightly-more-complex-nix&quot;&gt;Slightly more complex: Nix&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;Nix is a little more complex as I would like to use the (non-preconfigured
default) &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nix-community&#x2F;nixd&quot;&gt;&lt;code&gt;nixd&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; LSP server and
configure it to use &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;nixfmt&quot;&gt;&lt;code&gt;nixfmt&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; for formatting.
In this case I do so by passing in &lt;code&gt;:initializationOptions&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; nix-ts-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :mode&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.nix&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (add-to-list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;eglot-server-programs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;((nix-mode nix-ts-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;     .&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;nixd&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      &amp;quot;--semantic-tokens&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      &amp;quot;--inlay-hints&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      :initializationOptions (:nixd (:formatting.command&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;nixfmt&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;))))))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;As with &lt;code&gt;bash-ts-mode&lt;&#x2F;code&gt;, this remaps the default &lt;code&gt;nix-mode&lt;&#x2F;code&gt; to &lt;code&gt;nix-ts-mode&lt;&#x2F;code&gt;, but
then goes on to specify the language server command line to run, and an
initialisation option to use &lt;code&gt;nixfmt&lt;&#x2F;code&gt; for formatting.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;more-complex-python-latex-typst&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#more-complex-python-latex-typst&quot; aria-label=&quot;Anchor link for: more-complex-python-latex-typst&quot;&gt;More complex: Python, LaTeX, Typst&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;Python is more complex as I use &lt;code&gt;ruff&lt;&#x2F;code&gt; for formatting but it doesn’t support
much beyond that at present so I use
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docs.basedpyright.com&#x2F;latest&#x2F;&quot;&gt;basedpyright&lt;&#x2F;a&gt; for type hinting and the
rest. After installing the NixOS &lt;code&gt;basedpyright&lt;&#x2F;code&gt;, &lt;code&gt;ruff&lt;&#x2F;code&gt;, and
&lt;code&gt;python313Packages.python-lsp-server&lt;&#x2F;code&gt; packages, this results in:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; python-ts-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :ensure&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; nil&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :after (eglot reformatter)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :preface&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;  ;; per https:&#x2F;&#x2F;ddavis.io&#x2F;blog&#x2F;python-emacs-4&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (reformatter-define&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   dd&#x2F;ruff-format&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   :program&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;ruff&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; ;; &amp;quot;uvx&amp;quot; with &amp;quot;ruff&amp;quot; as an arg doesn&amp;#39;t work because dynamic linking on NixOS&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   :args&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; `&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;format&amp;quot; &amp;quot;--stdin-filename&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; ,&lt;&#x2F;span&gt;&lt;span&gt;buffer-file-name &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;-&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (reformatter-define&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   dd&#x2F;ruff-sort&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   :program&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;ruff&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   :args&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   `&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;check&amp;quot; &amp;quot;--select&amp;quot; &amp;quot;I&amp;quot; &amp;quot;--fix&amp;quot; &amp;quot;--stdin-filename&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; ,&lt;&#x2F;span&gt;&lt;span&gt;buffer-file-name &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;-&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :hook&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  ((python-base-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; dd&#x2F;ruff-format-on-save-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (python-base-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; dd&#x2F;ruff-sort-on-save-mode))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :init&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (add-to-list &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;major-mode-remap-alist &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(python-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; python-ts-mode))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (add-to-list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;eglot-server-programs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;((python-mode python-ts-mode) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;basedpyright-langserver&amp;quot; &amp;quot;--stdio&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;))))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This essentially does three things: defines two &lt;code&gt;reformatter&lt;&#x2F;code&gt; functions using
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docs.astral.sh&#x2F;ruff&#x2F;&quot;&gt;&lt;code&gt;ruff&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, one to reformat the code and the other
to sort imports; and sets
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docs.basedpyright.com&#x2F;latest&#x2F;&quot;&gt;&lt;code&gt;basedpyright&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; as the language server
to use, by shadowing the default entries for Python in &lt;code&gt;eglot-server-programs&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I also turn on &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;z80dev&#x2F;uv-mode&quot;&gt;&lt;code&gt;uv-mode&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; as I use
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;uv&quot;&gt;&lt;code&gt;uv&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; for all Python package management:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; uv-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :after (eglot python-base-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :hook (python-base-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; uv-mode-auto-activate-hook))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, for the purposes of this blog post, for document processing I use LaTeX
historically and am now trying to use typst. LaTeX first using the
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;emacs-languagetool&#x2F;eglot-ltex-plus&quot;&gt;&lt;code&gt;eglot-ltex-plus&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
server:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; eglot-ltex-plus&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :vc (:url&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;https:&#x2F;&#x2F;github.com&#x2F;emacs-languagetool&#x2F;eglot-ltex-plus&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt; :rev :newest)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :custom&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (eglot-ltex-plus-server-path&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;   &amp;quot;&#x2F;nix&#x2F;store&#x2F;3ihx8s39rl2d5by5wabcg3i4rcm3kns3-ltex-ls-plus-18.6.0&#x2F;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (eglot-ltex-plus-communication-channel &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;stdio))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; latex&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :ensure auctex&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  ((&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.tex&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; latex-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.latex&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; latex-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.bibtex&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; bibtex-mode))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :hook&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  ((LaTeX-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; LaTeX-math-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (LaTeX-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; turn-on-reftex)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (LaTeX-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; TeX-fold-mode))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;See &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-emacs&#x2F;blob&#x2F;main&#x2F;init.el#L739&quot;&gt;my &lt;code&gt;init.el&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; for
&lt;code&gt;latex&lt;&#x2F;code&gt; package configuration details.&lt;&#x2F;p&gt;
&lt;p&gt;Finally finally, &lt;code&gt;typst&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; typst-ts-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :after (eglot reformatter)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :mode&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.typ&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :preface&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (reformatter-define &lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;;; XXX hack to autoformat on save as eglot-format doesn&amp;#39;t work&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   typst-reformat&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   :program&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;typstyle&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   :args&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; `&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;--line-width&amp;quot; &amp;quot;120&amp;quot; &amp;quot;--indent-width&amp;quot; &amp;quot;2&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :hook ((typst-ts-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; eglot-ensure) (typst-ts-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; typst-reformat-on-save-mode))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (add-to-list &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;eglot-server-programs &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;`&lt;&#x2F;span&gt;&lt;span&gt;(typst-ts-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;tinymist&amp;quot; &amp;quot;lsp&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (add-to-list &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;filladapt-token-table &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&#x2F;[ ][^:]+:&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt; bullet) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;t&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;defun&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; typst-ts-tinymist-preview&lt;&#x2F;span&gt;&lt;span&gt; ()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    &amp;quot;Run `tinymist preview` on the current file.&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    (interactive)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span&gt; ((file (buffer-file-name)))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;if&lt;&#x2F;span&gt;&lt;span&gt; file&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;compile&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;tinymist preview %s&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt; (shell-quote-argument file)))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        (user-error &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;Buffer is not visiting a file&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;))))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :bind (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-c C-x&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; . #&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;typst-ts-tinymist-preview)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :bind (:map typst-ts-mode-map (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-c C-c&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; typst-ts-tmenu)))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Both of the above have to set various other options as well as configuring Eglot.&lt;&#x2F;p&gt;
&lt;p&gt;But wait! There’s more! Specifically, for &lt;a href=&quot;https:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;emacs-eglot&#x2F;#simple-toml-and-bash&quot;&gt;Bash&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;emacs-eglot&#x2F;#more-complex-python-latex-typst&quot;&gt;LaTeX&lt;&#x2F;a&gt;, and
&lt;a href=&quot;https:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;emacs-eglot&#x2F;#more-complex-python-latex-typst&quot;&gt;Python&lt;&#x2F;a&gt;, I need to provide a default
&lt;em&gt;workspace configuration&lt;&#x2F;em&gt; to set some sensible options.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;workspace-configuration&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#workspace-configuration&quot; aria-label=&quot;Anchor link for: workspace-configuration&quot;&gt;Workspace configuration&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;This took me a little while to figure out. LSP servers assume a per-project
“workspace”, apparently normally set from the project’s configuration file
(either editor-independent but language-specific, or the Emacs specific but
language-independent &lt;code&gt;.dir-locals.el&lt;&#x2F;code&gt;). As a now only occasional coder I prefer
to set a global default and mostly rely on that.&lt;&#x2F;p&gt;
&lt;p&gt;However, the extra little fillip here is that you &lt;strong&gt;can’t&lt;&#x2F;strong&gt; set it locally in a
buffer – and that includes via a major-mode hook (&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;joaotavora&#x2F;eglot&#x2F;discussions&#x2F;876&quot;&gt;discussed
here&lt;&#x2F;a&gt;). I investigated
using the &lt;code&gt;:initializationOptions&lt;&#x2F;code&gt; argument when setting &lt;code&gt;eglot-server-programs&lt;&#x2F;code&gt;
so that I could keep all language-specific configuration together, but that
appears to be supported by only some language servers :( So, for example, the
&lt;a href=&quot;https:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;emacs-eglot&#x2F;#slightly-more-complex-nix&quot;&gt;nixd&lt;&#x2F;a&gt; example uses it to configure use of &lt;code&gt;nixfmt&lt;&#x2F;code&gt;
for formatting and it seems to work fine, but the equivalent for both Bash and
Python did not.&lt;&#x2F;p&gt;
&lt;p&gt;So, I ended up just setting it in the Eglot configuration stanza using
&lt;code&gt;setq-default&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; eglot&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  (setq-default&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   eglot-workspace-configuration&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;   &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;     ;; sh&#x2F;bash&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     :bashIde&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     (:backgroundAnalysisMaxFiles&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;      0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; ;; turn off background analysis of directory tree&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      :shfmt (:binaryNextLine&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt; :caseIndent&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt; :simplifyCode&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt; :spaceRedirects&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;     ;; ltex-ls-plus, giving grammar, spell checking for latex, markdown, etc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     :ltex&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     (:language&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      &amp;quot;en-GB&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      :additionalRules (:enablePickyRules&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt; :motherTongue&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;en-GB&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      :completionEnabled&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;     ;; python&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     :basedpyright (:disableOrganizeImports&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     :basedpyright.analysis&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     (:typeCheckingMode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      &amp;quot;all&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      :autoImportCompletions&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      :inlayHints (:callArgumentNamesMatching&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      :useTypingExtensions&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;     ;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;     ))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The final little nugget that I had to figure out to make the above work was what
is the magic string that identifies the server so that it will process the
correct configuration blob when it’s sent. Turns out this really is just a magic
string and I needed to peruse docs and ultimately source to find it. So for
example, for &lt;code&gt;bash-language-server&lt;&#x2F;code&gt; it turns out to be &lt;code&gt;bashIde&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Possibly good general places to start looking are in the &lt;code&gt;*EGLOT*&lt;&#x2F;code&gt; logs from the
server, your &lt;code&gt;*MESSAGES*&lt;&#x2F;code&gt; buffer, the server test for processing
&lt;code&gt;onDidChangeConfigration&lt;&#x2F;code&gt; or (if one exists, and it probably does given the
prevalence of LSPs in VSCode-land) in the &lt;code&gt;vscode-client&lt;&#x2F;code&gt; packaging, or some
suitable declaration – in the case of &lt;code&gt;bash-language-server&lt;&#x2F;code&gt;, this turns out to
be setting the variable
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;bash-lsp&#x2F;bash-language-server&#x2F;blob&#x2F;main&#x2F;server&#x2F;src&#x2F;server.ts#L25&quot;&gt;&lt;code&gt;CONFIGURATION_SECTION&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Anyway. That mostly concludes my Emacs polishing. For now. Probably.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Tree-sitting Emacs</title>
        <published>2025-10-20T00:00:00+00:00</published>
        <updated>2025-10-20T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/treesitting-emacs/"/>
        <id>https://mort.io/blog/treesitting-emacs/</id>
        
        <content type="html" xml:base="https://mort.io/blog/treesitting-emacs/">&lt;p&gt;First, some background that it took me longer than I would’ve hoped to piece
together.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;tree-sitter.github.io&#x2F;tree-sitter&#x2F;&quot;&gt;Tree-sitter&lt;&#x2F;a&gt; is “a parser generator
tool and an incremental parsing library”. What does that mean in pratice? It is
a thing which, when paired with a grammar, parses your source code and enables
syntax highlighting, code folding, and so on. Syntactic manipulations. It comes
with a domain specific language (DSL) for writing grammars and so, happily, many
languages are already supported. It is also, as of Emacs 29, included out of the
box.&lt;&#x2F;p&gt;
&lt;p&gt;On the other hand, &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;emacs&#x2F;manual&#x2F;html_node&#x2F;eglot&#x2F;Quick-Start.html&quot;&gt;Eglot&lt;&#x2F;a&gt;, also included out of the box since Emacs 29,
provides the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;microsoft.github.io&#x2F;language-server-protocol&#x2F;&quot;&gt;Language Server Protocol (LSP)&lt;&#x2F;a&gt; interaction. This supports
semantic rather than syntactic markup: inline hints, invocation of code
formatters, and so on. More on that next.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;nixos-packages&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#nixos-packages&quot; aria-label=&quot;Anchor link for: nixos-packages&quot;&gt;NixOS packages&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;I am of course also using NixOS, with flakes and Home Manager, so it took a bit
of faffing about to get this all working but I think I got there in the end.
First, the NixOS runes needed to install relevant Emacs packages:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;nix&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;programs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;emacs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;  enable&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; true&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;  package&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; pkgs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;emacs-gtk;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;  extraPackages&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    epkgs:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; with&lt;&#x2F;span&gt;&lt;span&gt; epkgs; ([&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;      # ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      tree-sitter-langs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      (treesit-grammars&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;with-grammars (p: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-bash&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-dockerfile&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-elisp&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-markdown&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-markdown-inline&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-nix&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-ocaml&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-python&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-rust&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-toml&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-typst&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;tree-sitter-yaml&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      ]))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    ]);&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;You could use the &lt;code&gt;treesit-grammars.with-all-grammars&lt;&#x2F;code&gt; package instead of the
final expression that selects specific grammars, but I found that package did
not include all the grammars I actually wanted, hence doing it by hand. It is
also in principle possible to allow the Emacs &lt;code&gt;treesit-auto&lt;&#x2F;code&gt; package to download
and install grammars on demand. Grammars are first sought in
&lt;code&gt;treesit-extra-load-path&lt;&#x2F;code&gt; – in my case a gnarly and ever evolving Nix path,
currently
&lt;code&gt;&#x2F;nix&#x2F;store&#x2F;4p4rfax61q9z6c5wj7ahnb8hjq8pa11g-emacs-packages-deps&#x2F;lib&#x2F;&lt;&#x2F;code&gt;. If they
are not found there, they are next looked for in
&lt;code&gt;${user-emacs-directory}&#x2F;tree-sitter&#x2F;&lt;&#x2F;code&gt; with &lt;code&gt;${user-emacs-directory}&lt;&#x2F;code&gt; resolving
in my case to &lt;code&gt;~&#x2F;.emacs.d&lt;&#x2F;code&gt;. &lt;code&gt;treesit-auto&lt;&#x2F;code&gt; places them in the latter location.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, the &lt;code&gt;emacs-lsp-booster&lt;&#x2F;code&gt; package claims to speed things up, so why
not:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;nix&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;home&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;packages&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; = with&lt;&#x2F;span&gt;&lt;span&gt; pkgs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;span&gt; [ emacs-lsp-booster ]&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;emacs-configuration&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#emacs-configuration&quot; aria-label=&quot;Anchor link for: emacs-configuration&quot;&gt;Emacs configuration&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;This was a bit fiddly but not too bad in the end. First install packages
comprising the tree-sitter grammars, an auto-installer for missing grammars, and
enabling code folding via tree-sitter:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; tree-sitter-langs &lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;;; grammar bundle&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :after tree-sitter&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :custom (global-tree-sitter-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;t&lt;&#x2F;span&gt;&lt;span&gt;))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; treesit-auto &lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;;; auto-install missing grammars&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :after tree-sitter&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config (global-treesit-auto-mode))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; treesit-fold &lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;;; enable code folding based on tree-sitter&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :vc (:url&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;https:&#x2F;&#x2F;github.com&#x2F;emacs-tree-sitter&#x2F;treesit-fold&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config (treesit-fold-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :bind&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  ((&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-`&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; treesit-fold-toggle)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-€&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; treesit-fold-close-all) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;;; I remap S-` to € using `keyd` so can&amp;#39;t use C-S-`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;   (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;M-C-€&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; treesit-fold-open-all)))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then, configure the &lt;code&gt;-ts-&lt;&#x2F;code&gt; version for each relevant major &lt;code&gt;-mode&lt;&#x2F;code&gt;, e.g., for
Dockerfile and Nix:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; dockerfile-ts-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :mode&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;Dockerfile&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config (add-to-list &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;major-mode-remap-alist &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;((docker-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; docker-ts-mode))))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;use-package&lt;&#x2F;span&gt;&lt;span&gt; nix-ts-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :mode&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.nix&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  :config (add-to-list &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;major-mode-remap-alist &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;((nix-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt; nix-ts-mode))))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…and so on. The examples above do two things: set the file glob pattern to
which the major mode will apply, and remap the “default” major mode
&lt;code&gt;LANGUAGE-mode&lt;&#x2F;code&gt; to the new tree-sitter major mode, &lt;code&gt;LANGUAGE-ts-mode&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;microsoft.github.io&#x2F;language-server-protocol&#x2F;&quot;&gt;LSP&lt;&#x2F;a&gt; support via &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;emacs&#x2F;manual&#x2F;html_node&#x2F;eglot&#x2F;Quick-Start.html&quot;&gt;Eglot&lt;&#x2F;a&gt; then requires installing any necessary language servers
and configuring them. More on that next.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Resizing swap partition on NixOS</title>
        <published>2025-08-13T00:00:00+00:00</published>
        <updated>2025-08-13T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/resize-swap/"/>
        <id>https://mort.io/blog/resize-swap/</id>
        
        <content type="html" xml:base="https://mort.io/blog/resize-swap/">&lt;p&gt;I recently decided that I had over-egged the pudding and allocated too much
space to my swap partition (mounted as &lt;code&gt;&#x2F;tmp&lt;&#x2F;code&gt;) under NixOS. At the same time, it
had got to the point where I was bouncing off the ceiling a little with the
other two partitions, &lt;code&gt;&#x2F;home&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;&lt;&#x2F;code&gt; (wherein lives the Nix store).&lt;&#x2F;p&gt;
&lt;p&gt;I tried &lt;code&gt;gparted&lt;&#x2F;code&gt; first for a handy GUI but got nowhere due to (I think) Wayland:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; nix profile install nixpkgs#gparted.out&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; gparted&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;localuser:root&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; being added to access control list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Error&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; executing command as another user: No authentication agent found.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;localuser:root&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; being removed from access control list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo gparted&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Invalid&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; MIT-MAGIC-COOKIE-1 key&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;gpartedbin:360533&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; Gtk-WARNING&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; **&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;: 19:19:25.626: cannot open display: :0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;So the obvious solution was to reduce the size of the swap partition and
increase the other two. However, doing this for my setup – a LUKS-encrypted
device partitioned using Logical Volume Manager (LVM) – turned out to be a
little less obvious than it might have been, and searching the interwebs turned
up several not quite correct answers, I thought I’d make a note here.&lt;&#x2F;p&gt;
&lt;p&gt;NB. Don’t pay too much attention to the sizes of partitions below: I cribbed
these notes from shell history but re-ran some commands to get the output as I’d
already closed that shell so they may not be entirely coherent. The commands
should be right though.&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Find your partition names using &lt;code&gt;lvscan&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo lvscan&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  ACTIVE&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;            &amp;#39;&#x2F;dev&#x2F;vg0&#x2F;home&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt; [&amp;lt;729.61&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB] inherit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  ACTIVE&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;            &amp;#39;&#x2F;dev&#x2F;vg0&#x2F;nixos&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt; [94.00&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB] inherit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  ACTIVE&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;            &amp;#39;&#x2F;dev&#x2F;vg0&#x2F;nixos-swap&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt; [16.00&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB] inherit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Normally I would then just use &lt;code&gt;lvreduce&lt;&#x2F;code&gt; – but that fails on the swap partition:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo lvreduce&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -r --size&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 12GiB &#x2F;dev&#x2F;vg0&#x2F;nixos-swap&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  File&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; system swap found on vg0&#x2F;nixos-swap.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  File&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; system size&lt;&#x2F;span&gt;&lt;span&gt; (16.00&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;span&gt;) is larger than the requested size (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;12.00&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; GiB&lt;&#x2F;span&gt;&lt;span&gt;).&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  File&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; system reduce is required and not supported&lt;&#x2F;span&gt;&lt;span&gt; (swap).&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;So instead…&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Delete the swap partition and recreate to the desired size (16GB in my case):&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; lvremove &#x2F;dev&#x2F;vg0&#x2F;nixos-swap&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; lvcreate&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -L&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 16G&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -n&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; nixos-swap vg0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mkswap &#x2F;dev&#x2F;vg0&#x2F;nixos-swap&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; swapon&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -v&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;dev&#x2F;vg0&#x2F;nixos-swap&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Reallocate the now available space to other partitions:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# `&#x2F;home` is easy: extend logical volume and resize the filesystem at in one go:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo lvextend&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -r -L&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; +16G &#x2F;dev&#x2F;vg0&#x2F;home&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# however, can&amp;#39;t resize the root filesystem as part of the `lvextend` because it&amp;#39;s read-only.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# instead, find the relevant filesystem:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; df&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -Th&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Filesystem&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;                                             Type  Size  Used Avail Use% Mounted on&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&#x2F;dev&#x2F;disk&#x2F;by-uuid&#x2F;8dd0d118-375f-4e8b-84bc-1a05b68889b7&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ext4   92G   66G   22G  76% &#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# ...and then manually resize it after extending the logical volume:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo lvextend&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -L&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; +12G &#x2F;dev&#x2F;vg0&#x2F;nixos&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo resize2fs &#x2F;dev&#x2F;disk&#x2F;by-uuid&#x2F;8dd0d118-375f-4e8b-84bc-1a05b68889b7&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;And that’s it. Swap partition is reduced in size, and the space is reallocated
to the other two partitions, &lt;code&gt;&#x2F;home&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Re-key-remapping</title>
        <published>2025-07-26T00:00:00+00:00</published>
        <updated>2025-07-26T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/keymapping-reprise/"/>
        <id>https://mort.io/blog/keymapping-reprise/</id>
        
        <content type="html" xml:base="https://mort.io/blog/keymapping-reprise/">&lt;p&gt;As all right-minded people must, I remap the historic, redundant, absurd
&lt;code&gt;CAPSLOCK&lt;&#x2F;code&gt; key&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-1-1&quot;&gt;&lt;a href=&quot;#fn-1&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt; to be a more conveniently accessible current, useful, sleek
&lt;code&gt;CTRL&lt;&#x2F;code&gt; (control) key on any given keyboard. I also do some other minor mods to
assist retention of the little sanity I still have – as I get older and more
decrepit, it gets harder for me to handle change. Deal with it.&lt;&#x2F;p&gt;
&lt;p&gt;I &lt;a href=&quot;&#x2F;blog&#x2F;elcapitan-maps&#x2F;&quot;&gt;used&lt;&#x2F;a&gt; &lt;a href=&quot;&#x2F;blog&#x2F;mess-with-my-keyboard&#x2F;&quot;&gt;to do this&lt;&#x2F;a&gt; &lt;a href=&quot;&#x2F;blog&#x2F;setup-new-laptop&#x2F;&quot;&gt;on
my Macbook&lt;&#x2F;a&gt; using a tool called &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;karabiner-elements.pqrs.org&#x2F;&quot;&gt;Karabiner
Elements&lt;&#x2F;a&gt;. But now I’m on Linux, that’s
not a thing. So I use the excellent &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rvaiya&#x2F;keyd&quot;&gt;&lt;code&gt;keyd&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; instead. The UK Thinkpad keyboard
being a lot less daft in design than the UK Macbook keyboard, the modifications
are also much smaller, which is nice.&lt;&#x2F;p&gt;
&lt;p&gt;However the canonical First Modification, &lt;code&gt;CAPSLOCK&lt;&#x2F;code&gt; to &lt;code&gt;CONTROL&lt;&#x2F;code&gt; remains the
key one. For added convenience, given I rarely need to “tap” &lt;code&gt;CTRL&lt;&#x2F;code&gt; I also make a
tap on the &lt;code&gt;CAPSLOCK&lt;&#x2F;code&gt; key into an &lt;code&gt;ESC&lt;&#x2F;code&gt; (escape). And there the fun starts.&lt;&#x2F;p&gt;
&lt;p&gt;It turns out the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rvaiya&#x2F;keyd&quot;&gt;&lt;code&gt;keyd&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; recommended way to achieve this is with the
configuration stanza&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;plain&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;[main]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;capslock = overload(capslock, esc)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…which is mostly fine and has worked well for me for some time. But I realised
I was getting increasingly irritated that I seemed to get spurious &lt;code&gt;ESC&lt;&#x2F;code&gt; key
presses when using &lt;code&gt;CAPSLOCK&lt;&#x2F;code&gt; as &lt;code&gt;CTRL&lt;&#x2F;code&gt;. &lt;code&gt;sudo keyd monitor&lt;&#x2F;code&gt; and it became clear
that the semantics of the &lt;code&gt;overload()&lt;&#x2F;code&gt; function weren’t quite as I thought. From
&lt;code&gt;man keyd&lt;&#x2F;code&gt;,&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;plain&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;overload(&amp;lt;layer&amp;gt;, &amp;lt;action&amp;gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    Activates the given layer while held and executes &amp;lt;action&amp;gt; on tap.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;I had assumed this meant that &lt;code&gt;&amp;lt;action&amp;gt;&lt;&#x2F;code&gt; did not execute if the assigned key was
held, but it doesn’t quite: it seems that a tap is deemed to have occurred if
the key is not &lt;em&gt;chorded&lt;&#x2F;em&gt;. So sometimes, being a bit slow, when I hold &lt;code&gt;CAPSLOCK&lt;&#x2F;code&gt;
thinking I want to chord and thus have it treated as &lt;code&gt;CTRL&lt;&#x2F;code&gt; but then realise I
don’t and I just let go, I still get an &lt;code&gt;ESC&lt;&#x2F;code&gt; generated – even if it was a
second or two that I was holding it down for.&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-2-1&quot;&gt;&lt;a href=&quot;#fn-2&quot;&gt;2&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;&#x2F;p&gt;
&lt;p&gt;So I read a bit more of the manpage can came across the &lt;code&gt;timeout&lt;&#x2F;code&gt; function&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;plain&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;timeout(&amp;lt;action 1&amp;gt;, &amp;lt;timeout&amp;gt;, &amp;lt;action 2&amp;gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    If the key is held in isolation for more than &amp;lt;timeout&amp;gt; ms, activate the&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    second action, if the key is held for less than &amp;lt;timeout&amp;gt; ms or another key&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    is struck before &amp;lt;timeout&amp;gt; ms expires, execute the first action.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    E.g.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    timeout(a, 500, layer(control))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    Will cause the assigned key to behave as control if it is held for more than&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    500 ms.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…used as &lt;code&gt;capslock = timeout(esc, 250, layer(control))&lt;&#x2F;code&gt; but that turns out
also not to be quite right. In the end, it looks like the right answer is
&lt;code&gt;overloadt2&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;plain&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;overloadt(&amp;lt;layer&amp;gt;, &amp;lt;action&amp;gt;, &amp;lt;timeout&amp;gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    Identical to overload, but only activates the layer if the bound key is held&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    for &amp;lt;timeout&amp;gt; milliseconds. This is mainly useful for overloading keys which&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    are commonly struck in sequence (e.g letter keys).&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    Note that this will add a visual delay when typing, since overlapping keys&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    will be queued until the timeout expires or the bound key is released.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;overloadt2(&amp;lt;layer&amp;gt;, &amp;lt;action&amp;gt;, &amp;lt;timeout&amp;gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    Identical to overloadt, but additionally resolves as a hold in the event of&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    an intervening key tap.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The end result is the following stanza in my &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;nixos.org&#x2F;&quot;&gt;NixOS&lt;&#x2F;a&gt;
configuration:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;nix&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;keyd&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;  enable&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; true&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;  keyboards&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;default&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;    ids&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;*&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt; ];&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;    settings&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;      main&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;        # capslock -&amp;gt; (held) ctrl, (tap) ESC&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;        capslock&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;overloadt2(control, esc, 150)&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;        rightalt&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;leftalt&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      };&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;      shift&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;        grave&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;G-4&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # S-` -&amp;gt; €&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      };&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    };&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  };&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;timeout&lt;&#x2F;code&gt; of 150ms feels “about right” at this point – 100ms was borderline
not enough, and 200ms was definitely annoyingly long.&lt;&#x2F;p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-1&quot;&gt;
&lt;p&gt;Not to be confused with the elegant, historic, radical &lt;code&gt;RUN&#x2F;STOP&lt;&#x2F;code&gt; key of course. C64 FTW! &lt;a href=&quot;#fr-1-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li id=&quot;fn-2&quot;&gt;
&lt;p&gt;Honestly, sometimes I really am that slow. I’m old see? &lt;a href=&quot;#fr-2-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Whither AI?</title>
        <published>2025-07-05T00:00:00+00:00</published>
        <updated>2025-07-05T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/whither-ai/"/>
        <id>https://mort.io/blog/whither-ai/</id>
        
        <content type="html" xml:base="https://mort.io/blog/whither-ai/">&lt;p&gt;I am hardly the first person to comment&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-1-1&quot;&gt;&lt;a href=&quot;#fn-1&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt; on this – I am given to understand
AI has been a topic of some interest to many for a few years now. I’m sure I’ve
seen, and possibly even &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mastodon.me.uk&#x2F;@mort&quot;&gt;re-tooted&lt;&#x2F;a&gt; things about
it in fact. I’m afraid I just don’t keep up.&lt;&#x2F;p&gt;
&lt;p&gt;But recent experiences reviewing for a couple of systems&#x2F;networking venues has
led me to feel I need to ask: &lt;strong&gt;WHY&lt;&#x2F;strong&gt;? More pointedly, why does the following
seem like good motivation for a research paper?&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;There is a complex and important task that currently requires considerable
expertise to carry out because it is important to be precise and get it
right.&lt;&#x2F;li&gt;
&lt;li&gt;The task in question can be described imprecisely using natural language by
non-experts.&lt;&#x2F;li&gt;
&lt;li&gt;AI (inevitably, some large-language model) can take that natural language
description and, after training, produce some output that is stochastically
like unto what an expert might produce given the same underlying problem,
having brought to bear their expertise.&lt;&#x2F;li&gt;
&lt;li&gt;Thus we build an AI that can take the non-expert’s imprecise description and
show that sometimes the output it produces is not so wrong as to fail some
&lt;em&gt;ad hoc&lt;&#x2F;em&gt; tests of utility that we introduce.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Based on things I’ve recently reviewed “not so wrong” above means “error rate of
no more than 25—30% when taking expertly generated natural language prompts as
input”. Which is to say, probably not the sorts of input prompt that a
non-expert might produce.&lt;&#x2F;p&gt;
&lt;p&gt;Network configuration and management is the domain I’ve seen this argument made
in most recently. Which seems quite strange to me because I always thought that
a 25% error rate in configuring, e.g., your enterprise network security
perimeter would be bad. But apparently not if it’s done by an AI.&lt;&#x2F;p&gt;
&lt;p&gt;More generally, why do we want to build tools that allow untrained experts to do
a job when mistakes are high impact, it requires a trained expert to detect
those mistakes, and those tools &lt;em&gt;by design&lt;&#x2F;em&gt; only produce statistically valid
output? An error rate of once in a blue moon is categorically worse than a zero
error rate if the error involved can leave your entire digital estate open to
compromise.&lt;&#x2F;p&gt;
&lt;p&gt;If the big issue here is that experts sometimes make typos when editing the
configuration files, maybe building some domain-specific languages or better
user interfaces or verification techniques or other tooling would be a better
way to help them not do that than replacing them with tools that &lt;strong&gt;by design&lt;&#x2F;strong&gt;
are only ever probably about right.&lt;&#x2F;p&gt;
&lt;p&gt;So please stop justifying your AI application research by saying simply that it
allows non-experts to carry out expert work! I’m much more likely to be
convinced by uses of AI that make experts &lt;em&gt;more productive&lt;&#x2F;em&gt; – though don’t get
me started on how to measure productivity because I don’t know except via means
which are expensive and time consuming, and it really seems that very few people
can be bothered doing that.&lt;&#x2F;p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-1&quot;&gt;
&lt;p&gt;Ok fine. I admit it. This is a rant. &lt;a href=&quot;#fr-1-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Rusty Nu POSIX</title>
        <published>2025-05-07T00:00:00+00:00</published>
        <updated>2025-05-07T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/nu-posix/"/>
        <id>https://mort.io/blog/nu-posix/</id>
        
        <content type="html" xml:base="https://mort.io/blog/nu-posix/">&lt;p&gt;A slight delay to this post, but happily I now have no more lecturing to do
until 2027&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-1-1&quot;&gt;&lt;a href=&quot;#fn-1&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt; :)&lt;&#x2F;p&gt;
&lt;p&gt;I switched a year or two ago to using NixOS as my daily driver following about
15 years as an increasingly irritated MacOS user. Shortly before I had become
interested in Rust as a systems programming language that seemed to marry
several things I like about OCaml with several other desirable things from C and
Python.&lt;&#x2F;p&gt;
&lt;p&gt;I then more recently observed something that I thought was interesting: there
seem to be a &lt;strong&gt;lot&lt;&#x2F;strong&gt; of recent replacements of what were once completely
standard and changeless POSIX utilities. I’m thinking things like &lt;code&gt;grep&lt;&#x2F;code&gt;,
&lt;code&gt;find&lt;&#x2F;code&gt;, &lt;code&gt;ls&lt;&#x2F;code&gt; and the like that I’ve been using uninterrupted, other than the
occasional quibble over whether it was the original version or the GNU version,
for about 30 years. Indeed, I have already raved (slightly) about
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;just.systems&#x2F;&quot;&gt;&lt;code&gt;just&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; as a
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;make&#x2F;manual&#x2F;make.html&quot;&gt;&lt;code&gt;make&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; replacement and its
use with &lt;a href=&quot;&#x2F;blog&#x2F;just-ocaml&#x2F;&quot;&gt;OCaml&lt;&#x2F;a&gt; and &lt;a href=&quot;&#x2F;blog&#x2F;just-latex&#x2F;&quot;&gt;LaTeX&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;NixOS’ declarative configuration meant that I could actually see the list
growing, all in one place – I suspect on other systems I wouldn’t have noticed
in quite the same way because it would’ve been a much more incremental and
diffuse process of change without a clear record of the choices made.&lt;&#x2F;p&gt;
&lt;p&gt;I thus find in my
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-files&#x2F;blob&#x2F;main&#x2F;nixos&#x2F;modules&#x2F;home-manager&#x2F;cli.nix#L44-L65&quot;&gt;&lt;code&gt;cli.nix&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
config that describes the CLI tools I expect, to have the following collection:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;nix&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      nu_posix&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        bat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # better cat&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        bottom&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # btm ~ better top, htop, etc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        broot&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # interactive directory navigation&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        chafa&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # terminal graphics viewer&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        ctpv&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # terminal file previewer&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        cyme&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # better `lsusb`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        delta&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # better syntax highlighting diff&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        dua&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # disk usage, interactively&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        eza&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # improved `ls`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        fd&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # `find` replacement&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        fend&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # better CLI calculator&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        hexyl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # hex pretty printer&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        htop&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # graphical top&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        iotop&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # io top&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        jujutsu&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # better git&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        just&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # updated gnumake replacement&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        procs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # better ps&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        ripgrep&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # rg ~ `grep` replacement&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        sudo-rs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # memory-safe `sudo`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        uutils-coreutils-noprefix&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # replaces GNU `coreutils`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        viddy&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # better watch&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      ]&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;I think that most, if not all, of these are written in Rust: that particular
language community seems to have a real enthusiasm for re-implementing
long-standing tools but better, and I have to say I really appreciate it! When I
say “better” I’m not particularly thinking of esoteric language features or
development ideologies either. I mean better in two very particular senses:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Usability&lt;&#x2F;strong&gt;. Many of the older tools simply did not have great user
interfaces and, when they were ok, they were not built using modern tooling.
As a result getting documentation was somewhere between good and great if
there was a decent &lt;code&gt;man&lt;&#x2F;code&gt;-page, with a range of potential switches for more
short form help or for cases where the &lt;code&gt;man&lt;&#x2F;code&gt;-page was not installed –
whether &lt;code&gt;-h&lt;&#x2F;code&gt;, &lt;code&gt;--help&lt;&#x2F;code&gt;, &lt;code&gt;-help&lt;&#x2F;code&gt;, &lt;code&gt;-?&lt;&#x2F;code&gt;, &lt;code&gt;help&lt;&#x2F;code&gt;, or something else. The
short-form help would, of course, be formatted in arbitrary ways.&lt;&#x2F;p&gt;
&lt;p&gt;The modern Rust-y replacements tend to use
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docs.rs&#x2F;clap&#x2F;latest&#x2F;clap&#x2F;&quot;&gt;&lt;code&gt;clap&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; as a reasonably standard
command-line parser. As a result, they are remarkably consistent in usage and
format, typically producing something that looks a lot like &lt;code&gt;man&lt;&#x2F;code&gt;-page output
in response to their &lt;code&gt;-h|--help&lt;&#x2F;code&gt; switch. In a world where &lt;code&gt;man&lt;&#x2F;code&gt;-pages are
often an afterthought or, even worse, replaced by &lt;code&gt;info&lt;&#x2F;code&gt; documentation, I
find this invaluable. They are also generally inclined to make greater use of
modern terminal environments – &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;eza-community&#x2F;eza&quot;&gt;&lt;code&gt;eza&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
as a replacement for
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;coreutils&#x2F;manual&#x2F;html_node&#x2F;ls-invocation.html&quot;&gt;&lt;code&gt;ls&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
is a good example of this.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Performance&lt;&#x2F;strong&gt;. Old tools were originally built for old computers in old
languages (largely C) and, whether this is language ideology or just the
practicalities of engineering long-standing widely-used codebases, tended not
to be radically updated.&lt;&#x2F;p&gt;
&lt;p&gt;Rust re-implementations, on the other hand, are from scratch – and Rust’s
memory model appears to make it relatively easy for them to be made
multi-threaded. On modern hardware this seems to make them startlingly higher
performance than the alternatives. Tools I particularly appreciate for this
include &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sharkdp&#x2F;fd&quot;&gt;&lt;code&gt;fd&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; replacing
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;findutils&#x2F;&quot;&gt;&lt;code&gt;find&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;BurntSushi&#x2F;ripgrep&quot;&gt;ripgrep,
&lt;code&gt;rg&lt;&#x2F;code&gt;,&lt;&#x2F;a&gt; replacing
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;grep&#x2F;&quot;&gt;&lt;code&gt;grep&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Perhaps the most immediate example of the benefits of this that I’ve experienced
is &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Byron&#x2F;dua-cli&quot;&gt;&lt;code&gt;dua&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; via &lt;code&gt;dua i&lt;&#x2F;code&gt;. Traditionally, when
trying to clean up an uncomfortably full hard disk I would’ve ended up using
some manual iterative application of either &lt;code&gt;du -hS *&lt;&#x2F;code&gt; or possibly something
like &lt;code&gt;find ... | xargs du&lt;&#x2F;code&gt;. Or possibly written a Python script to do it for me.
And it would’ve taken &lt;em&gt;O&lt;&#x2F;em&gt;(hours) for me to find where the space was being used
and to do something about it. And I would’ve found it tedious and deeply
irritating.&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-2-1&quot;&gt;&lt;a href=&quot;#fn-2&quot;&gt;2&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In contrast, &lt;code&gt;dua i&lt;&#x2F;code&gt; gives me a TUI interface to navigate the filesystem from
wherever I run it, the ability to cumulatively mark files and directories for
trashing or immediate deletion, with subdirectory space summaries – and does so
across ~850GB &#x2F; 3 million files in about 10-15 seconds without using any form of
caching, database, or other such thing. As far as I can tell, simply by being
efficient and multi-threaded.&lt;&#x2F;p&gt;
&lt;p&gt;If this is the future, sign me up. (At least for the bits like this that are
good.)&lt;&#x2F;p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-1&quot;&gt;
&lt;p&gt;…assuming I get back the same courses after my sabbatical that is. &lt;a href=&quot;#fr-1-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li id=&quot;fn-2&quot;&gt;
&lt;p&gt;I’m easily irritated. What can I say. &lt;a href=&quot;#fr-2-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>`nmcli` connection to internal WiFi</title>
        <published>2025-02-14T00:00:00+00:00</published>
        <updated>2025-02-14T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/internalcl-wifi/"/>
        <id>https://mort.io/blog/internalcl-wifi/</id>
        
        <content type="html" xml:base="https://mort.io/blog/internalcl-wifi/">&lt;p&gt;Using my fancy (?) new(-ish) Linux laptop running &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;nixos.org&#x2F;&quot;&gt;NixOS&lt;&#x2F;a&gt;, I
finally had cause to connect to our internal Wi-Fi network. This was not
entirely trivial due to the various configuration options required. So here
goes, for the record, what I did as an aide memoir for me and in case it’s
useful for anyone else…&lt;&#x2F;p&gt;
&lt;p&gt;First, create the connection – the Wi-Fi network in question is named
&lt;code&gt;Internal-CL&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo nmcli connection add type wifi con-name Internal-CL ssid Internal-CL&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Connection&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Internal-CL&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt; (8f1ddcc9-4b1f-4e5d-9992-522714685eb4) successfully added.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then, configure it:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo nmcli connection edit Internal-CL&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;===&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; nmcli&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; interactive connection editor&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;===&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Editing&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; existing &amp;#39;802-11-wireless&amp;#39; connection: &amp;#39;Internal-CL&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Type&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;help&amp;#39; or &amp;#39;?&amp;#39; for available commands.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Type&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;print&amp;#39; to show all the connection properties.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Type&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;describe [&amp;lt;setting&amp;gt;.&amp;lt;prop&amp;gt;]&amp;#39; for detailed property description.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;You&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; may edit the following settings: connection, 802-11-wireless&lt;&#x2F;span&gt;&lt;span&gt; (wifi), 802-11-wireless-security (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;wifi-sec&lt;&#x2F;span&gt;&lt;span&gt;), 802-1x, ethtool, match, ipv4, ipv6, hostname, link, tc, proxy&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; set 802-1x.eap peap&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; set 802-1x.phase2-auth mschapv2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; set 802-1x.identity YOUR-IDENTITY&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; set 802-1x.password YOUR-PASSWORD&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; set wifi-sec.key-mgmt wpa-eap&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; save&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Connection&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;Internal-CL&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt; (8f1ddcc9-4b1f-4e5d-9992-522714685eb4) successfully updated.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; activate&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Monitoring&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; connection activation&lt;&#x2F;span&gt;&lt;span&gt; (press&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; any key to continue&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Connection&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; successfully activated&lt;&#x2F;span&gt;&lt;span&gt; (D-Bus&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; active path: &#x2F;org&#x2F;freedesktop&#x2F;NetworkManager&#x2F;ActiveConnection&#x2F;12&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;nmcli&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; quit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Obviously you will need to provide your own values for &lt;code&gt;YOUR-IDENTITY&lt;&#x2F;code&gt; and
&lt;code&gt;YOUR-PASSWORD&lt;&#x2F;code&gt; :)&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>`just` OCaml</title>
        <published>2025-02-07T00:00:00+00:00</published>
        <updated>2025-02-07T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/just-ocaml/"/>
        <id>https://mort.io/blog/just-ocaml/</id>
        
        <content type="html" xml:base="https://mort.io/blog/just-ocaml/">&lt;p&gt;In similar vein to a &lt;a href=&quot;&#x2F;blog&#x2F;just-latex&quot;&gt;recent post&lt;&#x2F;a&gt;, I have also started using
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;just.systems&#x2F;&quot;&gt;&lt;code&gt;just&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; when I periodically need to rebuild my
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;ocaml.org&#x2F;&quot;&gt;OCaml&lt;&#x2F;a&gt; tool&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-1-1&quot;&gt;&lt;a href=&quot;#fn-1&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt; &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&quot;&gt;&lt;code&gt;ocal&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. So
I ended up replacing the old
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;6bb129627f9d1f27ab31cee810013b362ab80067&#x2F;Makefile&quot;&gt;&lt;code&gt;Makefile&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
with a shiny new
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;8ef8631ae5bbe0315e359d725d467e7d0403fd31&#x2F;Justfile&quot;&gt;&lt;code&gt;Justfile&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As it also proved useful in another (more esoteric) tool I wrote &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;cst-tools&quot;&gt;for parsing
out exam results for my students so I can paste into email
easily&lt;&#x2F;a&gt;, I thought I’d put it here for the
record. So here it is…&lt;&#x2F;p&gt;
&lt;p&gt;Usual preamble of course:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;_&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;default&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;    @&lt;&#x2F;span&gt;&lt;span&gt;just --list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then set some common variables:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;PWD&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; env&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;PWD&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;DOCDIR&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;_build&#x2F;default&#x2F;_doc&#x2F;_html&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;BUILDDIR&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;_build&#x2F;install&#x2F;default&#x2F;bin&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then set the target — the tool name, in this case &lt;code&gt;ocal&lt;&#x2F;code&gt; (so named as this is
an OCaml re-implementation of a tool approximating the trad Unix
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Cal_(command)&quot;&gt;&lt;code&gt;cal&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; tool):&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;TARGET&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;ocal&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now for the actually useful stuff: some targets. Mostly these just call out to
&lt;code&gt;dune&lt;&#x2F;code&gt; but in a way I find more intuitive.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# build targets&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;build&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune build @all&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# cleanup&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;clean&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;clean&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# uninstall targets&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;uninstall&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune uninstall&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# run any tests&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;test&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune runtest&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# format sources&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;format&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune fmt&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Some compound calls next.&lt;&#x2F;p&gt;
&lt;p&gt;First, before building we might need to install dependencies, so do so in the
time-honoured fashion:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# install dependencies&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;depends&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    opam install --yes dune-release odoc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    opam install --yes . --deps-only&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next, to install I first build ready to install, then symlink the resulting
binary into the right place in my home directory:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# install targets&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;install&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; build&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune build @install&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    ln -sf &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{PWD}}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{BUILDDIR}}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{TARGET}}&lt;&#x2F;span&gt;&lt;span&gt; ~&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;.local&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;bin&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To lint all the things, invoke &lt;code&gt;dune&lt;&#x2F;code&gt; twice:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# lint everything&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lint&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune build @lint&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune-release lint&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Similarly, to build the docs, build &lt;em&gt;all&lt;&#x2F;em&gt; the docs:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# build docs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;doc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune build @doc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune build @doc-private&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Try to open the docs on Linux and if that fails, on MacOS:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# open the docs for reading&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;read&lt;&#x2F;span&gt;&lt;span&gt;: doc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    handlr open &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{DOCDIR}}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;index.html &lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;||&lt;&#x2F;span&gt;&lt;span&gt; open &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{DOCDIR}}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, tag and create a release; not actually done this in ages so no idea if
&lt;code&gt;dune-release&lt;&#x2F;code&gt; invocations are still a thing, let alone correct!&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# tag and create a release&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;release&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune-release tag&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    dune-release -vv&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-1&quot;&gt;
&lt;p&gt;Largely due to &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;nixos.org&#x2F;&quot;&gt;NixOS&lt;&#x2F;a&gt; upgrades moving tools into
different locations. &lt;a href=&quot;#fr-1-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Reverse `find`</title>
        <published>2025-02-05T00:00:00+00:00</published>
        <updated>2025-02-05T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/reverse-find/"/>
        <id>https://mort.io/blog/reverse-find/</id>
        
        <content type="html" xml:base="https://mort.io/blog/reverse-find/">&lt;p&gt;In the last few days I discovered I needed to search back up the filesystem from
&lt;code&gt;$CWD&lt;&#x2F;code&gt; to find the first occurence of a file (specifically, a &lt;code&gt;Justfile&lt;&#x2F;code&gt; but
that’s by-the-by). Got bored of doing it by hand so wrote a
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;bash&#x2F;&quot;&gt;&lt;code&gt;bash&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; shell function; here ’tis:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;rf&lt;&#x2F;span&gt;&lt;span&gt; () {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;  local&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; D&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;  while !&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; eza&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -l&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;D&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;1&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;               # first, check `$CWD`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;$(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;realpath&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$D&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;1&amp;quot;)&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; ==&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;1&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt; ] &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; break&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # stop if we hit `&#x2F;` already&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;    D&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$D&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;..&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;                                     # else, iterate one layer up&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;  done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Invoke as (e.g.,) &lt;code&gt;rf Justfile&lt;&#x2F;code&gt;. Alternatively, as a one-liner:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;F&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;Justfile&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; while !&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; eza&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -l&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; ${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;D&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:=&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$F&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;span&gt; [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;$(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;realpath $D&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$F&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;)&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; ==&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$F&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt; ] &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; break&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; D&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$D&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;..&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; done&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; unset&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; D&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Fontsizing in LaTeX</title>
        <published>2025-01-24T00:00:00+00:00</published>
        <updated>2025-01-24T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/fontsizing/"/>
        <id>https://mort.io/blog/fontsizing/</id>
        
        <content type="html" xml:base="https://mort.io/blog/fontsizing/">&lt;p&gt;I recently had colleagues hit an issue that I have hit myself in the past, and
so I finally decided to figure out a fix.&lt;&#x2F;p&gt;
&lt;p&gt;Specifically, when building EPSRC research proposals in LaTeX, getting a
complaint that the font size is non compliant – it should be 11pt Arial, but
the standard LaTeX options generate something slightly smaller, with Adobe
Acrobat and Microsoft tools both reporting a size of 10.45pt or so.&lt;&#x2F;p&gt;
&lt;p&gt;One proposed solution was the to add the following in the preamble:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;latex&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;anyfontsize&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\AtBeginDocument&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\fontsize&lt;&#x2F;span&gt;&lt;span&gt;{11bp}{13.35bp}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\selectfont&lt;&#x2F;span&gt;&lt;span&gt;} &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…but that did not work unfortunately.&lt;&#x2F;p&gt;
&lt;p&gt;After some poking about and staring at output and searching the interwebs, it
appears that this was triggered, at least for me, by the
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;ctan.org&#x2F;pkg&#x2F;fontspec&quot;&gt;&lt;code&gt;fontspec&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; package that was being used to sort
out fonts and unicode and so on in conjunction with
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;xetex.sourceforge.net&#x2F;&quot;&gt;XeLaTeX&lt;&#x2F;a&gt; as a backend driver.&lt;&#x2F;p&gt;
&lt;p&gt;A key piece of debug logic was to add the following text in a document:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;latex&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;The quick fox --- &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\the\fontdimen&lt;&#x2F;span&gt;&lt;span&gt;6&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\font\relax&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…which ensured there was some text and then inserted the font dimesions
according to LaTeX. It did indeed produce the output &lt;code&gt;The quick fox — 9.54147pt&lt;&#x2F;code&gt; when it should’ve been &lt;code&gt;10pt&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The font runes I was using were&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;latex&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;[T1]{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;fontenc&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;lmodern&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;amssymb,amsmath&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;eurosym&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;upquote&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;microtype&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;fontspec&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;xltxtra,xunicode&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\defaultfontfeatures&lt;&#x2F;span&gt;&lt;span&gt;{Mapping=tex-text,Scale=MatchUppercase}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;\renewcommand&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\familydefault&lt;&#x2F;span&gt;&lt;span&gt;}{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\rmdefault&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\setmainfont&lt;&#x2F;span&gt;&lt;span&gt;{Arial}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\setmonofont&lt;&#x2F;span&gt;&lt;span&gt;{Hack Nerd Font}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…and it seemed to be the &lt;code&gt;Scale=MatchUppercase&lt;&#x2F;code&gt; clause that caused the
problem. Further investigation suggested that most of that was actually
copypasta legacy code that was no longer required; replacing with&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;latex&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;\usepackage&lt;&#x2F;span&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;fontspec&lt;&#x2F;span&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\setmainfont&lt;&#x2F;span&gt;&lt;span&gt;{Arial}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;\setmonofont&lt;&#x2F;span&gt;&lt;span&gt;{Hack Nerd Font}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…gave the output &lt;code&gt;The quick fox — 10.0pt&lt;&#x2F;code&gt; in Arial as expected. Which was
nice.&lt;&#x2F;p&gt;
&lt;p&gt;I also realised in the course of doing this that &lt;code&gt;xelatex&lt;&#x2F;code&gt; is now deprecated as
a backend, so I have started using the still actively developed
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.luatex.org&#x2F;&quot;&gt;&lt;code&gt;luatex&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; backend driver instead by passing
&lt;code&gt;-lualatex&lt;&#x2F;code&gt; to &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mgeier.github.io&#x2F;latexmk.html&quot;&gt;&lt;code&gt;latexmk&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and that has
worked fine so far&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>`just` LaTeX it!</title>
        <published>2025-01-18T00:00:00+00:00</published>
        <updated>2025-01-18T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/just-latex/"/>
        <id>https://mort.io/blog/just-latex/</id>
        
        <content type="html" xml:base="https://mort.io/blog/just-latex/">&lt;p&gt;I have recently become a fan of &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;just.systems&#x2F;&quot;&gt;&lt;code&gt;just&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; as a replacement for the venerable
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;make&#x2F;manual&#x2F;make.html&quot;&gt;&lt;code&gt;make&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. I find that nowadays I rarely need the built-in dependency rules
that &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;make&#x2F;manual&#x2F;make.html&quot;&gt;&lt;code&gt;make&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; provides. Perhaps more radically, I also rarely need to write my
own as the prevelance of format-specific build tools such as &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;doc.rust-lang.org&#x2F;stable&#x2F;cargo&#x2F;&quot;&gt;&lt;code&gt;cargo&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;,
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docs.astral.sh&#x2F;uv&#x2F;&quot;&gt;&lt;code&gt;uv&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;ctan.org&#x2F;pkg&#x2F;latexmk&#x2F;&quot;&gt;&lt;code&gt;latexmk&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and the like mean I don’t need to write my own either.&lt;&#x2F;p&gt;
&lt;p&gt;Recently, while writing references and then helping out get submissions for
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.cl.cam.ac.uk&#x2F;events&#x2F;rossfest&#x2F;&quot;&gt;Rossfest&lt;&#x2F;a&gt; consistently formatted and building cleanly, I found myself
extending my various &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;just.systems&#x2F;&quot;&gt;&lt;code&gt;just&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; targets for &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.latex-project.org&#x2F;&quot;&gt;LaTeX&lt;&#x2F;a&gt;. So I thought I’d document
them here.&lt;&#x2F;p&gt;
&lt;p&gt;I always begin my &lt;code&gt;Justfile&lt;&#x2F;code&gt; with the apparently idiomatic “just show me the
targets and associated help text” target:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;_&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;default&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;    @&lt;&#x2F;span&gt;&lt;span&gt;just --list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This seems considerably easier – and more powerful – than the equivalent hack
I used to use in a &lt;code&gt;Makefile&lt;&#x2F;code&gt;!&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;make&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.DEFAULT&lt;&#x2F;span&gt;&lt;span&gt;: help&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.PHONY&lt;&#x2F;span&gt;&lt;span&gt;: help&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;help&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;	@&lt;&#x2F;span&gt;&lt;span&gt;echo &amp;quot;Targets are:&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;	@&lt;&#x2F;span&gt;&lt;span&gt;grep -E &amp;#39;^(^## |[^.#][ a-zA-Z0-9-]+:.*#)&amp;#39; Makefile &lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	| sed -E &amp;#39;s&#x2F;:[[:print:]]+#&#x2F;:&#x2F;;s&#x2F;^([^#])&#x2F;-- \1&#x2F;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next setup up some useful variables: the command we’ll use (&lt;code&gt;latex&lt;&#x2F;code&gt;) plus
sources (&lt;code&gt;texs&lt;&#x2F;code&gt;) and targets (&lt;code&gt;pdfs&lt;&#x2F;code&gt;), and droppings that might be produced but
not cleaned up by &lt;code&gt;latexmk -[cC]&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;latex&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;latexmk -pdf&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;texs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; `&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span&gt; [0-9][0-9]-&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span&gt;.tex&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;pdfs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; replace&lt;&#x2F;span&gt;&lt;span&gt;(texs, &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;.tex&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;.pdf&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;droppings&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; :=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;$f.nav $f.snm $f.bbl&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now to actually building and cleaning things; first, individual targets:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# build a PDF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;pdf&lt;&#x2F;span&gt;&lt;span&gt; tgt&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    {{latex}} {{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;file_stem&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;(tgt)}}&lt;&#x2F;span&gt;&lt;span&gt;.tex&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# clean generated files&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;clean&lt;&#x2F;span&gt;&lt;span&gt; tgt:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    {{latex}}&lt;&#x2F;span&gt;&lt;span&gt; -C &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;file_stem&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;(tgt)}}&lt;&#x2F;span&gt;&lt;span&gt;.tex&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    for f in &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;file_stem&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;(tgt)}}&lt;&#x2F;span&gt;&lt;span&gt;; do rm -f &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{droppings}}&lt;&#x2F;span&gt;&lt;span&gt; ; done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;(Yes, ok, so it seems a bit silly to have to wrap a &lt;code&gt;for&lt;&#x2F;code&gt; loop around simply to
propagate a variable from the &lt;code&gt;Justfile&lt;&#x2F;code&gt; into the shell. But no matter.)&lt;&#x2F;p&gt;
&lt;p&gt;Next, all available targets:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# build all PDFs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;pdfs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    for f in &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{texs}}&lt;&#x2F;span&gt;&lt;span&gt;; do just pdf $f ; done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# clean all PDFs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;clean&lt;&#x2F;span&gt;&lt;span&gt;-pdfs:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    for f in &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{pdfs}}&lt;&#x2F;span&gt;&lt;span&gt;; do just &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;clean&lt;&#x2F;span&gt;&lt;span&gt; $f ; done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, &lt;em&gt;watch&lt;&#x2F;em&gt; a target, rebuilding on save – it may be helpful therefore to
avoid automatically saving the source while in a state in which it will not
successfully build!&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;Just&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# watch a file, rebuilding when saved&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;watch&lt;&#x2F;span&gt;&lt;span&gt; tgt&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    while inotifywait -e close_write &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{tgt}}&lt;&#x2F;span&gt;&lt;span&gt;* ; do just pdf &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;{{tgt}}&lt;&#x2F;span&gt;&lt;span&gt; ; done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Introducing `bibtox`</title>
        <published>2025-01-03T00:00:00+00:00</published>
        <updated>2025-01-03T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/bibtox/"/>
        <id>https://mort.io/blog/bibtox/</id>
        
        <content type="html" xml:base="https://mort.io/blog/bibtox/">&lt;p&gt;After some time using various tools and scripts to format and sort my files of
BibTeX&#x2F;BibLaTeX entries, I finally gave up back in March and &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;bibtox&quot;&gt;wrote one myself
– &lt;code&gt;bibtox&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. This replaced some very nasty
combination of server-side &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;bibtox&#x2F;blob&#x2F;83eda34bc9e79bd5251b1ae9623b5e905532c599&#x2F;bib2json.py&quot;&gt;Python&lt;&#x2F;a&gt; and in-page &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;bibtox&#x2F;blob&#x2F;83eda34bc9e79bd5251b1ae9623b5e905532c599&#x2F;papers.coffee&quot;&gt;CoffeeScript&lt;&#x2F;a&gt;, plus a
third-party tool &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;backtracking&#x2F;bibtex2html&quot;&gt;&lt;code&gt;bib2bib&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; I
would run on an ad hoc basis.&lt;&#x2F;p&gt;
&lt;p&gt;Per the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;bibtox&#x2F;blob&#x2F;main&#x2F;README.md&quot;&gt;README&lt;&#x2F;a&gt;, this
processes either a stream of entries on &lt;code&gt;stdin&lt;&#x2F;code&gt; or a set of files arranged into
sections specified by a simple configuration file. It outputs sorted or
unsorted, either as canonicalised entries or marked up HTML.&lt;&#x2F;p&gt;
&lt;p&gt;And it means that, hopefully, finally, my list of publications on this site is
consistently formatted and sorted. Completeness is, of course, a process rather
than a state so achieving that is left for other times and places.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;bibtox&#x2F;issues&quot;&gt;Issues&lt;&#x2F;a&gt; or &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;bibtox&#x2F;pulls&quot;&gt;pull
requests&lt;&#x2F;a&gt; welcome!&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Stop, Start</title>
        <published>2024-08-30T00:00:00+00:00</published>
        <updated>2024-08-30T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/stop-start/"/>
        <id>https://mort.io/blog/stop-start/</id>
        
        <content type="html" xml:base="https://mort.io/blog/stop-start/">&lt;p&gt;Well, here we go again, again. Having stalled out back in 2013 to restart in
2015, I stalled out again in 2017, so am finally restarting seven years later.
Again. I do have a dozen or more half-written posts from that period that may
leak out slowly, in &lt;a href=&quot;&#x2F;tags&#x2F;old&quot;&gt;backdated form&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The stack for the blog has been updated again, naturally – the tools got better
after all. So now this is using &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.getzola.org&quot;&gt;Zola&lt;&#x2F;a&gt; with, initially,
the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jieiku&#x2F;abridge&#x2F;&quot;&gt;abridge theme&lt;&#x2F;a&gt;. I think it’s shinier,
and hopefully also involves (almost) no JavaScript, is finally accessible, and
not too heavyweight. In removing the excessive JavaScript, I also updated my
&lt;a href=&quot;https:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;stop-start&#x2F;.&#x2F;research#publications&quot;&gt;publication list&lt;&#x2F;a&gt; &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;bib2html&quot;&gt;generation
process&lt;&#x2F;a&gt;: no more CoffeeScript and JavaScript,
just some plain ol’ &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.python.org&#x2F;&quot;&gt;Python&lt;&#x2F;a&gt; using the slick new
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;astral-sh&#x2F;uv&quot;&gt;uv&lt;&#x2F;a&gt; tooling. The
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;casey&#x2F;just&quot;&gt;Justfile&lt;&#x2F;a&gt; incantation is something like:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;make&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;papers&lt;&#x2F;span&gt;&lt;span&gt; := &amp;quot;..&#x2F;templates&#x2F;shortcodes&#x2F;publications.html&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;bibinputs&lt;&#x2F;span&gt;&lt;span&gt; := &amp;quot;..&#x2F;papers&#x2F;bibinputs.json&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# build papers data for site&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;@papers&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  cd bib2html &amp;amp;&amp;amp; uv sync &amp;amp;&amp;amp; uv run -- .&#x2F;src&#x2F;bib2html {{bibinputs}} &amp;gt;| {{papers}}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;I’ve also added a &lt;a href=&quot;https:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;stop-start&#x2F;.&#x2F;register&#x2F;&quot;&gt;register of interests&lt;&#x2F;a&gt; so I stop having to
scrabble around remembering what I’m officially doing when I’m occasionally
asked.&lt;&#x2F;p&gt;
&lt;p&gt;The stack underneath has also changed. I finally kicked the Mac OS habit after
over 10 years – decided I’d had enough of Apple hiding things and generally
getting in my way – at the same time I switched from Android to iPhone. Never
do things the easy way, that’s my motto. So now I’m back on a PC … but it
turns out that 2024 (well, 2023 in fact) is the year of Linux on the Laptop for
me. Not something I thought would actually happen when we joked about it in the
late 90s. Truly, times change. And not just any old wannabe-Windows distribution
but the resolutely idiosyncratic and copiously yet poorly documented
&lt;a href=&quot;httsp:&#x2F;&#x2F;nixos.org&#x2F;&quot;&gt;NixOS&lt;&#x2F;a&gt; using Flakes and Home-Manager of course, with
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;wayland.freedesktop.org&#x2F;&quot;&gt;Wayland&lt;&#x2F;a&gt; and &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;swaywm.org&#x2F;&quot;&gt;Sway&lt;&#x2F;a&gt;.
I’ve even finally made the leap to &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;vscodium.com&#x2F;&quot;&gt;Codium&lt;&#x2F;a&gt;, the
de-Microsofted version of VSCode, from
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;emacs&#x2F;&quot;&gt;Emacs&lt;&#x2F;a&gt; (mostly –
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;orgmode.org&#x2F;&quot;&gt;org-mode&lt;&#x2F;a&gt; has not yet been replaced). I blame
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.jeffas.net&#x2F;&quot;&gt;Andrew&lt;&#x2F;a&gt; and &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.jentek.dev&#x2F;&quot;&gt;Chris&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;For the terminally curious, this meant a fairly heavy reworking of my 30 years
old &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-files&#x2F;&quot;&gt;dotfiles&lt;&#x2F;a&gt; – still work in progress but
adequately organised for now I think. See the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-files&#x2F;tree&#x2F;main&#x2F;nixos&quot;&gt;NixOS specific
bits&lt;&#x2F;a&gt; if curious.&lt;&#x2F;p&gt;
&lt;p&gt;And, because I’m going to try to include at least one vaguely technical bit (or
at least, one bit which isn’t just me bemoaning that I haven’t written anything
in years), I confess to being particularly pleased with the following fragment
to enable &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-files&#x2F;blob&#x2F;main&#x2F;nixos&#x2F;modules&#x2F;home-manager&#x2F;sway.nix#L64-L122&quot;&gt;my Sway startup
script&lt;&#x2F;a&gt;
to start several apps on particular workspaces, by switching to the workspace,
starting the app, and then waiting for a suitable window to appear. The latter
step entails&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;subscribing &lt;code&gt;swaymsg&lt;&#x2F;code&gt; to &lt;code&gt;window&lt;&#x2F;code&gt; messages with
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;jqlang.github.io&#x2F;jq&#x2F;&quot;&gt;jq&lt;&#x2F;a&gt; to extract the messages of interest
indicating a new window in the background,&lt;&#x2F;li&gt;
&lt;li&gt;executing the command to start the app,&lt;&#x2F;li&gt;
&lt;li&gt;using &lt;code&gt;grep&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;pkill&lt;&#x2F;code&gt; in tandem to kill the subscription when the new window is
detected,  and finally&lt;&#x2F;li&gt;
&lt;li&gt;waiting for the subscription to have been killed.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;It seems fairly (indeed, surprisingly) reliable.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;wait_for&lt;&#x2F;span&gt;&lt;span&gt; () {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; swaymsg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -r -m -t&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; subscribe &amp;#39;[&amp;quot;window&amp;quot;]&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;    jq&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -c --unbuffered&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;. | select(.change == &amp;quot;new&amp;quot;)&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; grep&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -m1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;dev&#x2F;null&lt;&#x2F;span&gt;&lt;span&gt; ;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; pkill&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; swaymsg&lt;&#x2F;span&gt;&lt;span&gt; ;} &amp;amp;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  }&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; 2&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;dev&#x2F;null&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  pid&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$!&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  swaymsg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;exec &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$*&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sleep&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 0.5&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  wait $pid&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; 2&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;dev&#x2F;null&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Use via something like:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;nix&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;wayland&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;windowManager&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;sway&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;config&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;startup&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;  let&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    msg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; cmds:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;swaymsg &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;builtins&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;concatStringsSep&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;, &amp;quot;&lt;&#x2F;span&gt;&lt;span&gt; cmds&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    workspace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; ws: msg [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;workspace --no-auto-back-and-forth &lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span&gt;ws&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt; ]&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    after&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; delay: cmds:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;sleep &lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;toString&lt;&#x2F;span&gt;&lt;span&gt; delay&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;amp;&amp;amp; &lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span&gt;msg cmds&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    startup&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; pkgs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;writeShellScriptBin&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;startup.sh&amp;quot; &amp;#39;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      wait_for () {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;        { swaymsg -r -m -t subscribe &amp;#39;[&amp;quot;window&amp;quot;]&amp;#39; |&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;          jq -c --unbuffered &amp;#39;. | select(.change == &amp;quot;new&amp;quot;)&amp;#39; |&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;          { grep -m1 . &amp;gt;&#x2F;dev&#x2F;null ; pkill swaymsg ;} &amp;amp;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;        } 2&amp;gt;&#x2F;dev&#x2F;null&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;        pid=$!&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;        swaymsg -- &amp;quot;exec $*&amp;quot; &amp;amp;&amp;amp; sleep 0.5&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;        wait $pid 2&amp;gt;&#x2F;dev&#x2F;null&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;      ${&lt;&#x2F;span&gt;&lt;span&gt;workspace&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span&gt;mediaws&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;      wait_for &amp;quot;rhythmbox&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    &amp;#39;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;  in&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  [ {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt; command&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;${&lt;&#x2F;span&gt;&lt;span&gt;startup&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;bin&#x2F;startup.sh&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;; } ]&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Discovering `restic`</title>
        <published>2024-08-26T00:00:00+00:00</published>
        <updated>2024-08-26T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/restic-discovery/"/>
        <id>https://mort.io/blog/restic-discovery/</id>
        
        <content type="html" xml:base="https://mort.io/blog/restic-discovery/">&lt;p&gt;I recently had cause to try to recover some files from my
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;restic.net&#x2F;&quot;&gt;&lt;code&gt;restic&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; backups. These go back for over a year now, and
I could not remember at which point I’d mistakenly nuked the directory I now
wanted to recover. &lt;code&gt;restic find&lt;&#x2F;code&gt; purports to be able to do this by searching
through snapshots but I found that it’s quite slow, and can only search within a
time range which is not that helpful when you don’t know the time range you
need.&lt;&#x2F;p&gt;
&lt;p&gt;So I did it by hand, which turned out to be rather faster.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; RESTIC_PASSWORD_FILE&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;your&#x2F;backup&#x2F;password&#x2F;file&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; RESTIC_REPOSITORY&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;your&#x2F;backup&#x2F;repository&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;    # list snapshots, filtering by DATE regex, grabbing just the snapshot hash&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;    sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -E&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; restic snapshots&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -c \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;    |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; rg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; DATE&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;    |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; cut&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -b1-8 \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;    | while&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; read&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ss&lt;&#x2F;span&gt;&lt;span&gt;;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;    echo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;=== &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$ss&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;    sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -E&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; restic ls&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $ss&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; rg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;DIRECTORY&#x2F;&lt;&#x2F;span&gt;&lt;span&gt; ;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; done&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt; done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The key thing with the above approach is that it’s also quite amenable to
bisection, which makes it a lot faster.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Debugging Electron apps</title>
        <published>2024-08-14T00:00:00+00:00</published>
        <updated>2024-08-14T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/electron-cli/"/>
        <id>https://mort.io/blog/electron-cli/</id>
        
        <content type="html" xml:base="https://mort.io/blog/electron-cli/">&lt;p&gt;Another short one, this time the magic flags to get debug output and access to
webdev tools under Electron apps such as Slack and whatnot on Wayland:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;APPLICATION&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --enable-logging --devtools \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  --platform=wayland --enable-features=UseOzonePlatform --password-store=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;gnome_libsecret&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Reinstalling `maestral`</title>
        <published>2024-06-28T00:00:00+00:00</published>
        <updated>2024-06-28T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/reinstall-maestral/"/>
        <id>https://mort.io/blog/reinstall-maestral/</id>
        
        <content type="html" xml:base="https://mort.io/blog/reinstall-maestral/">&lt;p&gt;A short one this; just a crib of commands to redo &lt;code&gt;maestral&lt;&#x2F;code&gt; (unofficial
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;dropbox.com&#x2F;&quot;&gt;Dropbox&lt;&#x2F;a&gt; client) configuration.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# remove existing configuration&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;rm&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ~&#x2F;.config&#x2F;maestral&#x2F;maestral.ini&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# appears to fail with `&#x2F;usr&#x2F;bin&#x2F;env &amp;#39;bash&amp;#39;: No such file or directory`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;maestral&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; autostart&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; systemctl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --user&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; daemon-reload&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# ...so instead, just remmeber to do the following on restart&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;maestral&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; stop&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; maestral&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; start&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# if desired, add autocompletion for `maestral` in bash&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;[[ $(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;which&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; maestral&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; 2&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;dev&#x2F;null&lt;&#x2F;span&gt;&lt;span&gt;) ]] &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; source&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;lt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;maestral&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; completion bash)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>OneDrive and NixOS</title>
        <published>2023-08-22T00:00:00+00:00</published>
        <updated>2023-08-22T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/nixos-onedrive/"/>
        <id>https://mort.io/blog/nixos-onedrive/</id>
        
        <content type="html" xml:base="https://mort.io/blog/nixos-onedrive/">&lt;p&gt;Starting by reading instructions at:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;abraunegg&#x2F;onedrive&#x2F;blob&#x2F;master&#x2F;docs&#x2F;sharepoint-libraries.md&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;abraunegg&#x2F;onedrive&#x2F;blob&#x2F;master&#x2F;docs&#x2F;sharepoint-libraries.md&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;abraunegg&#x2F;onedrive&#x2F;blob&#x2F;master&#x2F;docs&#x2F;business-shared-items.md&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;abraunegg&#x2F;onedrive&#x2F;blob&#x2F;master&#x2F;docs&#x2F;business-shared-items.md&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;nixpkgs&#x2F;pull&#x2F;77734#issuecomment-575874225&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;nixpkgs&#x2F;pull&#x2F;77734#issuecomment-575874225&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;FWIW I also use that package on a NixOS system (via a Nix package that can presumably be installed on other systems if you add nix as a  package manager), &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;nixpkgs&#x2F;blob&#x2F;master&#x2F;nixos&#x2F;modules&#x2F;services&#x2F;networking&#x2F;onedrive.nix&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;NixOS&#x2F;nixpkgs&#x2F;blob&#x2F;master&#x2F;nixos&#x2F;modules&#x2F;services&#x2F;networking&#x2F;onedrive.nix&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I have successfully used it with the University and my startup’s tenancies (both personal OneDrive and enterprise Sharepoint sites) simultaneously – this was fairly simple in the end but I recall it took a while to do the token dance to get the necessary tokens, and then to get all the runes right. In short it was something like:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Follow the instructions Robert pointed to sort out access to the various accounts, refresh tokens, and the like.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Create file &lt;code&gt;~&#x2F;.config&#x2F;onedrive-launcher&lt;&#x2F;code&gt; comprising each subdirectory of &lt;code&gt;~&#x2F;.config&lt;&#x2F;code&gt; that is a onedrive configuration directory corresponding to each account – I named these after the accounts in question so mine contained&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;plain&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;onedrive-rmm1002@cam.ac.uk&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;onedrive-mort@ikva.ai&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;sharepoint-mort@ikva.ai-iKVALimited&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;(I now prefix the last two lines with &lt;code&gt;# &lt;&#x2F;code&gt; to comment them out as I don’t need those synced any more.)&lt;&#x2F;p&gt;
&lt;p&gt;The systemd service &lt;code&gt;onedrive-launcher.service&lt;&#x2F;code&gt; then uses the file to kick off a systemd &lt;code&gt;onedrive@...&lt;&#x2F;code&gt; service for each entry.&lt;&#x2F;p&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;Edit the &lt;code&gt;~&#x2F;.config&#x2F;ACCOUNT&#x2F;config&lt;&#x2F;code&gt; files appropriately; the only changes I made were to&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;plain&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;# for my University account&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;sync_dir = &amp;quot;~&#x2F;OneDrive&#x2F;rmm1002@cam.ac.uk&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;# for my startup personal OneDrive&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;sync_dir = &amp;quot;~&#x2F;OneDrive&#x2F;mort@ikva.ai&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;sync_business_shared_folders = &amp;quot;true&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;﻿&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;# for startup Sharepoint sites&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;sync_dir = &amp;quot;~&#x2F;OneDrive&#x2F;mort@ikva.ai-iKVA_Limited&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;drive_id = &amp;quot;...&amp;quot; # rune found per instructions Robert pointed to I think&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>WSL2 &#x2F; Windows 11</title>
        <published>2023-03-13T00:00:00+00:00</published>
        <updated>2023-03-13T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/windows-wsl2/"/>
        <id>https://mort.io/blog/windows-wsl2/</id>
        
        <content type="html" xml:base="https://mort.io/blog/windows-wsl2/">&lt;p&gt;I naively thought I could just use WSL2 on Windows on my new laptop. But it
turned out this was the year of Linux on the Laptop for me. For posterity
here’s the crib sheet though.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;wsl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --set-default-version&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt update&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt upgrade&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -yy&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt install locales&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; locale-gen en_GB.UTF-8&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt install&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -yy&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; emacs-gtk direnv gedit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; clone .&#x2F;..rc-files&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;.&#x2F;scripts&#x2F;install.sh&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Some Windows native packages using &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;chocolatey.org&#x2F;&quot;&gt;Chocolatey&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;choco&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install signal skype wire slack zoom&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;choco&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install git&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;choco&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install rustup.install rust-analyzer python&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;choco&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install docker&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;choco&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install powertyos dropbox googledrive wiztree&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;However, &lt;code&gt;choco install texlive&lt;&#x2F;code&gt; didn’t work so well, so I fell back to WSL2:
&lt;code&gt;sudo apt install latexmk texlive-latex-base texlive-xetex ttf-mscorefonts-installer&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Use MS Powertoys to remap keyboard for &lt;code&gt;CAPSLOCK&lt;&#x2F;code&gt;, &lt;code&gt;€&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Timesync is a bit broken, cf &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;72318510&quot;&gt;https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;72318510&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Unfortunately it all went pear-shaped when I tried to &lt;code&gt;rsync&lt;&#x2F;code&gt; files across from
MacOS into Windows&#x2F;WSL2.&lt;&#x2F;p&gt;
&lt;p&gt;I mapped the network drive via Network and Sharing Center &amp;gt; Settings &amp;gt; Network &amp;amp;
internet &amp;gt; Advanced network settings &amp;gt; Advanced sharing settings &amp;gt; Public
networks &amp;gt; Network discovery = ON&lt;&#x2F;p&gt;
&lt;p&gt;…and then&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; d&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; in&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; admin christs docs rc-files research src teaching me&lt;&#x2F;span&gt;&lt;span&gt; ;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  echo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;=== &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$d&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  rsync&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -uavzsP --log-file=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$d&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;.$(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;date&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -Iseconds) -e&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ssh mort@IPADDRESS:&#x2F;Users&#x2F;mort&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$d&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F; .&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$d&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…but found that moving files to the host mashed things a bit (&lt;code&gt;rw&lt;&#x2F;code&gt; bits
carried, but &lt;code&gt;x&lt;&#x2F;code&gt; not; hidden files not; no content translation; owner carried)
while moving host files to wsl was sort-of ok (owner carried, rw bits carried)
except that &lt;code&gt;group&lt;&#x2F;code&gt; and &lt;code&gt;other&lt;&#x2F;code&gt; access bits are all set to whatever the &lt;code&gt;user&lt;&#x2F;code&gt;
access bits were.&lt;&#x2F;p&gt;
&lt;p&gt;See
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;41513597&#x2F;how-do-i-access-the-wsl-linux-file-system-from-windows&quot;&gt;https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;41513597&#x2F;how-do-i-access-the-wsl-linux-file-system-from-windows&lt;&#x2F;a&gt;
for more, perhaps.&lt;&#x2F;p&gt;
&lt;p&gt;Getting Docker installed was also rather painful:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# remove old distribution dockers&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt remove docker.io containerd runc&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt autoremove&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# install dependencies to use an alternative package repo&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt-get update&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt-get install ca-certificates curl gnupg lsb-release&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# install the new package repo&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mkdir&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -m&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 0755&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -p&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;etc&#x2F;apt&#x2F;keyrings&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;curl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -fsSL&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu&#x2F;gpg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; gpg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --dearmor -o&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;etc&#x2F;apt&#x2F;keyrings&#x2F;docker.gpg&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;echo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;   &amp;quot;deb [arch=$(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;dpkg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --print-architecture&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;) signed-by=&#x2F;etc&#x2F;apt&#x2F;keyrings&#x2F;docker.gpg] https:&#x2F;&#x2F;download.docker.com&#x2F;linux&#x2F;ubuntu $(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lsb_release&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -cs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;) stable&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;docker.list&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;dev&#x2F;null&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# install up-to-date Docker&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt-get update&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt-get install&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  docker-ce&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  docker-ce-cli&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  containerd.io&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  docker-buildx-plugin&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  docker-compose-plugin&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, some further references that may or may not be useful:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;stephenreescarter.net&#x2F;how-to-shrink-a-wsl2-virtual-disk&#x2F;&quot;&gt;https:&#x2F;&#x2F;stephenreescarter.net&#x2F;how-to-shrink-a-wsl2-virtual-disk&#x2F;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.linkedin.com&#x2F;pulse&#x2F;acceso-wsl2-desde-windows-con-samba-manuel-nicol%C3%A1s-ortu%C3%B1o&#x2F;&quot;&gt;https:&#x2F;&#x2F;www.linkedin.com&#x2F;pulse&#x2F;acceso-wsl2-desde-windows-con-samba-manuel-nicol%C3%A1s-ortu%C3%B1o&#x2F;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.howtogeek.com&#x2F;193013&#x2F;how-to-create-an-encrypted-container-file-with-bitlocker-on-windows&#x2F;&quot;&gt;https:&#x2F;&#x2F;www.howtogeek.com&#x2F;193013&#x2F;how-to-create-an-encrypted-container-file-with-bitlocker-on-windows&#x2F;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Discord discord</title>
        <published>2020-08-01T00:00:00+00:00</published>
        <updated>2020-08-01T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/discord/"/>
        <id>https://mort.io/blog/discord/</id>
        
        <content type="html" xml:base="https://mort.io/blog/discord/">&lt;p&gt;So for some reason I wanted to do this – use Discord on an iPad without
installing the app. This proved surprisingly tricky as Safari on the iPad
&lt;em&gt;really&lt;&#x2F;em&gt; wanted to make you use the app and certainly wouldn’t display the
desktop site.&lt;&#x2F;p&gt;
&lt;p&gt;However, Firefox Focus can though it still forced you into the app from the link
in the invite email.&lt;&#x2F;p&gt;
&lt;p&gt;However, you can go to the website to signup and then manually invite yourself
via a real desktop browser. And this then means that Firefox Focus on the iPad
believes in the new account and just lets you in.&lt;&#x2F;p&gt;
&lt;p&gt;Seems something of a palaver but hey, these twisted webs we weave.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Setting up a Macbook</title>
        <published>2020-01-01T00:00:00+00:00</published>
        <updated>2020-01-01T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/setup-new-laptop/"/>
        <id>https://mort.io/blog/setup-new-laptop/</id>
        
        <content type="html" xml:base="https://mort.io/blog/setup-new-laptop/">&lt;p&gt;This is the set of things that I roughly did to set up my old new Macbook:
configurations, packages, etc. Not guaranteed complete, but hopefully captures
much of it.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;keyboard&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#keyboard&quot; aria-label=&quot;Anchor link for: keyboard&quot;&gt;Keyboard&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Set the touchbar to expanded&lt;&#x2F;li&gt;
&lt;li&gt;Turn off various emacs conflicts (e.g., &lt;code&gt;S-M-6&lt;&#x2F;code&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;karabiner-elements.pqrs.org&#x2F;&quot;&gt;Karabiner Elements&lt;&#x2F;a&gt; to make
&lt;code&gt;CAPSLOCK&lt;&#x2F;code&gt; become &lt;code&gt;ESC&lt;&#x2F;code&gt; on a single press&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;homebrew-packages&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#homebrew-packages&quot; aria-label=&quot;Anchor link for: homebrew-packages&quot;&gt;Homebrew packages&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Install &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;brew.sh&#x2F;&quot;&gt;Homebrew&lt;&#x2F;a&gt; and then&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# install packages&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;brew&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                    \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  aspcud&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  aspell&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  bash-completion&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                               \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  coreutils&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                     \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  direnv&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  emacs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  evernote&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                      \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  ffmpeg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  font-hack-nerd-font&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                           \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  gawk&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                          \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  gcc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                           \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  get_iplayer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                   \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  ghostscript&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                   \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  git&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                           \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  git-lfs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                       \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  gnupg2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  gnuplot&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                       \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  gpg-agent&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                     \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  graphviz&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                      \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  imagemagick&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                   \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  jq&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                            \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  lua&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                           \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  mu&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                            \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  ncftp&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  nmap&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                          \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  ocaml&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  offlineimap&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                   \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  omnigraffle&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                   \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  opam&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                          \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  python&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  python@2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                      \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  qemu&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                          \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  rcs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                           \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  readline&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                      \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  rsync&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  socat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  sshfs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  telnet&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  tmux&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                          \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  unrar&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  wget&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# install casks&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;brew&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; tap homebrew&#x2F;cask-versions&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;brew&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; cask install&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                               \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  adium&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  disk-inventory-x&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                              \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  docker&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  dropbox&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                       \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  emacs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  evernote&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                      \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  font-hack-nerd-font&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                           \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  get-iplayer-automator&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  google-backup-and-sync&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  google-drive-file-stream&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                      \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  gpodder&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                       \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  inkscape&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                      \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  iterm2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  karabiner-elements&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                            \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  keepingyouawake&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                               \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  keybase&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                       \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  mactex&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  mp3tag&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  musicbrainz-picard&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                            \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  omnigraffle6&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                  \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  onedrive&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                      \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  osxfuse&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                       \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  sharepod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                      \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  signal&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                        \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  slack&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;                                         \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  vlc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; lfs install&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --system&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # enable `git-lfs` system-wide&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;mu&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; index&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --rebuild&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # rebuild `mu` index&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;opam&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; init&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # initialise `opam`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;podcasts&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#podcasts&quot; aria-label=&quot;Anchor link for: podcasts&quot;&gt;Podcasts&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Extract  RSS feeds from iTunes:&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;grep&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; Location Library.xml&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sed&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;s&#x2F;[[:space:]]&#x2F;&#x2F;g&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sort&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  grep&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -iv&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;\.\(mp[34]\|m4[av]\)&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; grep&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; http&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; cut&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -b&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 28-&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  cut&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -f&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -d&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&amp;lt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; PODCAST.URLS&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;ocal&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#ocal&quot; aria-label=&quot;Anchor link for: ocal&quot;&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&quot;&gt;OCal&lt;&#x2F;a&gt;&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;opam&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -y&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ocal&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Wipeout</title>
        <published>2018-12-17T00:00:00+00:00</published>
        <updated>2018-12-17T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/wipeout/"/>
        <id>https://mort.io/blog/wipeout/</id>
        
        <content type="html" xml:base="https://mort.io/blog/wipeout/">&lt;p&gt;I recently decided to go through some old PCs and hard disks (yes, actual
spinning bits of metal) and recycle or simply junk them. I figured I should wipe
them properly first, and given that they had been installed with a range of OSs,
setup a bootable USB stick so that I could boot and wipe in one easy motion.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Download &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;alpinelinux.org&#x2F;downloads&#x2F;&quot;&gt;Alpine Linux&lt;&#x2F;a&gt; &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;dl-cdn.alpinelinux.org&#x2F;alpine&#x2F;v3.8&#x2F;releases&#x2F;x86_64&#x2F;alpine-extended-3.8.1-x86_64.iso&quot;&gt;3.8.1
ISO&lt;&#x2F;a&gt;
– I had only &lt;code&gt;x86_64&lt;&#x2F;code&gt; machines, YMMV obviously&lt;&#x2F;li&gt;
&lt;li&gt;Write this to a USB stick using &lt;code&gt;dd&lt;&#x2F;code&gt; (on Linux), or &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;etcher.balena.io&#x2F;&quot;&gt;Balena
Etcher&lt;&#x2F;a&gt; on Windows&lt;&#x2F;li&gt;
&lt;li&gt;Insert the stick and boot the machine after making any necessary BIOS changes&lt;&#x2F;li&gt;
&lt;li&gt;If the machine has been unbooted for too long or (as one of mine) has a flat
CMOS clock battery so cannot retain time across reboots, set the time
&lt;ul&gt;
&lt;li&gt;manually: &lt;code&gt;date --set=&quot;20181217&quot;&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;automatically: &lt;code&gt;setup-alpine&lt;&#x2F;code&gt; to start configuring things, then &lt;code&gt;CTRL-C&lt;&#x2F;code&gt;
after network setup, and execute &lt;code&gt;setup-ntp&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Then &lt;code&gt;setup-alpine; apk add coreutils&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Finally, &lt;code&gt;shred --verbose &#x2F;dev&#x2F;sdXN&lt;&#x2F;code&gt; where &lt;code&gt;X&lt;&#x2F;code&gt; is the device id and &lt;code&gt;N&lt;&#x2F;code&gt; the
partition number (eg., &lt;code&gt;&#x2F;dev&#x2F;sda2&lt;&#x2F;code&gt;), or &lt;code&gt;shred --verbose -n1 &#x2F;dev&#x2F;sdXN&lt;&#x2F;code&gt; if
you’re using a modern disk (apparently) and only want one pass of random data&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;installing-alpine&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#installing-alpine&quot; aria-label=&quot;Anchor link for: installing-alpine&quot;&gt;Installing Alpine&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;After installing Alpine as above:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;adduser mort&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;create &lt;code&gt;~mort&#x2F;.ssh&#x2F;authorized_keys&lt;&#x2F;code&gt; containing you preferred public key, and
set permissions (&lt;code&gt;chmod 600 ~mort&#x2F;.ssh&#x2F;authorized_keys&lt;&#x2F;code&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;apk add sudo&lt;&#x2F;code&gt; and then &lt;code&gt;visudo&lt;&#x2F;code&gt; to allow members of group &lt;code&gt;sudo&lt;&#x2F;code&gt; to &lt;code&gt;sudo&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;add &lt;code&gt;mort&lt;&#x2F;code&gt; to group &lt;code&gt;sudo&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;logout and then back in&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;You can then configure storage as you see fit; it seems I once did probably
using &lt;code&gt;sudo&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;apk&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; add lvm2 git bash xfsprogs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;pvcreate&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;dev&#x2F;sd[bc]&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # create persistent volumes group&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;vgextend&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; vg0 &#x2F;dev&#x2F;sdb&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # assign storage devices to volume group&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;vgextend&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; vg0 &#x2F;dev&#x2F;sdc&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; #&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lvcreate&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --name&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; lv_home&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --size&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 60G vg0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # create logical volume `lv_home`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;mkfs.xfs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;dev&#x2F;vg0&#x2F;lv_home&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # format `lv_home` using XFS&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;lvcreate&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --name&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; lv_backup&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --size&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 60G vg0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # create logical volume `lv_backup`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;mkfs.xfs&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;dev&#x2F;vg0&#x2F;lv_backup&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # format `lv_backup` using XFS&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# create `&#x2F;etc&#x2F;fstab` to match the above configuration&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;etc&#x2F;fstab&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;lt;&amp;lt;&lt;&#x2F;span&gt;&lt;span&gt;EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;dev&#x2F;vg0&#x2F;lv_home	&#x2F;home	xfs	defaults	0 0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;dev&#x2F;vg0&#x2F;lv_backup	&#x2F;backup	xfs	defaults	0 0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;mount&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -a -v&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # mount everything, verbosely&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Back to the Future</title>
        <published>2017-12-14T00:00:00+00:00</published>
        <updated>2017-12-14T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/back-to-the-future/"/>
        <id>https://mort.io/blog/back-to-the-future/</id>
        
        <content type="html" xml:base="https://mort.io/blog/back-to-the-future/">&lt;blockquote&gt;
&lt;p&gt;Ed: the first in a likely series, this is one of the posts I drafted but never
published during my seven years in the blogging wilderness&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;I have been having persistent issues on MacOS with Time Machine backups
interacting badly with several configuration elements and other services. This
is exacerbated by my use of maildirs to backup emails, with my Gmail account
leading to a directory with some millions of files. (Yeah, ok, maybe not wise
but hey, we are where we are.)&lt;&#x2F;p&gt;
&lt;p&gt;So in the course of trying to get backups to work reliably, I found the
following commands useful to at least some degree:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;mdutil -sav&lt;&#x2F;code&gt; to get info about spotlight indexing status&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;sudo mdutil -Ea -i [off|on]&lt;&#x2F;code&gt; to turn off|on spotlight indexing where possible&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;sudo fs_usage -w mdworker mds_stores backupd&lt;&#x2F;code&gt; obtain the current filesystem
usage for those services&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;sudo fs_usage -w -e iTerm2&lt;&#x2F;code&gt; to obtain current filesystem usage for services
&lt;em&gt;excluding&lt;&#x2F;em&gt; those listed&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;sudo sysctl debug.lowpri_throttle_enabled=[0|1]&lt;&#x2F;code&gt; stop|start throttling to go
faster|be nice!&lt;&#x2F;li&gt;
&lt;li&gt;to obtain the various different hostnames that MacOS seems to want to give;
note that renaming &lt;code&gt;ComputerName&lt;&#x2F;code&gt; (also possible via
&lt;code&gt;SysPrefs&amp;gt;Sharing&amp;gt;&amp;gt;name&lt;&#x2F;code&gt;) caused the Time Machine directory to be renamed
when the backup started&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; n&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; in&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  ComputerName LocalHostName HostName&lt;&#x2F;span&gt;&lt;span&gt; ;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; do&lt;&#x2F;span&gt;&lt;span&gt; &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  scutil&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --get&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $n&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;done&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tmutil listbackups&lt;&#x2F;code&gt; to list backups&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;tmutil listlocalsnapshotdates &#x2F;&lt;&#x2F;code&gt; to list local snapshots&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;tmutil destinationinfo&lt;&#x2F;code&gt; to list the Time Machine destination volumes&lt;&#x2F;li&gt;
&lt;li&gt;to stream Time Machine log entries live&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;log&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; stream&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --style&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; syslog&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --debug --info \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  --predicate&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;senderImagePath contains[cd] &amp;quot;TimeMachine&amp;quot;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;to show Time Machine log entries from YYYY-MM-DD&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;log&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; show&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --style&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; syslog&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --debug --info --start&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; YYYY-MM-DD&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;  --predicate&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;senderImagePath contains[cd] &amp;quot;TimeMachine&amp;quot;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Quelle dommage</title>
        <published>2017-11-05T00:00:00+00:00</published>
        <updated>2017-11-05T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/quelle-dommage/"/>
        <id>https://mort.io/blog/quelle-dommage/</id>
        
        <content type="html" xml:base="https://mort.io/blog/quelle-dommage/">&lt;blockquote&gt;
&lt;p&gt;Ed: this tool is perhaps less relevant now that both
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&#x2F;&quot;&gt;Mirage&lt;&#x2F;a&gt; and &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;ocaml.org&#x2F;opam&#x2F;&quot;&gt;OPAM&lt;&#x2F;a&gt; have moved
on. But perhaps it’ll be resurrected one day so here it is.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Largely because I wanted to make a feeble attempt at a French pun,
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;dommage&#x2F;&quot;&gt;&lt;code&gt;dommage&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; is a tool for
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docker.com&#x2F;&quot;&gt;Docker&lt;&#x2F;a&gt; containerising Mirage unikernels. From the
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;dommage&quot;&gt;README&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;dommage-dockerised-mirage&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#dommage-dockerised-mirage&quot; aria-label=&quot;Anchor link for: dommage-dockerised-mirage&quot;&gt;Dommage, Dockerised Mirage&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;code&gt;dommage&lt;&#x2F;code&gt; is a shell script that wraps the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&quot;&gt;Mirage&lt;&#x2F;a&gt; CLI to make use of Docker
containers meaning that:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;you can cache the OPAM build artefacts in the container image, speeding up
local builds;&lt;&#x2F;li&gt;
&lt;li&gt;you can re-use the build container image in Travis builds by publishing it,
speeding those up considerably; and&lt;&#x2F;li&gt;
&lt;li&gt;you can easily test build &lt;code&gt;-t xen&lt;&#x2F;code&gt; targets on OSX.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;I’ve tried to minimise interference with the normal operation of &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&quot;&gt;Mirage&lt;&#x2F;a&gt; CLI so
simply replacing &lt;code&gt;mirage&lt;&#x2F;code&gt; with &lt;code&gt;dommage&lt;&#x2F;code&gt; is supposed to work. To publish the
resulting container image, &lt;code&gt;dommage publish &amp;lt;image&amp;gt;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Issues, comments, suggestions and bug fixes all welcome!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;operation&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#operation&quot; aria-label=&quot;Anchor link for: operation&quot;&gt;Operation&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;To start, &lt;code&gt;dommage&lt;&#x2F;code&gt; provides a few management commands to manipulate the build
container:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;dommage init BASE-IMAGE&lt;&#x2F;code&gt; creates a new container, based off &lt;code&gt;BASE-IMAGE&lt;&#x2F;code&gt;
from the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;hub.docker.com&quot;&gt;Docker Hub&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;dommage publish IMAGE&lt;&#x2F;code&gt; commits the current container and pushes it to
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;hub.docker.com&quot;&gt;Docker Hub&lt;&#x2F;a&gt; as &lt;code&gt;IMAGE&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;dommage destroy&lt;&#x2F;code&gt; stops and removes the current build container&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;dommage run ...&lt;&#x2F;code&gt; executes a command inside the current build container&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;In addition, it wraps the main &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&quot;&gt;Mirage&lt;&#x2F;a&gt; CLI commands:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;dommage configure ...&lt;&#x2F;code&gt; runs &lt;code&gt;mirage configure ... &amp;amp;&amp;amp; make depends&lt;&#x2F;code&gt; inside
the build contianer&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;dommage build ...&lt;&#x2F;code&gt; runs &lt;code&gt;mirage build ...&lt;&#x2F;code&gt; inside the build container&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;dommage clean ...&lt;&#x2F;code&gt; runs &lt;code&gt;mirage clean ...&lt;&#x2F;code&gt; inside the build container&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Spring Loading Karabiner in the Autumn</title>
        <published>2017-10-30T00:00:00+00:00</published>
        <updated>2017-10-30T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/mess-with-my-keyboard/"/>
        <id>https://mort.io/blog/mess-with-my-keyboard/</id>
        
        <content type="html" xml:base="https://mort.io/blog/mess-with-my-keyboard/">&lt;p&gt;I recently took the plunge and upgraded my OS X. Not to vN of &lt;em&gt;Sierra&lt;&#x2F;em&gt; as I’d
hoped, but to v0 &lt;em&gt;High Sierra&lt;&#x2F;em&gt;– the perils of waiting too long…&lt;&#x2F;p&gt;
&lt;p&gt;Unfortunately, this toasted&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-1-1&quot;&gt;&lt;a href=&quot;#fn-1&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt; my carefully curated keyboard remappings as
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;pqrs.org&#x2F;osx&#x2F;karabiner&#x2F;&quot;&gt;Karabiner&lt;&#x2F;a&gt; used a kernel extension, for which everything changed. All was not
lost however, as the rewrite to support Sierra&#x2F;High Sierra was well underway. Or
so I thought until I realised that the configuration file had changed from XML
to JSON. And so my configuration journey began. (But it all ends well, so that’s
good.)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;controlling-the-config&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#controlling-the-config&quot; aria-label=&quot;Anchor link for: controlling-the-config&quot;&gt;Controlling the config&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;The first thing was to get the new configuration matters under control. I did
this per the documentation, symlinking the config subdirectory from my
&lt;code&gt;rc-files&lt;&#x2F;code&gt; repo:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ~&#x2F;.config&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;mv&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; karabiner&#x2F; ~&#x2F;rc-files&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;ln&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ~&#x2F;rc-files&#x2F;karabiner&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;internal-apple-keyboard&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#internal-apple-keyboard&quot; aria-label=&quot;Anchor link for: internal-apple-keyboard&quot;&gt;Internal Apple keyboard&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;In the interests of keeping all configuration in one place (but see below), I
decided to do this via a set of &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-karabiner&#x2F;blob&#x2F;master&#x2F;assets&#x2F;complex_modifications&#x2F;mort-keymap.json&quot;&gt;complex modifications&lt;&#x2F;a&gt;. In summary this
meant:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;swap &lt;code&gt;(caps_lock)&lt;&#x2F;code&gt; and &lt;code&gt;(control)&lt;&#x2F;code&gt;:&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;json&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;description&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;mort: caps_lock -&amp;gt; ctrl&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;manipulators&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;caps_lock&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;optional&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;any&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;left_control&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;swap &lt;code&gt;&quot;&lt;&#x2F;code&gt; (glyph &lt;code&gt;S-&#x27;&lt;&#x2F;code&gt;) with &lt;code&gt;@&lt;&#x2F;code&gt; (glyph &lt;code&gt;S-2&lt;&#x2F;code&gt;):&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;json&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;description&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;mort: S-&amp;#39; (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;) &amp;lt;-&amp;gt; S-2 (@)&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;manipulators&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;quote&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;mandatory&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;2&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;2&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;mandatory&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;quote&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;map &lt;code&gt;(backslash)&lt;&#x2F;code&gt; (glyph &lt;code&gt;\&lt;&#x2F;code&gt;) to &lt;code&gt;#&lt;&#x2F;code&gt;, and &lt;code&gt;S-\&lt;&#x2F;code&gt; (glyph &lt;code&gt;|&lt;&#x2F;code&gt;) to &lt;code&gt;~&lt;&#x2F;code&gt;:&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;json&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;description&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;mort: &lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; -&amp;gt; #; S-&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; (|) -&amp;gt; ~&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;manipulators&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;backslash&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;3&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;option&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;backslash&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;mandatory&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;grave_accent_and_tilde&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;    }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;map &lt;code&gt;(non_us_backslash)&lt;&#x2F;code&gt; (glyph &lt;code&gt;§&lt;&#x2F;code&gt;) to &lt;code&gt;`&lt;&#x2F;code&gt; and &lt;code&gt;S-(non_us_backslash)&lt;&#x2F;code&gt;
(glyph &lt;code&gt;±&lt;&#x2F;code&gt;) to &lt;code&gt;€&lt;&#x2F;code&gt;, and then patch things up so that the usual window
switching works (using &lt;code&gt;(command)-`&lt;&#x2F;code&gt;):&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;json&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;description&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;mort: § -&amp;gt; `; ± (S-§) -&amp;gt; €&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;manipulators&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;non_us_backslash&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;grave_accent_and_tilde&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;non_us_backslash&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;mandatory&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;2&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;option&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;non_us_backslash&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;mandatory&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;command&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;grave_accent_and_tilde&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;command&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;non_us_backslash&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;mandatory&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;command&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;grave_accent_and_tilde&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;command&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;finally, map &lt;code&gt;`&lt;&#x2F;code&gt; to &lt;code&gt;\&lt;&#x2F;code&gt; and &lt;code&gt;S-`&lt;&#x2F;code&gt; to &lt;code&gt;|&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;json&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;description&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;mort: ` -&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;; S-` (~) -&amp;gt; |&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;      &amp;quot;manipulators&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;grave_accent_and_tilde&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;backslash&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;grave_accent_and_tilde&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;mandatory&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;backslash&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;iterm2&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#iterm2&quot; aria-label=&quot;Anchor link for: iterm2&quot;&gt;iTerm2&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Unfortunately for me, iTerm2 then gets a bit confused as it wants to leave
&lt;code&gt;(command)&lt;&#x2F;code&gt; alone, only allowing mapping of &lt;code&gt;(option)&lt;&#x2F;code&gt; to &lt;code&gt;(meta)&lt;&#x2F;code&gt; (or, in fact,
&lt;code&gt;(esc+)&lt;&#x2F;code&gt;). In the past I swapped &lt;code&gt;(left_command)&lt;&#x2F;code&gt; and &lt;code&gt;(left_option)&lt;&#x2F;code&gt; to make
the usual shell (&lt;code&gt;bash&lt;&#x2F;code&gt;) CLI editing combinations (roughly, &lt;code&gt;emacs&lt;&#x2F;code&gt;) work.  That
wasn’t ideal though as I then had to fix up the window cycling commands
(&lt;code&gt;(command)-` &lt;&#x2F;code&gt; and so on). Fortunately, the fix this time seems easier: just
configure the two tricky mappings (involving generating a keypress modified with
&lt;code&gt;(option)&lt;&#x2F;code&gt;) to be interpreted by iTerm2 to just send the appropriate text
through. Again, I did this in the UI (Preferences &amp;gt; Profiles &amp;gt; Keys) but the
resulting configuration change is also straightforward:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;			&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;Keyboard Map&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;			&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;dict&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;				&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;0x32-0x80000&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;				&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;dict&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;					&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;Action&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;					&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;integer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;12&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;integer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;					&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;Text&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;					&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;€&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;				&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;dict&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;				&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;0x33-0x80000&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;				&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;dict&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;					&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;Action&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;					&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;integer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;12&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;integer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;					&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;Text&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;					&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;#&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;string&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;				&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;dict&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;			&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;dict&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;microsoft-digital-media-keyboard&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#microsoft-digital-media-keyboard&quot; aria-label=&quot;Anchor link for: microsoft-digital-media-keyboard&quot;&gt;Microsoft Digital Media keyboard&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Examining the key codes using the Karabiner Event-Viewer, it seemed that the
first thing to do was to swap &lt;code&gt;(grave_accent_and_tilde)&lt;&#x2F;code&gt; (glyph &lt;code&gt;`&lt;&#x2F;code&gt;) and
&lt;code&gt;(non_us_backslash)&lt;&#x2F;code&gt; (slightly confusingly, glyph &lt;code&gt;\&lt;&#x2F;code&gt; on my keyboard). I started
out trying to do this as a complex modification so that all the remappings were
in &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-karabiner&#x2F;blob&#x2F;master&#x2F;assets&#x2F;complex_modifications&#x2F;mort-keymap.json&quot;&gt;one file&lt;&#x2F;a&gt;, but couldn’t: I couldn’t figure out how to control the
application order of mappings in that file. However, simple modifications are
applied before complex modifications, and this &lt;em&gt;is&lt;&#x2F;em&gt; a simple modification as
it’s a direct swap, so I just used the UI and did it there. For the sake of
completeness, the resulting modification to &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-karabiner&#x2F;blob&#x2F;master&#x2F;karabiner.json&quot;&gt;&lt;code&gt;karabiner.json&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; is:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;json&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;{&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;    &amp;quot;profiles&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;devices&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                    &amp;quot;disable_built_in_keyboard_if_exists&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; false&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                    &amp;quot;fn_function_keys&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [],&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                    &amp;quot;identifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                        &amp;quot;is_keyboard&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; true&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                        &amp;quot;is_pointing_device&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; false&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                        &amp;quot;product_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 180&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                        &amp;quot;vendor_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1118&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                    },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                    &amp;quot;ignore&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; false&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                    &amp;quot;simple_modifications&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                            &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                                &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;grave_accent_and_tilde&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                            },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                            &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                                &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;non_us_backslash&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                            &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                                &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;non_us_backslash&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                            },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                            &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;                                &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;grave_accent_and_tilde&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                        }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                    ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;                }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            ],&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The next step was to patch up the complex modifications. Once I realised that
the event viewer was claiming that the key with glyph &lt;code&gt;#&lt;&#x2F;code&gt; was emitting
&lt;code&gt;(backslash)&lt;&#x2F;code&gt; while it was, in fact, emitting &lt;code&gt;(non_us_pound)&lt;&#x2F;code&gt;, this was fairly
straightforward:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;swap &lt;code&gt;(command)&lt;&#x2F;code&gt; (glyph &lt;code&gt;Alt&lt;&#x2F;code&gt;) and &lt;code&gt;(option)&lt;&#x2F;code&gt; (glyph &lt;code&gt;Start&lt;&#x2F;code&gt;):&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;json&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;conditions&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;device_if&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;identifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;vendor_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1118&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;quot;product_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 180&lt;&#x2F;span&gt;&lt;span&gt;}]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ],&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;left_option&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;optional&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;any&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;left_command&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;conditions&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;device_if&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;identifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;vendor_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1118&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;quot;product_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 180&lt;&#x2F;span&gt;&lt;span&gt;}]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ],&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;left_command&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;optional&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;any&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;left_option&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;add coverage of &lt;code&gt;(non_us_pound)&lt;&#x2F;code&gt; to the rule that remaps &lt;code&gt;\&lt;&#x2F;code&gt; to &lt;code&gt;#&lt;&#x2F;code&gt;:&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;json&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;conditions&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;device_if&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;identifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;vendor_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1118&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;quot;product_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 180&lt;&#x2F;span&gt;&lt;span&gt;}]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ],&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;non_us_pound&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;3&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;option&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;conditions&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;device_if&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;identifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [{&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;vendor_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1118&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;quot;product_id&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 180&lt;&#x2F;span&gt;&lt;span&gt;}]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ],&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;type&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;basic&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;from&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;non_us_pound&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;            &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: {&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;quot;mandatory&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          },&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;          &amp;quot;to&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            {&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;key_code&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;grave_accent_and_tilde&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;              &amp;quot;modifiers&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;: [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;shift&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;          ]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;        }&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…and that’s it. My keyboard is, once again, my castle.&lt;&#x2F;p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-1&quot;&gt;
&lt;p&gt;To be honest, I suspect even the &lt;em&gt;Sierra&lt;&#x2F;em&gt; upgrade would’ve done this. &lt;a href=&quot;#fr-1-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Platforms, Packaging, Progress— Addendum</title>
        <published>2017-09-01T00:00:00+00:00</published>
        <updated>2017-09-01T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/topkg-addendum/"/>
        <id>https://mort.io/blog/topkg-addendum/</id>
        
        <content type="html" xml:base="https://mort.io/blog/topkg-addendum/">&lt;p&gt;This is a short addendum to my &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;2017&#x2F;08&#x2F;28&#x2F;past-present-future&#x2F;&quot;&gt;post of a couple of days
ago&lt;&#x2F;a&gt; caused by my
carelessness in writing the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;13a9a7f5b8f2e0be4c2b55941a00a885df202cf8&#x2F;ocal.opam#L16-L22&quot;&gt;OPAM
file&lt;&#x2F;a&gt;.
Careful readers will observe the lack of any dependency on &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pqwy&#x2F;notty&#x2F;&quot;&gt;notty&lt;&#x2F;a&gt;. Read on for
what happened next…&lt;&#x2F;p&gt;
&lt;p&gt;The result of this carelessness was that everything worked just fine locally,
but &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ocaml&#x2F;opam-repository&#x2F;pull&#x2F;10176&quot;&gt;my PR to the OPAM package
repository&lt;&#x2F;a&gt; failed. Cue
much wailing and gnashing of teeth.&lt;&#x2F;p&gt;
&lt;p&gt;However, thanks to a moment’s assistance
from &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;erratique.ch&#x2F;contact.en&quot;&gt;Daniel Bünzli&lt;&#x2F;a&gt;, this was easy to fix:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; git checkout&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 0.2.0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;       # checkout the relevant release version tag&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; topkg opam pkg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;           # create the release metadata&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; e _build&#x2F;ocal.0.2.0&#x2F;opam&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # invoke editor so I can add the missing dep&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; topkg opam submit&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;        # submit the updated OPAM metadata, updating the PR&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Submitting&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; _build&#x2F;ocal.0.2.0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;[ocal-0.2.0.tbz] http:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;releases&#x2F;download&#x2F;0.2.0&#x2F;ocal-0.2.0.tbz downloaded&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Updating&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; existing pull-request&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; #10176&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Pull-requested:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; https:&#x2F;&#x2F;github.com&#x2F;ocaml&#x2F;opam-repository&#x2F;pull&#x2F;10176&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For me, the main thing to note here is that the OPAM metadata in the repo at the
commit ref tagged for release doesn’t match that which OPAM uses to install the
release. But as &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;seb.mondet.org&#x2F;&quot;&gt;Sebastien Mondet&lt;&#x2F;a&gt; pointed out to me,
this is neither relevant nor (in the long term) likely, as (e.g.) version
constraints on dependencies may need to be added to old versions of dependent
packages to keep them working. (Though I did add and commit the dependency to
&lt;code&gt;master&lt;&#x2F;code&gt;, naturally.)&lt;&#x2F;p&gt;
&lt;p&gt;So, all-in-all, an easy fix to a common problem. Which is the way it should
be…&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Platforms, Packaging, Progress</title>
        <published>2017-08-28T00:00:00+00:00</published>
        <updated>2017-08-28T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/past-present-future/"/>
        <id>https://mort.io/blog/past-present-future/</id>
        
        <content type="html" xml:base="https://mort.io/blog/past-present-future/">&lt;p&gt;I recently decided to refresh and update my &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;&quot;&gt;ocal&lt;&#x2F;a&gt; package,&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-1-1&quot;&gt;&lt;a href=&quot;#fn-1&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt; primarily to
port it to use the excellent &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pqwy&#x2F;notty&#x2F;&quot;&gt;notty&lt;&#x2F;a&gt; before adding support for indicating
week-of-year. At the same time, I took the opportunity to update the build
infrastructure now that the OCaml world has some shiny new packaging and build
tools to go with &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ocaml&#x2F;opam&#x2F;&quot;&gt;OPAM&lt;&#x2F;a&gt;, namely &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dbuenzli&#x2F;topkg&#x2F;&quot;&gt;&lt;code&gt;topkg&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; and &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;janestreet&#x2F;jbuilder&#x2F;&quot;&gt;&lt;code&gt;jbuilder&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. So, starting
from &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;github.com&#x2F;djs55&#x2F;&quot;&gt;Dave Scott’s&lt;&#x2F;a&gt; &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&#x2F;wiki&#x2F;packaging&quot;&gt;wiki entry&lt;&#x2F;a&gt; about how to package &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&#x2F;&quot;&gt;Mirage&lt;&#x2F;a&gt; libraries,
here’s what I had to do…&lt;&#x2F;p&gt;
&lt;h2 id=&quot;remove-oasis-remnants&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#remove-oasis-remnants&quot; aria-label=&quot;Anchor link for: remove-oasis-remnants&quot;&gt;Remove Oasis remnants&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; rm _oasis setup.ml Makefile&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;*&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; _tags myocamlbuild.ml .merlin&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;mv&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ocal.opam&#x2F;opam o&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; git&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; rm&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -rf&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ocal.opam&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; mv&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; o ocal.opam&lt;&#x2F;span&gt;&lt;span&gt; &amp;amp;&amp;amp;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; git&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; add ocal.opam&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .gitignore&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;lt;&amp;lt;&lt;&#x2F;span&gt;&lt;span&gt;_EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;_build&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;*.merlin&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;*.install&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;_EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Although we’re removing the &lt;code&gt;ocal.opam&#x2F;descr&lt;&#x2F;code&gt; file, we’re not going to lose the
content: we’re going to let &lt;code&gt;topkg opam pkg&lt;&#x2F;code&gt; use its default &lt;code&gt;--readme&lt;&#x2F;code&gt; option
to extract the relevant info from the first marked up section of the
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;0.2.0&#x2F;README.md&quot;&gt;&lt;code&gt;README.md&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;markdown&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;font-weight: bold;&quot;&gt;# ocal — An improved Unix &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;`cal`&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;font-weight: bold;&quot;&gt; utility&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;%%VERSION%%&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;A replacement for the standard Unix &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;`cal`&lt;&#x2F;span&gt;&lt;span&gt; utility. Partly because I could,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;partly because I&amp;#39;d become too irritated with its command line interface.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We also remove but don’t lose the functionality of the &lt;code&gt;.merlin&lt;&#x2F;code&gt; and OPAM
&lt;code&gt;ocal.install&lt;&#x2F;code&gt; files, as &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;janestreet&#x2F;jbuilder&#x2F;&quot;&gt;jbuilder&lt;&#x2F;a&gt; will generate them for us.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;create-src-jbuild-file&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#create-src-jbuild-file&quot; aria-label=&quot;Anchor link for: create-src-jbuild-file&quot;&gt;Create &lt;code&gt;src&#x2F;jbuild&lt;&#x2F;code&gt; file&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; src&#x2F;jbuild&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;lt;&amp;lt;&lt;&#x2F;span&gt;&lt;span&gt;_EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;(jbuild_version 1)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;(executable&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ((public_name ocal)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  (package     ocal)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  (name        main)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  (libraries&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;   (&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    astring&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    calendar&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    cmdliner&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    notty&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    notty.unix&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    ))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  (flags (:standard -w &amp;quot;A-44-48-52&amp;quot; -safe-string))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  ))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;_EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This corresponds to the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;releases&#x2F;tag&#x2F;0.2.0&quot;&gt;0.2.0&lt;&#x2F;a&gt;
release of &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;&quot;&gt;ocal&lt;&#x2F;a&gt;. Note that the &lt;code&gt;name&lt;&#x2F;code&gt; parameter refers to the module that
contains the entrypoint for the executable, and that we turn on all warnings
(&lt;code&gt;A&lt;&#x2F;code&gt;) except for three that we wish to ignore:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;44&lt;&#x2F;code&gt;: Open statement shadows an already defined identifier.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;48&lt;&#x2F;code&gt;: Implicit elimination of optional arguments.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;52&lt;&#x2F;code&gt;: (see 8.5.1) Fragile constant pattern.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;After I did some tidying up of the code to deal with the newly imposed warnings,
&lt;code&gt;make&lt;&#x2F;code&gt; and &lt;code&gt;make install&lt;&#x2F;code&gt; satisfactorily (and quickly!) used &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;janestreet&#x2F;jbuilder&#x2F;&quot;&gt;jbuilder&lt;&#x2F;a&gt; to
build and install the executable as &lt;code&gt;~&#x2F;.opam&#x2F;system&#x2F;bin&#x2F;ocal&lt;&#x2F;code&gt; (thanks to the
&lt;code&gt;public_name&lt;&#x2F;code&gt; stanza in the &lt;code&gt;src&#x2F;jbuild&lt;&#x2F;code&gt; file, above). &lt;code&gt;make uninstall&lt;&#x2F;code&gt; then
caused &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;janestreet&#x2F;jbuilder&#x2F;&quot;&gt;jbuilder&lt;&#x2F;a&gt; to remove it, before I &lt;code&gt;opam&lt;&#x2F;code&gt; pinned it and then reinstall
through &lt;code&gt;opam&lt;&#x2F;code&gt; to check that workflow worked as well:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;opam&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; remove ocal&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;opam&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; pin add&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -yn --dev-repo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ocal .&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;opam&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install ocal&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;create-the-topkg-skeletons&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#create-the-topkg-skeletons&quot; aria-label=&quot;Anchor link for: create-the-topkg-skeletons&quot;&gt;Create the &lt;code&gt;topkg&lt;&#x2F;code&gt; skeletons&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Having refreshed the basic build infrastructure, next it’s time to update the
packaging workflow. For a simple library we could use the automatic
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;janestreet&#x2F;jbuilder&#x2F;&quot;&gt;jbuilder&lt;&#x2F;a&gt;&#x2F;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dbuenzli&#x2F;topkg&#x2F;&quot;&gt;topkg&lt;&#x2F;a&gt; plugin per the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&#x2F;wiki&#x2F;packaging&quot;&gt;wiki entry&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;mkdir&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; pkg&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; pkg&#x2F;pkg.ml&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;lt;&amp;lt;&lt;&#x2F;span&gt;&lt;span&gt;_EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;#!&#x2F;usr&#x2F;bin&#x2F;env ocaml&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;#use &amp;quot;topfind&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;#require &amp;quot;topkg-jbuilder.auto&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;_EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;However, this isn’t a library so we don’t have documentation to build so we
don’t bother with the &lt;code&gt;odoc&lt;&#x2F;code&gt; skeleton. As a result we also need to customise
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;0.2.0&#x2F;pkg&#x2F;pkg.ml&quot;&gt;&lt;code&gt;pkg&#x2F;pkg.ml&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; so as to stop &lt;code&gt;topkg publish&lt;&#x2F;code&gt; failing when it can’t build docs:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;ocaml&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;#!&#x2F;usr&#x2F;bin&#x2F;env ocaml&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;#&lt;&#x2F;span&gt;&lt;span&gt;use &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;topfind&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;#require &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;topkg-jbuilder&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt;open&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; Topkg&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; publish&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;  Pkg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;publish&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; ~&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;artefacts&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span&gt;`&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt;Distrib] ()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;let&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt; ()&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;  Topkg_jbuilder&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;.&lt;&#x2F;span&gt;&lt;span&gt;describe&lt;&#x2F;span&gt;&lt;span style=&quot;color: #DC322F;&quot;&gt; ~&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;publish&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;&quot;&gt; ()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;prepare-a-release&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#prepare-a-release&quot; aria-label=&quot;Anchor link for: prepare-a-release&quot;&gt;Prepare a release&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Finally, we follow the standard &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dbuenzli&#x2F;topkg&#x2F;&quot;&gt;topkg&lt;&#x2F;a&gt; workflow to prepare a release. First,
add an entry to &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;0.2.0&#x2F;CHANGES.md&quot;&gt;&lt;code&gt;CHANGES.md&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; with the correct formatting and commit the
result, and then:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;make&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;distrib&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	[ -x &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$$&lt;&#x2F;span&gt;&lt;span&gt;(opam config var root)&#x2F;plugins&#x2F;opam-publish&#x2F;repos&#x2F;ocal ] || &lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	  opam-publish repo add ocal mor1&#x2F;ocal&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	topkg tag&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	topkg distrib&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…which creates tokens for accessing the GitHub repo for this project (if they
don’t already exist), creates a release tag based on entries in &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;0.2.0&#x2F;CHANGES.md&quot;&gt;&lt;code&gt;CHANGES.md&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;,
and then creates the release tarballs (without the edits to &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;0.2.0&#x2F;pkg&#x2F;pkg.ml&quot;&gt;&lt;code&gt;pkg&#x2F;pkg.ml&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; this
would also build the docs, but we have none).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;publish-a-release&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#publish-a-release&quot; aria-label=&quot;Anchor link for: publish-a-release&quot;&gt;Publish a release&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Finally, we publish the release to GitHub and issue a pull request to
the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ocaml&#x2F;opam&#x2F;&quot;&gt;OPAM repository&lt;&#x2F;a&gt; to add the new release into OPAM after linting and
tests have passed.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;make&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;publish&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	topkg publish&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	topkg opam pkg&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;	topkg opam submit&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Given that this repo has only a single package, we could in fact simply issue&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;plain&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;topkg tag &amp;amp;&amp;amp; topkg bistro&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Also, as an alternative to customising the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;0.2.0&#x2F;pkg&#x2F;pkg.ml&quot;&gt;&lt;code&gt;pkg&#x2F;pkg.ml&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; as indicated above, we
could simply remember to indicate the appropriate customisation on the command
line:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;plain&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;topkg publish distrib&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…but &lt;code&gt;topkg bistro&lt;&#x2F;code&gt; wouldn’t then work.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#conclusion&quot; aria-label=&quot;Anchor link for: conclusion&quot;&gt;Conclusion&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;So that’s it: a simple executable distribution taken from old-school &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;oasis.forge.ocamlcore.org&#x2F;&quot;&gt;Oasis&lt;&#x2F;a&gt; and
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;ocaml.org&#x2F;learn&#x2F;tutorials&#x2F;ocamlbuild&#x2F;&quot;&gt;OCamlBuild&lt;&#x2F;a&gt; infrastructure to shiny new modern &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;janestreet&#x2F;jbuilder&#x2F;&quot;&gt;jbuilder&lt;&#x2F;a&gt; and &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dbuenzli&#x2F;topkg&#x2F;&quot;&gt;topkg&lt;&#x2F;a&gt;. The new
scheme seems to me to be an improvement: faster build times, simpler (to my
eyes) metadata, autogeneration of more of the repeated metadata (&lt;code&gt;.merlin&lt;&#x2F;code&gt; etc),
and a reasonably simple &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;ocal&#x2F;blob&#x2F;0.2.0&#x2F;Makefile&quot;&gt;&lt;code&gt;Makefile&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; that I actually think I understand.
Definitely progress :)&lt;&#x2F;p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-1&quot;&gt;
&lt;p&gt;A somewhat over-featured replacement for the standard UNIX &lt;code&gt;cal&lt;&#x2F;code&gt; utility,
because I got irritated by its American-centricity and my
initial &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;python-scripts&#x2F;blob&#x2F;master&#x2F;cal.py&quot;&gt;Python replacement&lt;&#x2F;a&gt; was just too slow… &lt;a href=&quot;#fr-1-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>ARMing LinuxKit</title>
        <published>2017-06-02T00:00:00+00:00</published>
        <updated>2017-06-02T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/arming-linuxkit/"/>
        <id>https://mort.io/blog/arming-linuxkit/</id>
        
        <content type="html" xml:base="https://mort.io/blog/arming-linuxkit/">&lt;p&gt;As some may know, following the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;unikernels.com&quot;&gt;Unikernel Systems&lt;&#x2F;a&gt; acquisition, I
currently do contract work for &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docker.com&quot;&gt;Docker Inc.&lt;&#x2F;a&gt; in addition to my day job
here at the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.cl.cam.ac.uk&quot;&gt;Cambridge University Computer Laboratory&lt;&#x2F;a&gt;. Recently this has
centred on &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;linuxkit&#x2F;linuxkit&quot;&gt;LinuxKit&lt;&#x2F;a&gt;, “&lt;em&gt;A toolkit for building secure, portable and lean
operating systems for containers&lt;&#x2F;em&gt;” and, specifically, enabling ARM64 support.
I’m pleased to say that a basic proof-of-concept is now complete, and we’re
working towards getting support merged upstream.&lt;&#x2F;p&gt;
&lt;p&gt;The proof-of-concept was developed using the great ARM64 support provided
by &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;packet.net&quot;&gt;&lt;code&gt;packet.net&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, on one of their &lt;code&gt;type 2A&lt;&#x2F;code&gt; boxes.&lt;&#x2F;p&gt;
&lt;p&gt;If you fancy trying it out, then hopefully the following instructions will be of
use – or just bug me on the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;slack.packet.net&#x2F;&quot;&gt;&lt;code&gt;packet.net&lt;&#x2F;code&gt; Slack&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;building&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#building&quot; aria-label=&quot;Anchor link for: building&quot;&gt;Building&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Start by getting an ARM64 box setup. If you have one to hand, great! If not, you
could head over to &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;packet.net&quot;&gt;packet.net&lt;&#x2F;a&gt; and create type 2A Ubuntu box to use as a build
environment.&lt;&#x2F;p&gt;
&lt;p&gt;Then clone the source, either &lt;code&gt;git clone&lt;&#x2F;code&gt; &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;linuxkit&#x2F;tree&#x2F;project-arm64&quot;&gt;my dev branch&lt;&#x2F;a&gt;, or
see &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;linuxkit&#x2F;linuxkit&#x2F;pull&#x2F;1654&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;linuxkit&#x2F;linuxkit&#x2F;pull&#x2F;1654&lt;&#x2F;a&gt; for the open PR which may
be a bit more stable.&lt;&#x2F;p&gt;
&lt;p&gt;The essence of it then is to build the containers based off &lt;code&gt;aarch64&#x2F;alpine&lt;&#x2F;code&gt;,
along with an ARM64 version of the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;moby&#x2F;moby&quot;&gt;&lt;code&gt;moby&lt;&#x2F;code&gt; CLI&lt;&#x2F;a&gt; if needed. Specifying the
container images you just built in your &lt;code&gt;moby.yml&lt;&#x2F;code&gt; file will then cause &lt;code&gt;moby&lt;&#x2F;code&gt;
to assemble things that should boot on ARM64.&lt;&#x2F;p&gt;
&lt;p&gt;The output should be a gzipped kernel, currently slightly misleadingly named
&lt;code&gt;bzImage&lt;&#x2F;code&gt; as well as a suitable &lt;code&gt;initrd&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;booting&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#booting&quot; aria-label=&quot;Anchor link for: booting&quot;&gt;Booting&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Setup another ARM64 box on which to boot the results. You could setup a
type 2A &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;packet.net&quot;&gt;packet.net&lt;&#x2F;a&gt; box once more, but this  time set it to &lt;em&gt;custom OS&lt;&#x2F;em&gt; and
&lt;em&gt;iPXE boot&lt;&#x2F;em&gt;. For the iPXE boot URL, give a URL pointing to a suitable boot
file. I use:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;#!ipxe&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; base-url URL-TO-DIRECTORY-HOLDING-IMAGES&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;set&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; kernel-params ip=dhcp nomodeset ro serial console=ttyAMA0,115200 earlycon earlyprintk=serial,keep initrd=arm64-initrd.img&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;initrd&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; ${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;base-url&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;arm64-initrd.img&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;imgstat&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;boot&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; ${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;base-url&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;}&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&#x2F;arm64-bzImage&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; ${&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;kernel-params&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Note that, currently at least, the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;packet.net&quot;&gt;packet.net&lt;&#x2F;a&gt; iPXE boot only occurs on the
first boot as it is assumed that the iPXE boot will install a working image to
the local disk. Thus, if it doesn’t work first time, get an SOS console and
break in by hitting &lt;code&gt;^B&lt;&#x2F;code&gt; at the appropriate moment, before issuing &lt;code&gt;chain URL&lt;&#x2F;code&gt;
where &lt;code&gt;URL&lt;&#x2F;code&gt; points to your iPXE boot file.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#conclusion&quot; aria-label=&quot;Anchor link for: conclusion&quot;&gt;Conclusion&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;This just does the barest minimum for now – I did say it was a
proof-of-concept… :) Work is currently ongoing to upstream this rather than
developing this PoC further, but if anyone has a particular interest or would
like to provide patches to, e.g., support network devices on &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;packet.net&quot;&gt;packet.net&lt;&#x2F;a&gt;,
please &lt;a href=&quot;mailto:mort@cantab.net&quot;&gt;get in touch&lt;&#x2F;a&gt;, file an issue or send a pull
request!&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Lab GitLab</title>
        <published>2017-04-19T00:00:00+00:00</published>
        <updated>2017-04-19T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/lab-gitlab/"/>
        <id>https://mort.io/blog/lab-gitlab/</id>
        
        <content type="html" xml:base="https://mort.io/blog/lab-gitlab/">&lt;p&gt;Recently had cause to do this as part of the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;www.cl.cam.ac.uk&#x2F;research&#x2F;srg&#x2F;&quot;&gt;SRG’s&lt;&#x2F;a&gt; and &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;ocamllabs.io&#x2F;&quot;&gt;OCaml Labs&lt;&#x2F;a&gt;
infrastructure. Thought it might be useful to make some notes, so here they are!
Assuming your local &lt;code&gt;sys-admin&lt;&#x2F;code&gt; has kindly created you a suitable VM running
Ubuntu with login credentials, etc, read on…&lt;&#x2F;p&gt;
&lt;p&gt;Note that several commands that follow must be run as &lt;code&gt;root&lt;&#x2F;code&gt;, via use of &lt;code&gt;sudo&lt;&#x2F;code&gt;
below. Given that, think twice before just cutting and pasting them in,
obviously… And I am not held responsible for anything either way!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;install-docker&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#install-docker&quot; aria-label=&quot;Anchor link for: install-docker&quot;&gt;Install Docker&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;On a new Ubuntu stretch&#x2F;sid (testing) VM:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; lsb_release&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -drc&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Description:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;	Ubuntu&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 16.04.1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; LTS&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Release:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;	16.04&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Codename:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;	xenial&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next, install up-to-date &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docker.com&#x2F;&quot;&gt;Docker&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt-get install apt-transport-https ca-certificates&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;apt-key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; adv&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --keyserver&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; hkp:&#x2F;&#x2F;p80.pool.sks-keyservers.net:80&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;        --recv-keys&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 58118E89F3A912897C070ADBF76221572C52609D&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; echo &amp;quot;deb https:&#x2F;&#x2F;apt.dockerproject.org&#x2F;repo debian-stretch main&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;     &amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;docker.list&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt-get update&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt-get install&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -y&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; docker-engine&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Tweak the &lt;code&gt;systemd&lt;&#x2F;code&gt; &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docker.com&#x2F;&quot;&gt;Docker&lt;&#x2F;a&gt; configuration by adding a fragment to point
all &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docker.com&#x2F;&quot;&gt;Docker&lt;&#x2F;a&gt; to the &lt;code&gt;&#x2F;data&lt;&#x2F;code&gt; partition, lest the root partition &lt;code&gt;&#x2F;&lt;&#x2F;code&gt; fill:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service.d&#x2F;data-disk.conf&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; &amp;lt;&amp;lt;&lt;&#x2F;span&gt;&lt;span&gt;EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;[Service]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;ExecStart=&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;ExecStart=&#x2F;usr&#x2F;bin&#x2F;dockerd -H fd:&#x2F;&#x2F; -g &#x2F;data&#x2F;docker&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;EOF&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then start the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docker.com&#x2F;&quot;&gt;Docker&lt;&#x2F;a&gt; daemon and run &lt;code&gt;hello-world&lt;&#x2F;code&gt; just to check all is
well:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; systemctl daemon-reload&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; service docker start&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, test the install by running &lt;code&gt;hello-world&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; docker run hello-world&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Hello&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; from Docker!&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;This&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; message shows that your installation appears to be working correctly.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;To&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; generate this message, Docker took the following steps:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; 1.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; The Docker client contacted the Docker daemon.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; 2.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; The Docker daemon pulled the &amp;quot;hello-world&amp;quot; image from the Docker Hub.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; 3.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; The Docker daemon created a new container from that image which runs the&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;    executable&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; that produces the output you are currently reading.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; 4.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; The Docker daemon streamed that output to the Docker client, which sent it&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;    to&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; your terminal.&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;To&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; try something more ambitious, you can run an Ubuntu container with:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; docker run&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -it&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ubuntu bash&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Share&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; images, automate workflows, and more with a free Docker Hub account:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; https:&#x2F;&#x2F;hub.docker.com&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;For&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; more examples and ideas, visit:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; https:&#x2F;&#x2F;docs.docker.com&#x2F;engine&#x2F;userguide&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;If appropriate, you may also wish to add yourself to the &lt;code&gt;docker&lt;&#x2F;code&gt; user group:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; usermod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -aG&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; docker&lt;&#x2F;span&gt;&lt;span&gt; $(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;whoami&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;gitlab&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#gitlab&quot; aria-label=&quot;Anchor link for: gitlab&quot;&gt;GitLab&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Assuming you have rights to run &lt;code&gt;docker&lt;&#x2F;code&gt;, install and run Gitlab-CE:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;S&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;128.232.xxx.yyy&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;gitlab.srg.cl.cam.ac.uk&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;docker&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; run&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --detach \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --hostname&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $H&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --publish&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $S&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;:443:443&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --publish&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $S&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;:80:80&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --publish&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; $S&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;:2222:22&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --name&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; gitlab&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --restart&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; always&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --volume&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;data&#x2F;gitlab&#x2F;config:&#x2F;etc&#x2F;gitlab&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --volume&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;data&#x2F;gitlab&#x2F;logs:&#x2F;var&#x2F;log&#x2F;gitlab&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --volume&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;data&#x2F;gitlab&#x2F;data:&#x2F;var&#x2F;opt&#x2F;gitlab&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --volume&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;data&#x2F;gitlab&#x2F;backups:&#x2F;var&#x2F;opt&#x2F;gitlab&#x2F;backups&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --volume&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;data&#x2F;gitlab&#x2F;sync:&#x2F;var&#x2F;opt&#x2F;gitlab&#x2F;sync&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;     --env&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; HOST_UID=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$$&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -u&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --env&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; HOST_GID=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$$&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;id&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -g&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;     mor1&#x2F;gitlab-ce-cron:latest&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…or use the &lt;code&gt;make start&lt;&#x2F;code&gt; target in the
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;dockerfiles&#x2F;blob&#x2F;master&#x2F;gitlab-ce-cron&#x2F;Makefile&quot;&gt;Makefile&lt;&#x2F;a&gt;
in the related &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;dockerfiles&#x2F;tree&#x2F;master&#x2F;gitlab-ce-cron&quot;&gt;GitHub
repo&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;tls-certificates&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#tls-certificates&quot; aria-label=&quot;Anchor link for: tls-certificates&quot;&gt;TLS Certificates&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Self-certified certificates:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;openssl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; req&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -nodes -newkey&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; rsa:2048&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -keyout&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; gitlab.srg.cl.cam.ac.uk.key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -out&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; gitlab.srg.cl.cam.ac.uk.csr&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ssl&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;chmod&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 600&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; *&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;openssl&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; x509&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -req -days&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1460&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -in&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; gitlab.srg.cl.cam.ac.uk.csr&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -signkey&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; gitlab.srg.cl.cam.ac.uk.key&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -out&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; gitlab.srg.cl.cam.ac.uk.crt&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;run-backups&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#run-backups&quot; aria-label=&quot;Anchor link for: run-backups&quot;&gt;Run Backups&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;backup&lt;&#x2F;code&gt; script to create backup tarballs and extract&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;sync&lt;&#x2F;code&gt; script to rsync extracted tarballs to filer&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;recovering-password&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#recovering-password&quot; aria-label=&quot;Anchor link for: recovering-password&quot;&gt;Recovering Password&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;To change the &lt;code&gt;root&lt;&#x2F;code&gt; password you need to use the Ruby-on-Rails console to
access the relevant object, modify it, and save it back:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;gitlab&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt;rails console production&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;irb&lt;&#x2F;span&gt;&lt;span&gt;(main):&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;001&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt; user &lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;= User&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;where&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;id:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1&lt;&#x2F;span&gt;&lt;span&gt;).&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;first&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;=&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; #&amp;lt;User id: 1, email: &amp;quot;admin@example.com&amp;quot;, created_at: &amp;quot;2016-11-16 22:57:21&amp;quot;, updated_at: &amp;quot;2016-12-05 23:42:50&amp;quot;, name: &amp;quot;Administrator&amp;quot;, admin: true, projects_limit: 10, skype: &amp;quot;&amp;quot;, linkedin: &amp;quot;&amp;quot;, twitter: &amp;quot;&amp;quot;, authentication_token: &amp;quot;secrettoken&amp;quot;, theme_id: 2, bio: nil, username: &amp;quot;root&amp;quot;, can_create_group: true, can_create_team: false, state: &amp;quot;active&amp;quot;, color_scheme_id: 1, password_expires_at: nil, created_by_id: nil, last_credential_check_at: nil, avatar: nil, hide_no_ssh_key: false, website_url: &amp;quot;&amp;quot;, notification_email: &amp;quot;admin@example.com&amp;quot;, hide_no_password: false, password_automatically_set: false, location: nil, encrypted_otp_secret: nil, encrypted_otp_secret_iv: nil, encrypted_otp_secret_salt: nil, otp_required_for_login: false, otp_backup_codes: nil, public_email: &amp;quot;&amp;quot;, dashboard: 0, project_view: 0, consumed_timestep: nil, layout: 0, hide_project_limit: false, otp_grace_period_started_at: nil, ldap_email: false, external: false, organization: nil&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;irb&lt;&#x2F;span&gt;&lt;span&gt;(main):&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;002&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt; user.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;password&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;secretpassword&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;=&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;secretpassword&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;irb&lt;&#x2F;span&gt;&lt;span&gt;(main):&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;003&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt; user.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;password_confirmation&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;secretpassword&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;=&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;secretpassword&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;irb&lt;&#x2F;span&gt;&lt;span&gt;(main):&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;004&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt; user.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;save!&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Enqueued&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; ActionMailer&lt;&#x2F;span&gt;&lt;span style=&quot;color: #6C71C4;&quot;&gt;::&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;DeliveryJob&lt;&#x2F;span&gt;&lt;span&gt; (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Job&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; ID:&lt;&#x2F;span&gt;&lt;span&gt; 5f74573d&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt;dfa2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;4778&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt;b365&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt;cbebd88e454e) to &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Sidekiq&lt;&#x2F;span&gt;&lt;span&gt;(mailers) with &lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;arguments:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;DeviseMailer&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;password_change&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;deliver_now&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; gid:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt;&lt;span&gt;gitlab&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;User&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;=&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; true&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;irb&lt;&#x2F;span&gt;&lt;span&gt;(main):&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;005&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;gitlab&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span&gt;ctl reconfigure&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;hook-up-to-github&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#hook-up-to-github&quot; aria-label=&quot;Anchor link for: hook-up-to-github&quot;&gt;Hook up to GitHub&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Per
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docs.gitlab.com&#x2F;ce&#x2F;integration&#x2F;omniauth.html#initial-omniauth-configuration&quot;&gt;https:&#x2F;&#x2F;docs.gitlab.com&#x2F;ce&#x2F;integration&#x2F;omniauth.html#initial-omniauth-configuration&lt;&#x2F;a&gt; and
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docs.gitlab.com&#x2F;ce&#x2F;integration&#x2F;github.html&quot;&gt;https:&#x2F;&#x2F;docs.gitlab.com&#x2F;ce&#x2F;integration&#x2F;github.html&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;p&gt;Edit via &lt;code&gt;sudo docker exec -it gitlab &#x2F;bin&#x2F;bash&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;root@gitlab:&#x2F;#&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; vi &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;gitlab_rails[&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;omniauth_enabled&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; true&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;gitlab_rails[&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;omniauth_allow_single_sign_on&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span&gt; [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;saml&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;github&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;gitlab_rails[&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;omniauth_block_auto_created_users&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;]&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; =&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; true&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;email&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#email&quot; aria-label=&quot;Anchor link for: email&quot;&gt;Email&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Use SMTP via &amp;lt;ppsw.cam.ac.uk&amp;gt;, for which the from address must have a valid &lt;code&gt;MX&lt;&#x2F;code&gt;
record &lt;strong&gt;and&lt;&#x2F;strong&gt; not be under &amp;lt;cam.ac.uk&amp;gt; per
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;help.uis.cam.ac.uk&#x2F;email-telephony-and-collaboration&#x2F;email&#x2F;technical&#x2F;sending&quot;&gt;http:&#x2F;&#x2F;help.uis.cam.ac.uk&#x2F;email-telephony-and-collaboration&#x2F;email&#x2F;technical&#x2F;sending&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Configuration can be tested via the console:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;Notify&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;test_email&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;your@email.address, &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;Hello World&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;, &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;This&lt;&#x2F;span&gt;&lt;span&gt; is a &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;test&lt;&#x2F;span&gt;&lt;span&gt; message&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;#39;).deliver_now&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Building Up Your ARMs</title>
        <published>2016-11-16T00:00:00+00:00</published>
        <updated>2016-11-16T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/building-up-your-arms/"/>
        <id>https://mort.io/blog/building-up-your-arms/</id>
        
        <content type="html" xml:base="https://mort.io/blog/building-up-your-arms/">&lt;p&gt;Due to the impending finish of the EU FP7 funded &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;usercentricnetworking.eu&quot;&gt;User Centric
Networking&lt;&#x2F;a&gt;&lt;sup class=&quot;footnote-reference&quot; id=&quot;fr-1-1&quot;&gt;&lt;a href=&quot;#fn-1&quot;&gt;1&lt;&#x2F;a&gt;&lt;&#x2F;sup&gt; I recently had cause to revisit the excellent work that
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;talex5&quot;&gt;Thomas Leonard&lt;&#x2F;a&gt; did for the project in getting Xen&#x2F;ARM running on the
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;cubieboard.org&#x2F;model&#x2F;cb2&#x2F;&quot;&gt;Cubieboard2&lt;&#x2F;a&gt; and &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;cubieboard.org&#x2F;model&#x2F;cb3&#x2F;&quot;&gt;Cubietruck&lt;&#x2F;a&gt; (aka &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;cubieboard.org&#x2F;model&#x2F;cb3&#x2F;&quot;&gt;Cubieboard3&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;The resulting repo, &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;xen-arm-builder&quot;&gt;mirage&#x2F;xen-arm-builder&lt;&#x2F;a&gt;, had languished for several
months and the past SD card images had some problems and had been allowed to
drop off the ’Net as a result. However, sterling work by &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ijc25&quot;&gt;Ian Campbell&lt;&#x2F;a&gt; at
a recent Mirage &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&#x2F;blog&#x2F;2016-summer-hackathon-roundup&quot;&gt;hackathon&lt;&#x2F;a&gt; had started to resurrect this work based on
the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;alpinelinux.org&#x2F;&quot;&gt;Alpine Linux&lt;&#x2F;a&gt; distribution. This seemed a promising place to start,
so I did :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;building-an-image&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#building-an-image&quot; aria-label=&quot;Anchor link for: building-an-image&quot;&gt;Building an Image&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;The end result was an enormous &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;xen-arm-builder&#x2F;pull&#x2F;71&quot;&gt;pull request&lt;&#x2F;a&gt; that splatted a Brave New
World on top of &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;talex5&quot;&gt;Thomas’&lt;&#x2F;a&gt; work.
The &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;xen-arm-builder&#x2F;blob&#x2F;master&#x2F;README.md&quot;&gt;&lt;code&gt;README&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
is hopefully reasonably self-explanatory but in summary,&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Clone the repo:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;git&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; clone https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;arm-image-builder.git&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;cd&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; arm-image-builder&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Use the &lt;code&gt;make&lt;&#x2F;code&gt; targets:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;make&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; all&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;       # runs `make prepare build image`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# make prepare # clones repos, pulls tarballs&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# make build   # use Docker to build the `linux&#x2F;` and `u-boot&#x2F;` trees&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;# make image   # finally, create the on-disk `sdcard.img`&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;This clones the necessary repos (Linux, u-boot), builds them, and then puts
together the image file &lt;code&gt;sdcard.img&lt;&#x2F;code&gt; in the current directory. If on OSX, &lt;code&gt;make sdcard&lt;&#x2F;code&gt; will then attempt to write that to a blank, mounted SD card. This does a
rather hacky auto-discovery of where the SD card might be mounted; if in doubt,
and in any case, always safer to simply&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;MNT&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;the-correct-mount-point&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; make&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sdcard&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…or simply use your favourite tools to write the &lt;code&gt;sdcard.img&lt;&#x2F;code&gt; file to your SD
card.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;using-the-image&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#using-the-image&quot; aria-label=&quot;Anchor link for: using-the-image&quot;&gt;Using the Image&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;The end result should be an SD card that you can use to boot your device into
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;alpinelinux.org&#x2F;&quot;&gt;Alpine Linux v3.4&lt;&#x2F;a&gt;. At present, completing installation requires then:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;xen-arm-builder#first-boot--re-initialisation&quot;&gt;resetting the environment&lt;&#x2F;a&gt;,&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;xen-arm-builder#base-install&quot;&gt;completing Alpine setup&lt;&#x2F;a&gt; via
the &lt;code&gt;setup-alpine&lt;&#x2F;code&gt; script,&lt;&#x2F;li&gt;
&lt;li&gt;(if desired) installing Xen via the
&lt;code&gt;&#x2F;media&#x2F;mmcblk0p1&#x2F;alpine-dom0-install.sh&lt;&#x2F;code&gt; script created as part of building
the SD card image,&lt;&#x2F;li&gt;
&lt;li&gt;(if desired) finally,
building &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;xen-arm-builder#alpine&quot;&gt;Alpine&lt;&#x2F;a&gt;
and&#x2F;or &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;xen-arm-builder#debian&quot;&gt;Debian&lt;&#x2F;a&gt; &lt;code&gt;domU&lt;&#x2F;code&gt;s
via the &lt;code&gt;&#x2F;media&#x2F;mmcblk0p1&#x2F;alpine-domU-install.sh&lt;&#x2F;code&gt; and
&lt;code&gt;&#x2F;media&#x2F;mmcblk0p1&#x2F;debian-domU-install.sh&lt;&#x2F;code&gt; scripts, also created as part of
building the image.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Hopefully the net result is you end up with a Cubieboard2&#x2F;3 running Xen with an
Alpine Linux &lt;code&gt;dom0&lt;&#x2F;code&gt; and some &lt;code&gt;domU&lt;&#x2F;code&gt; images available.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;mort___&quot;&gt;comments, patches, pull requests welcome&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
&lt;section class=&quot;footnotes&quot;&gt;
&lt;ol class=&quot;footnotes-list&quot;&gt;
&lt;li id=&quot;fn-1&quot;&gt;
&lt;p&gt;Grant No. 611001 for those who care. &lt;a href=&quot;#fr-1-1&quot;&gt;↩&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;&#x2F;section&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Evolving the Unikernel Revolution</title>
        <published>2016-11-10T00:00:00+00:00</published>
        <updated>2016-11-10T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/unikernel-revolution/"/>
        <id>https://mort.io/blog/unikernel-revolution/</id>
        
        <content type="html" xml:base="https://mort.io/blog/unikernel-revolution/">&lt;p&gt;I’ve had the pleasure of giving a couple of talks at some fun venues recently,
extolling both the virtues of &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;unikernel.org&#x2F;&quot;&gt;unikernels&lt;&#x2F;a&gt; and talking a bit about where we
currently see them as usefully being deployed.&lt;&#x2F;p&gt;
&lt;p&gt;Specifically, &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;operability.io&#x2F;&quot;&gt;Operability.io 2016&lt;&#x2F;a&gt; a couple of weeks ago was enlightening
about some of the problems faced in operating production systems. Some great
audience questions and follow-ups after the talk, including some who were even
wondering when we’ll see unikernels as ready for the desktop! Of course, with
the release of the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;docker.com&#x2F;...&quot;&gt;Docker for Mac&lt;&#x2F;a&gt; and [Docker for Windows][dfw] products,
it’s arguable that we’ve beaten Linux to that accolade, as both products make
extensive use of &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&quot;&gt;MirageOS&lt;&#x2F;a&gt; unikernel libraries. Having said that, I was
pleased to be told that the message about unikernels having a range of
deployment scenarios, and particularly partial deployments into micro-service
environments made sense to many who came to speak to me afterwards.&lt;&#x2F;p&gt;
&lt;p&gt;This was followed by a slightly expanded version of that talk earlier today at
the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;devoxx.be&#x2F;&quot;&gt;Devox Belgium&lt;&#x2F;a&gt; conference. &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;devoxx.be&#x2F;&quot;&gt;Devoxx&lt;&#x2F;a&gt; is primarily a Java community
so I was interested to see how the talk would go down given that &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;mirage.io&quot;&gt;MirageOS&lt;&#x2F;a&gt; is
staunchly OCaml-centric, and the &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;unikernel.org&#x2F;&quot;&gt;unikernels&lt;&#x2F;a&gt; movement in general is language
specific and (at least until now) somewhat weighted toward functional
programming, our good friends at &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.includeos.org&#x2F;&quot;&gt;IncludeOS&lt;&#x2F;a&gt; notwithstanding. In the end it
seemed to go pretty well, based on what little I could see through the bright
lights– maybe one day I’ll get used to that when being videoed! Certainly some
good questions again, on the specific utility of unikernels to IoT, the
relationship between unikernels and Docker, and more besides.&lt;&#x2F;p&gt;
&lt;p&gt;Anyway, I hope anyone who came to either talk enjoyed it and found it
interesting. Happy to respond to comments or questions via email or
on &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;mort___&quot;&gt;Twitter&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Grubbing Around</title>
        <published>2016-09-13T00:00:00+00:00</published>
        <updated>2016-09-13T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/grubbing-around/"/>
        <id>https://mort.io/blog/grubbing-around/</id>
        
        <content type="html" xml:base="https://mort.io/blog/grubbing-around/">&lt;p&gt;Nothing earth-shattering here: I recently had the “pleasure” of setting up an
ARM64 server. After considerable support, several firmware upgrades, corruption
of the main HDD, reinstallation of CentOS7 (recommended, somewhat to my
surprise), all that remained was to get an up-to-date Linux built and installed
with 32 bit binary support. This took a bit of &lt;code&gt;make config&lt;&#x2F;code&gt; fiddling, but got
there after a few tries.&lt;&#x2F;p&gt;
&lt;p&gt;And then I had to relearn how &lt;code&gt;grub&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;grub2&lt;&#x2F;code&gt; works in this brave new (to me)
UEFI CentOS7 world. Herewith some brief commands I found useful while doing
so…&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; grep &amp;quot;^menu entry&amp;quot; &#x2F;boot&#x2F;efi&#x2F;EFI&#x2F;centos&#x2F;grub.cfg&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #859900;&quot;&gt;     |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; tr&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -s&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot; &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; cut&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -f&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -d&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;quot;&amp;#39;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #859900;&quot;&gt; |&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; cat&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -n&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Edit &lt;code&gt;&#x2F;etc&#x2F;default&#x2F;grub&lt;&#x2F;code&gt; to set &lt;code&gt;GRUB_DEFAULT=N&lt;&#x2F;code&gt; for desired value of &lt;code&gt;N&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Temporarily set the default for the next reboot:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; grub2-reboot&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 1&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt; # based on output of above&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Regenerate the grub2 configuration:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; grub2-mkconfig&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -o&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &#x2F;boot&#x2F;efi&#x2F;EFI&#x2F;centos&#x2F;grub.cfg&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Of Mice and Keyboards</title>
        <published>2015-11-21T00:00:00+00:00</published>
        <updated>2015-11-21T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/elcapitan-maps/"/>
        <id>https://mort.io/blog/elcapitan-maps/</id>
        
        <content type="html" xml:base="https://mort.io/blog/elcapitan-maps/">&lt;p&gt;A bit of a delay since the last post – lots going on! But anyway: I
(relatively) recently upgraded my old skool Macbook Pro (look! built-in Ethernet
port! DVD drive!) to El Capitan. This was generally rather less faff that the
previous upgrade, though it did seem to take rather more reboots than might have
been assumed to be &lt;em&gt;strictly&lt;&#x2F;em&gt; necessary before it settled down, and I’d
remembered to fix up permissions for Homebrew with &lt;code&gt;sudo chown -R $(whoami):admin &#x2F;usr&#x2F;local&lt;&#x2F;code&gt;. So that was ok.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;elcapitan-maps&#x2F;keyboard-small.png&quot; alt=&quot;Macbook Pro UK Keyboard&quot; title=&quot;Macbook Pro
UK Keyboard&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Except… I have a slightly odd keyboard and mouse setup. It’s a UK Macbook
which means a slightly tweaked keyboard layout compared to the standard US
Macbook keyboard. At my desk, I also use a &lt;em&gt;Microsoft Digital Media Keyboard&lt;&#x2F;em&gt; –
nice action (for me!) plus some handy shortcut keys – and a &lt;em&gt;Microsoft 5-Button
Mouse with IntelliEye&lt;&#x2F;em&gt;. Now, until El Capitan I’d happily been using the
Microsoft provided software to make use of the extra mouse buttons and shortcut
keys, coupled with a
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;scripts.sil.org&#x2F;cms&#x2F;scripts&#x2F;page.php?site_id=nrsi&amp;amp;id=ukelele&quot;&gt;Ukelele-generated&lt;&#x2F;a&gt;
keymap to handle the oddities of the UK laptop keyboard (like, who in the world
really needs &lt;code&gt;§&lt;&#x2F;code&gt; at the top-left key, below &lt;code&gt;escape&lt;&#x2F;code&gt; rather than &lt;code&gt;`&lt;&#x2F;code&gt;; and
doesn’t need an easily accessible &lt;code&gt;#&lt;&#x2F;code&gt;?).&lt;&#x2F;p&gt;
&lt;p&gt;This had never been entirely satisfactory – I had to have a standard keymap
installed in addition to my modified one, and some apps (all of Microsoft
Office, I’m looking at you) liked to intermittently flip the keymap away from my
keymap to the standard issue on, including undoing my remapping of &lt;code&gt;caps lock&lt;&#x2F;code&gt;
to &lt;code&gt;ctrl&lt;&#x2F;code&gt;. This was annoying, but having it completely break was intolerable.&lt;&#x2F;p&gt;
&lt;p&gt;So I went hunting for alternatives and am now very happy with
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;pqrs.org&#x2F;osx&#x2F;karabiner&#x2F;&quot;&gt;Karabiner.app&lt;&#x2F;a&gt; for standard keyboard remappings, and fairly happy
with &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.usboverdrive.com&quot;&gt;USB Overdrive&lt;&#x2F;a&gt; to handle the mouse and the
special Microsoft Digital Media Keyboard shortcut keys.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;usb-overdrive&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#usb-overdrive&quot; aria-label=&quot;Anchor link for: usb-overdrive&quot;&gt;USB Overdrive&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;USB Overdrive seems to do the mouse mappings correctly, having detected the
device as a “Microsoft 5-Button Mouse with IntelliEye(tm), Any Application” –
&lt;code&gt;Button 4&lt;&#x2F;code&gt; and &lt;code&gt;Button 5&lt;&#x2F;code&gt; can be remapped to &lt;code&gt;forward&lt;&#x2F;code&gt; and &lt;code&gt;back&lt;&#x2F;code&gt;, just as I
like it.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;mort.io&#x2F;blog&#x2F;elcapitan-maps&#x2F;usboverdrive.png&quot; alt=&quot;USB Overdrive&quot; title=&quot;USB Overdrive Configuration&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It also allows me to repurpose some of the extra keys on my Microsoft keyboard
that &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;pqrs.org&#x2F;osx&#x2F;karabiner&#x2F;&quot;&gt;Karabiner&lt;&#x2F;a&gt; doesn’t seem able to see– so I get one touch play&#x2F;pause of
iTunes and other such delights.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;karabiner-app&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#karabiner-app&quot; aria-label=&quot;Anchor link for: karabiner-app&quot;&gt;Karabiner.app&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;pqrs.org&#x2F;osx&#x2F;karabiner&#x2F;&quot;&gt;Karabiner&lt;&#x2F;a&gt; took a bit more setting up but does a very nice job. I needed to
remap certain keys differently on the two different keyboards to make both
consistent and to fix some of the weirder (to my mind!) decisions both Microsoft
and (particualrly) Apple have taken with their layouts. The result is an
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-files&#x2F;blob&#x2F;master&#x2F;karabiner.xml&quot;&gt;XML configuration file&lt;&#x2F;a&gt;, symlinked by &lt;code&gt;~&#x2F;Library&#x2F;Application Support&#x2F;Karabiner&#x2F;private.xml&lt;&#x2F;code&gt;. This applies two keymaps based on the detected
device, using product ID codes determined by the &lt;code&gt;EventViewer&lt;&#x2F;code&gt; app that comes
with &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;pqrs.org&#x2F;osx&#x2F;karabiner&#x2F;&quot;&gt;Karabiner&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;deviceproductdef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productname&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;MACBOOK_PRO_UK_KEYBOARD&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productname&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productid&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;0x0253&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productid&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;deviceproductdef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;deviceproductdef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productname&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;DIGITAL_MEDIA_KEYBOARD&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productname&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productid&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;0x00b4&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productid&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;deviceproductdef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;deviceproductdef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productname&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;FIVE_BUTTON_MOUSE_WITH_INTELLIEYE&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productname&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productid&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;0x0039&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;productid&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;deviceproductdef&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;There are then two  &lt;code&gt;&amp;lt;item&amp;gt;&amp;lt;&#x2F;item&amp;gt;&lt;&#x2F;code&gt; stanzas that configure the two different
keyboards, e.g.,&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;item&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;Keyboard mappings for Microsoft keyboard&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;name&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;identifier&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span&gt;private.io.mort.microsoft_keyboard&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;identifier&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;device_only&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    DeviceVendor::MICROSOFT,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;    DeviceProduct::DIGITAL_MEDIA_KEYBOARD&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;  &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;device&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  ...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Each of these contains a number of &lt;code&gt;&amp;lt;autogen&amp;gt;&amp;lt;&#x2F;autogen&amp;gt;&lt;&#x2F;code&gt; stanza mapping specific
keycodes for that keymap. For example, I want the top-left key on the main block
to be &lt;code&gt;`&lt;&#x2F;code&gt; and, when shifted, to be &lt;code&gt;€&lt;&#x2F;code&gt;. This leads to the following on the
Microsoft keyboard:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;&amp;lt;!-- shift-` to € --&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  __KeyToKey__&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::BACKQUOTE, ModifierFlag::SHIFT_L | ModifierFlag::NONE,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::KEY_2, ModifierFlag::OPTION_R | ModifierFlag::SHIFT_R&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  __KeyToKey__&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::BACKQUOTE, ModifierFlag::SHIFT_R | ModifierFlag::NONE,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::KEY_2, ModifierFlag::OPTION_R | ModifierFlag::SHIFT_R&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…but to the following on the Macbook built-in UK keyboard, to take account
first of the different keycode it generates but also to ensure that when used
with command and command-shift, the standard behaviour of cycling between
windows works:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;&amp;lt;!-- top-left § to ` --&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  __KeyToKey__&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::DANISH_DOLLAR, ModifierFlag::NONE,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::BACKQUOTE&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;&amp;lt;!-- ...with shift, to € --&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  __KeyToKey__&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::DANISH_DOLLAR, ModifierFlag::SHIFT_L | ModifierFlag::NONE,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::KEY_2, ModifierFlag::OPTION_R | ModifierFlag::SHIFT_R&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  __KeyToKey__&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::DANISH_DOLLAR, ModifierFlag::SHIFT_R | ModifierFlag::NONE,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::KEY_2, ModifierFlag::OPTION_R | ModifierFlag::SHIFT_R&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;&amp;lt;!-- ...with COMMAND&#x2F;SHIFT, so that cycle-window-{forward,back} work --&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  __KeyToKey__&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::DANISH_DOLLAR, ModifierFlag::COMMAND_L | ModifierFlag::NONE,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::BACKQUOTE, ModifierFlag::COMMAND_R&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  __KeyToKey__&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::DANISH_DOLLAR, ModifierFlag::COMMAND_L | ModifierFlag::SHIFT_L | ModifierFlag::NONE,&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  KeyCode::BACKQUOTE, ModifierFlag::COMMAND_R | ModifierFlag::SHIFT_R&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;autogen&lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;There are a number of other mappings made in &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-files&#x2F;blob&#x2F;master&#x2F;karabiner.xml&quot;&gt;karabiner.xml&lt;&#x2F;a&gt;: &lt;code&gt;shift-&#x27;&lt;&#x2F;code&gt; is
&lt;code&gt;@&lt;&#x2F;code&gt;, &lt;code&gt;shift-2&lt;&#x2F;code&gt; is &lt;code&gt;&quot;&lt;&#x2F;code&gt;, &lt;code&gt;shift-3&lt;&#x2F;code&gt; is &lt;code&gt;£&lt;&#x2F;code&gt;, and resolving general confusion among
&lt;code&gt;#&lt;&#x2F;code&gt;, &lt;code&gt;\&lt;&#x2F;code&gt;, &lt;code&gt;~&lt;&#x2F;code&gt;, and &lt;code&gt;|&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;emacs&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#emacs&quot; aria-label=&quot;Anchor link for: emacs&quot;&gt;Emacs&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;That fixed things for the terminal and for most apps – the only remaining
sticking point was Emacs. I don’t pretend to understand the entire chain of
event processing but suffice it to say that Emacs was receiving &lt;code&gt;shift-@&lt;&#x2F;code&gt; and
&lt;code&gt;shift-3&lt;&#x2F;code&gt; without knowing what to do with them. Fortunately, when coupled with
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-files&#x2F;blob&#x2F;master&#x2F;emacs.d&#x2F;init.el#L929-L1019&quot;&gt;my hacks to enforce a &lt;code&gt;my-keys-minor-mode&lt;&#x2F;code&gt; to override everything&lt;&#x2F;a&gt;,
the fix was pretty straightforward:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(define-key my-keys-minor-mode-map (kbd &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;s-@&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;€&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(define-key my-keys-minor-mode-map (kbd &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;s-3&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;lambda&lt;&#x2F;span&gt;&lt;span&gt; () (interactive) (insert-char &lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;#x00A3&lt;&#x2F;span&gt;&lt;span&gt;))) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;; £&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h3 id=&quot;result&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#result&quot; aria-label=&quot;Anchor link for: result&quot;&gt;Result?&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;A &lt;strong&gt;significant&lt;&#x2F;strong&gt; decrease in the need I feel to curse because my keyboard has
changed in the middle of typing! It seems that keyboards remain, like time and
terminals, one of those &lt;em&gt;Really Hard&lt;&#x2F;em&gt; things for computers&#x2F;manufacturers to
handle…&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Note: Thanks to &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.amp-what.com&#x2F;unicode&#x2F;search&#x2F;&quot;&gt;http:&#x2F;&#x2F;www.amp-what.com&#x2F;unicode&#x2F;search&#x2F;&lt;&#x2F;a&gt; for an easy way to
hunt down some of the unicode symbols used above!&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Rescuing a Shattered Nexus 4</title>
        <published>2015-05-21T00:00:00+00:00</published>
        <updated>2015-05-21T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/nexus-4-rescue/"/>
        <id>https://mort.io/blog/nexus-4-rescue/</id>
        
        <content type="html" xml:base="https://mort.io/blog/nexus-4-rescue/">&lt;p&gt;A little while ago, before I’d done the smart thing and got myself a case for my
Nexus 4, I dropped it a couple of inches onto a hard surface at the wrong angle.
The screen promptly shattered – and this was bad because without the touch
screen, I couldn’t interact with it, I had some photos on it from son#1 birthday
party that hadn’t been copied off, and I hadn’t got round to enabling USB access
to the filesystem or any of the debug&#x2F;developer options.&lt;&#x2F;p&gt;
&lt;p&gt;So what to do? I &lt;em&gt;really&lt;&#x2F;em&gt; didn’t want to lose those photos. A couple of hours
searching the Interwebs and a little bit of experimentation later, and I managed
it. Basically, download and apply the clockwork mod bootloader, and this turns
on the developer options that allow access to the filesystem via the Android SDK
tools. To find out the details, read on…&lt;&#x2F;p&gt;
&lt;p&gt;First, download the recovery image:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; wget http:&#x2F;&#x2F;download2.clockworkmod.com&#x2F;recoveries&#x2F;recovery-clockwork-touch-6.0.3.1-mako.img&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Next, install the Android SDK – I’m on OSX using [Homebrew][] so I do:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; brew install android-sdk&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now, power off and disconnect the phone! Then boot it into fastboot mode by
holding down &lt;code&gt;power&lt;&#x2F;code&gt; and &lt;code&gt;volume-down&lt;&#x2F;code&gt;. Once it boots you should be in the
fastboot list – the volume keys will cycle you through the list. You should now
also be able to see the device once connected to USB, and you can then OEM
unlock it:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo fastboot devices&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -l&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;04f02d4bdcd3b6e2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;       fastboot usb:FD123000&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo fastboot oem unlock&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;OKAY&lt;&#x2F;span&gt;&lt;span&gt; [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; 17.937s]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;finished.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; total time: 17.937s&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Having unlocked it, you can now install the clockwork recovery bootloader you
downloaded (assuming it’s in the local directory):&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; sudo fastboot flash recovery recovery-clockwork-touch-6.0.3.1-mako.img&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sending&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;recovery&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt; (7560&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; KB&lt;&#x2F;span&gt;&lt;span&gt;)...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;OKAY&lt;&#x2F;span&gt;&lt;span&gt; [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  0.526s]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;writing&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; &amp;#39;recovery&amp;#39;...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;OKAY&lt;&#x2F;span&gt;&lt;span&gt; [&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  0.448s]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;finished.&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; total time: 0.975s&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When you now use the volume keys to cycle through the list, you should now see
&lt;strong&gt;recovery mode&lt;&#x2F;strong&gt; as an option – select it, and you should be able to see the
device listed in the usual way via &lt;code&gt;adb&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; mort@greyjay:phone&lt;&#x2F;span&gt;&lt;span&gt;$;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; adb devices&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -l&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;List&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; of devices attached&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;04f02d4bdcd3b6e2&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;       recovery usb:FD123000 product:occam model:Nexus_4 device:mako&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, pull all the contents off the sdcard:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; adb pull &#x2F;sdcard&#x2F;0 .&#x2F;sdcard&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; adb pull &#x2F;data&#x2F; .&#x2F;data&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; adb pull &#x2F;system&#x2F; .&#x2F;system&#x2F;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;…and that’s it – you should now have a local copy of everything off the
phone, and you can send it away for repair (or whatever you feel like
otherwise), possibly while sobbing quietly.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Moving Onto Mirage</title>
        <published>2015-05-20T00:00:00+00:00</published>
        <updated>2015-05-20T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/moving-onto-mirage/"/>
        <id>https://mort.io/blog/moving-onto-mirage/</id>
        
        <content type="html" xml:base="https://mort.io/blog/moving-onto-mirage/">&lt;p&gt;For a little while I’ve had &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;mor1.github.io&quot;&gt;this site&lt;&#x2F;a&gt; running as a &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;openmirage.org&#x2F;&quot;&gt;MirageOS&lt;&#x2F;a&gt;
unikernel, shadowing the main site hosted on &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;github.com&#x2F;&quot;&gt;GitHub&lt;&#x2F;a&gt;. I’ve finally decided to
make the switch, as part of moving over to take advantage of Mirage’s DNS and
TLS libraries.&lt;&#x2F;p&gt;
&lt;p&gt;Following the usual pattern, as previously explained by &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;amirchaudhry.com&#x2F;from-jekyll-to-unikernel-in-fifty-lines&#x2F;&quot;&gt;Amir&lt;&#x2F;a&gt;, &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.somerandomidiot.com&#x2F;blog&#x2F;2014&#x2F;08&#x2F;19&#x2F;i-am-unikernel&#x2F;&quot;&gt;Mindy&lt;&#x2F;a&gt; and
others, the process is:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Construct a static &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;jekyllrb.com&quot;&gt;Jekyll&lt;&#x2F;a&gt; site.&lt;&#x2F;li&gt;
&lt;li&gt;Write a &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;travis-ci.com&#x2F;&quot;&gt;Travis&lt;&#x2F;a&gt; YAML file to cause &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;travis-ci.com&#x2F;&quot;&gt;Travis&lt;&#x2F;a&gt; to build the unikernel image
and commit it back to the deployment repository.&lt;&#x2F;li&gt;
&lt;li&gt;Write a Git &lt;code&gt;post-merge&lt;&#x2F;code&gt; hook for the deployment repository, so that the
latest unikernel is automatically booted when a merge is detected, i.e., there
is a new unikernel image.&lt;&#x2F;li&gt;
&lt;li&gt;Write a &lt;code&gt;cron&lt;&#x2F;code&gt; job that periodically polls the deployment repository, pulling
any changes.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Building a &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;jekyllrb.com&quot;&gt;Jekyll&lt;&#x2F;a&gt; site is well-documented – I did find that I had to tweak
my &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;mor1.github.io&#x2F;blob&#x2F;master&#x2F;_config.yml&quot;&gt;&lt;code&gt;_config.yml&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; so as to make sure my local toolchain matched the
one used by Github, ensuring consistency between versions of the site. For
convenience:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;make&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; site&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;&lt;h2 id=&quot;bringing-up-the-network&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#bringing-up-the-network&quot; aria-label=&quot;Anchor link for: bringing-up-the-network&quot;&gt;Bringing up the network&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;The &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;mor1.github.io&#x2F;blob&#x2F;master&#x2F;.travis.yml&quot;&gt;&lt;code&gt;.travis.yml&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; file then specifies the three main targets for
the CI test build to carry out: Unix with a standard sockets backed
(&lt;code&gt;MIRAGE_BACKEND=unix&lt;&#x2F;code&gt;, &lt;code&gt;MIRAGE_NET=socket&lt;&#x2F;code&gt;) and with the Mirage network stack
(&lt;code&gt;MIRAGE_BACKEND=unix&lt;&#x2F;code&gt;, &lt;code&gt;MIRAGE_NET=direct&lt;&#x2F;code&gt;), and with the Xen backend
(&lt;code&gt;MIRAGE_BACKEND=xen&lt;&#x2F;code&gt;). For the latter case, we must also specify the static IP
configuration to be used (&lt;code&gt;MIRAGE_ADDR&lt;&#x2F;code&gt;, &lt;code&gt;..._GWS&lt;&#x2F;code&gt;, and &lt;code&gt;..._MASK&lt;&#x2F;code&gt;). The
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;mor1.github.io&#x2F;blob&#x2F;master&#x2F;.travis.sh&quot;&gt;&lt;code&gt;.travis.sh&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; script then calls the standard skeleton
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ocaml&#x2F;ocaml-travisci-skeleton&#x2F;blob&#x2F;master&#x2F;.travis-mirage.sh&quot;&gt;&lt;code&gt;.travis-mirage.sh&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; script after first building the site
content using Jekyll.&lt;&#x2F;p&gt;
&lt;p&gt;This tests the three basic combinations of network backend for a Mirage
appliance:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; make configure.socket build&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;UNIX&#x2F;socket&lt;&#x2F;strong&gt; requires no configuration. The network device is configured
with the loopback address, &lt;code&gt;127.0.0.1&lt;&#x2F;code&gt;. Appliances can be run without
requiring &lt;code&gt;root&lt;&#x2F;code&gt; privileges, assuming they only bind to non-privileged ports.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; make configure.direct build&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;UNIX&#x2F;direct&#x2F;dhcp&lt;&#x2F;strong&gt; requires no configuration if a DHCP server is running and
can respond. The appliance must be run with &lt;code&gt;root&lt;&#x2F;code&gt; privileges to use the new
network bridging capability of OSX 10.10, whereupon the DHCP client in the
appliance follows the usual protocol.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; make configure.xen build&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; \&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;  ADDR=&amp;quot;46.43.42.137&amp;quot; GWS=&amp;quot;46.43.42.129&amp;quot; MASK=&amp;quot;255.255.255.128&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Xen&lt;&#x2F;strong&gt; uses the Mirage network stack and expects static configuration of the
network device.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;using-travis-ci&quot;&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#using-travis-ci&quot; aria-label=&quot;Anchor link for: using-travis-ci&quot;&gt;Using Travis CI&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Of course, all that is for local development – for the live site, this is
actually all wrapped up using &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;travis-ci.com&#x2F;&quot;&gt;Travis CI&lt;&#x2F;a&gt;. Due to a small pull request
waiting on the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ocaml&#x2F;ocaml-travisci-skeleton&quot;&gt;OCaml Travis CI skeleton scripts&lt;&#x2F;a&gt; and a few
Mirage releases currently being readied, this looks a little more complex than
it needs to (the &lt;code&gt;FORK_USER&lt;&#x2F;code&gt; and &lt;code&gt;DEV_REMOTE&lt;&#x2F;code&gt; variables shouldn’t need to be
specified in the long run) but anyway:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;yaml&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;language&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; c&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; bash -ex .travis.sh&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;env&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;  matrix&lt;&#x2F;span&gt;&lt;span&gt;:&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; FORK_USER=mor1 DEV_REMOTE=git:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;mirage-dev&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    OCAML_VERSION=4.02 MIRAGE_BACKEND=unix MIRAGE_NET=socket&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; FORK_USER=mor1 DEV_REMOTE=git:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;mirage-dev&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    OCAML_VERSION=4.02 MIRAGE_BACKEND=unix MIRAGE_NET=direct&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;  -&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; FORK_USER=mor1 DEV_REMOTE=git:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;mirage-dev&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    UPDATE_GCC_BINUTILS=1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    OCAML_VERSION=4.02 MIRAGE_BACKEND=xen&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    MIRAGE_ADDR=&amp;quot;46.43.42.137&amp;quot; MIRAGE_GWS=&amp;quot;46.43.42.129&amp;quot; MIRAGE_MASK=&amp;quot;255.255.255.128&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;    XENIMG=mortio MIRDIR=_mirage DEPLOY=1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This uses the local &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;mor1.github.io&#x2F;blob&#x2F;master&#x2F;.travis.sh&quot;&gt;&lt;code&gt;.travis-sh&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; script to build the three versions
of the site, using the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;mirage-dev&quot;&gt;Mirage development OPAM repository&lt;&#x2F;a&gt; so as to
pick up the latest versions of all the various packages, and updating the Travis
&lt;code&gt;gcc&lt;&#x2F;code&gt; and &lt;code&gt;binutils&lt;&#x2F;code&gt; to ensure the stubs for a couple of packages (notably
&lt;code&gt;mirage-entropy-xen&lt;&#x2F;code&gt;) build.&lt;&#x2F;p&gt;
&lt;p&gt;Next stop: adding TLS and DNS support…&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Diamonds are a Chap&#x27;s Best Friend</title>
        <published>2015-04-09T00:00:00+00:00</published>
        <updated>2015-04-09T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/inconstant-ruby/"/>
        <id>https://mort.io/blog/inconstant-ruby/</id>
        
        <content type="html" xml:base="https://mort.io/blog/inconstant-ruby/">&lt;p&gt;As &lt;a href=&quot;&#x2F;blog&#x2F;2015&#x2F;01&#x2F;15&#x2F;begin-again&#x2F;&quot;&gt;noted previously&lt;&#x2F;a&gt;, this site is basically a
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;&quot;&gt;Github&lt;&#x2F;a&gt;-hosted &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;jekyllrb.com&#x2F;&quot;&gt;Jekyll&lt;&#x2F;a&gt; site at present, though one that can be built as a
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;openmirage.org&#x2F;&quot;&gt;Mirage&lt;&#x2F;a&gt; unikernel. Part of the &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;openmirage.org&#x2F;&quot;&gt;Mirage&lt;&#x2F;a&gt; workflow to publish a new post
involves using &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;travis-ci.org&#x2F;&quot;&gt;Travis CI&lt;&#x2F;a&gt; to build and then commit back a new unikernel
image. Thus it is currently necessary to run &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;jekyllrb.com&#x2F;&quot;&gt;Jekyll&lt;&#x2F;a&gt; in the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;travis-ci.org&#x2F;&quot;&gt;Travis&lt;&#x2F;a&gt; build
scripts, and the dynamism of the Ruby environment meant that this broke (again)
recently as one of the &lt;code&gt;github-pages&lt;&#x2F;code&gt; gem’s dependencies now depends on &lt;code&gt;Ruby &amp;gt;= 2.0&lt;&#x2F;code&gt; while the default Rubies on the &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;travis-ci.org&#x2F;&quot;&gt;Travis&lt;&#x2F;a&gt; Ubuntu image for &lt;code&gt;C&lt;&#x2F;code&gt; language
builds is &lt;code&gt;1.8&lt;&#x2F;code&gt; (via Ubuntu packaging) or, if you remove that one, &lt;code&gt;1.9&lt;&#x2F;code&gt; (via
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;rvm.io&#x2F;&quot;&gt;rvm&lt;&#x2F;a&gt;). Read on to find out how to fix this…&lt;&#x2F;p&gt;
&lt;p&gt;The fix that currently works for me turns out to be relatively simple: remove
all the rubies installed as Ubuntu packages, and then invoke &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;rvm.io&#x2F;&quot;&gt;rvm&lt;&#x2F;a&gt; to set the
default ruby to something reasonable – in this case, 2.1.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;shellscript&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;## remove old ubuntu rubies&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt-get&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -y&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; remove ruby ruby1.8&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; apt-get&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -y&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; autoremove&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;## use rvm and a modern-ish ruby&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;source&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ~&#x2F;.rvm&#x2F;scripts&#x2F;rvm&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;rvm&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --default&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; use&lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt; 2.1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;## check that all worked...&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;which&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; ruby&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;ruby&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --version&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;## install jekyll and github-pages&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;gem&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install jekyll&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;gem&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt; install github-pages&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; --no-rdoc --no-ri&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;jekyll&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt; -v&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And that’s all there is to it – you should now be able to call &lt;code&gt;jekyll&lt;&#x2F;code&gt; in your
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;travis-ci.org&#x2F;&quot;&gt;Travis&lt;&#x2F;a&gt; environment as you’d expect…&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Looping the Loop</title>
        <published>2015-02-17T00:00:00+00:00</published>
        <updated>2015-02-17T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/looping-the-loop/"/>
        <id>https://mort.io/blog/looping-the-loop/</id>
        
        <content type="html" xml:base="https://mort.io/blog/looping-the-loop/">&lt;p&gt;In a fit of blogging mania, here’s another one literally barely days after the
previous one. Maybe I’ll crack this yet.&lt;&#x2F;p&gt;
&lt;p&gt;Anyway, this is just a short one with what verges on a Technical Contribution.
To whit: I recently sorted out &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;mort.io&#x2F;&quot;&gt;this domain&lt;&#x2F;a&gt; and was having
some issues getting some consistency between what &lt;code&gt;dig&lt;&#x2F;code&gt;, Chrome and my
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;gandi.net&quot;&gt;domain provider&lt;&#x2F;a&gt; believed to be the correct state. In
particular, I was switching over to make the domain properly live rather than
simply a &lt;code&gt;301 Moved Permanently&lt;&#x2F;code&gt; redirect to my old pages at Nottingham.&lt;&#x2F;p&gt;
&lt;p&gt;It turns out this was probably mostly Chrome being confused. It seems that it
caches &lt;code&gt;301 Moved Permanently&lt;&#x2F;code&gt; redirects fairly aggressively and the cached
entries are &lt;strong&gt;not&lt;&#x2F;strong&gt; discarded when you go through the standard mechanisms to
clear caches.&lt;&#x2F;p&gt;
&lt;p&gt;After a bit of experimentation and browsing, it seems that one way to clear this
is to &lt;code&gt;view-source&lt;&#x2F;code&gt; on the page but pass a spurious parameter to defeat the
cache. So, to force the browser to fetch &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;mort.io&quot;&gt;http:&#x2F;&#x2F;mort.io&lt;&#x2F;a&gt; properly, all I had to
do was &lt;code&gt;view-source:mort.io?spurious=parameter&lt;&#x2F;code&gt;. And lo! All was well.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Begin, Again!</title>
        <published>2015-01-15T00:00:00+00:00</published>
        <updated>2015-01-15T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/begin-again/"/>
        <id>https://mort.io/blog/begin-again/</id>
        
        <content type="html" xml:base="https://mort.io/blog/begin-again/">&lt;p&gt;Specifically, I’ve left &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.horizon.ac.uk&quot;&gt;Horizon&lt;&#x2F;a&gt; and the
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.cs.nott.ac.uk&quot;&gt;School of Computer Science&lt;&#x2F;a&gt; at the
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.nottingham.ac.uk&quot;&gt;University of Nottingham&lt;&#x2F;a&gt; to (re-)join the
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.cam.ac.uk&quot;&gt;Cambridge University&lt;&#x2F;a&gt;
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.cl.cam.ac.uk&quot;&gt;Computer Laboratory&lt;&#x2F;a&gt;. In celebration, and frankly
because it was long overdue anyway, I’ve reworked my website. What do you think?&lt;&#x2F;p&gt;
&lt;p&gt;For the curious, or the technically inclined, the site now uses
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;foundation.zurb.com&#x2F;&quot;&gt;ZURB Foundation&lt;&#x2F;a&gt; 5.5.0 (the current downloadable release as of
yesterday), with some slightly customised CSS. The site itself is largely
written in &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;daringfireball.net&#x2F;projects&#x2F;markdown&#x2F;&quot;&gt;Markdown&lt;&#x2F;a&gt; and currently generated using
&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;jekyllrb.com&#x2F;&quot;&gt;Jekyll&lt;&#x2F;a&gt; to be hosted on &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;github.com&quot;&gt;Github&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;It’s actually gone through an interim phase where it was parsed by the OCaml
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pw347&#x2F;omd&quot;&gt;OMD&lt;&#x2F;a&gt; parser before being crunched into a &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;mirage-types&quot;&gt;Mirage KV_RO&lt;&#x2F;a&gt;
filesystem which is then compiled into a type-safe, self-contained web appliance
that serves these pages and no other using the OCaml &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;cowabloga&quot;&gt;Cowabloga&lt;&#x2F;a&gt;, &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;ocaml-cow&quot;&gt;COW&lt;&#x2F;a&gt; and
&lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;ocaml-cohttp&quot;&gt;CoHTTP&lt;&#x2F;a&gt; libraries. This could either be run as a &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;mirage-platform&#x2F;tree&#x2F;master&#x2F;unix&quot;&gt;POSIX binary&lt;&#x2F;a&gt;
or a self-contained &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;mirage-platform&#x2F;tree&#x2F;master&#x2F;xen&quot;&gt;Xen VM&lt;&#x2F;a&gt; depending on what I felt like. Neat eh?
(And for the sceptical among you, yes, a thing &lt;em&gt;can&lt;&#x2F;em&gt; be neat and yet appear
curiously over-engineered at the same time… :)&lt;&#x2F;p&gt;
&lt;p&gt;For the time being however, I’m using it as an excuse to think about what I
might do to better support site generation like this in &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mirage&#x2F;cowabloga&quot;&gt;Cowabloga&lt;&#x2F;a&gt; so that I
can more seamlessly switch between &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;jekyllrb.com&#x2F;&quot;&gt;Jekyll&lt;&#x2F;a&gt; and &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;openmirage.org&#x2F;&quot;&gt;Mirage&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>A 21st Century IDE</title>
        <published>2013-10-13T00:00:00+00:00</published>
        <updated>2013-10-13T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Richard Mortier
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://mort.io/blog/21st-century-ide/"/>
        <id>https://mort.io/blog/21st-century-ide/</id>
        
        <content type="html" xml:base="https://mort.io/blog/21st-century-ide/">&lt;p&gt;I finally decided to sit down and get the shiny new &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;kiwi.iuwt.fr&#x2F;~asmanur&#x2F;blog&#x2F;merlin&#x2F;&quot;&gt;merlin&lt;&#x2F;a&gt; mode for OCaml
working with my emacs configuration. Basically, really rather simple in the end
although (in the usual fashion!) I did end up spending considerable time
tweaking various other customisations…&lt;&#x2F;p&gt;
&lt;p&gt;Most of the information below is based on the following sources:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;github.com&#x2F;def-lkb&#x2F;merlin#emacs-interface&quot;&gt;http:&#x2F;&#x2F;github.com&#x2F;def-lkb&#x2F;merlin#emacs-interface&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;zheng.li&#x2F;buzzlogs-ocaml&#x2F;2013&#x2F;08&#x2F;23&#x2F;irc.html&quot;&gt;http:&#x2F;&#x2F;zheng.li&#x2F;buzzlogs-ocaml&#x2F;2013&#x2F;08&#x2F;23&#x2F;irc.html&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;www.ocamlpro.com&#x2F;blog&#x2F;2013&#x2F;03&#x2F;18&#x2F;monthly-03.html&quot;&gt;http:&#x2F;&#x2F;www.ocamlpro.com&#x2F;blog&#x2F;2013&#x2F;03&#x2F;18&#x2F;monthly-03.html&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Before we begin, install &lt;code&gt;merlin&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;plain&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;$ opam install merlin&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The complete &lt;a rel=&quot;external&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mor1&#x2F;rc-files&#x2F;commit&#x2F;4a2b0be59081d6df0640af39b48c75c20443c8dc&quot;&gt;commit&lt;&#x2F;a&gt; change is in my &lt;a rel=&quot;external&quot; href=&quot;http:&#x2F;&#x2F;github.com&#x2F;mor1&quot;&gt;github&lt;&#x2F;a&gt; account (combined with a
large cleanup of various other aborted OCaml configurations). Breaking it down a
bit, first setup some paths: where to find &lt;code&gt;ocp-indent&lt;&#x2F;code&gt;, &lt;code&gt;merlin.el&lt;&#x2F;code&gt; for
&lt;code&gt;merlin-mode&lt;&#x2F;code&gt;, and the &lt;code&gt;ocamlmerlin&lt;&#x2F;code&gt; command itself. Note that this relies on
the current state of &lt;code&gt;opam&lt;&#x2F;code&gt;, so when you start &lt;code&gt;emacs&lt;&#x2F;code&gt; be sure to have selected
the &lt;code&gt;opam&lt;&#x2F;code&gt; compiler-switch that you installed the &lt;code&gt;merlin&lt;&#x2F;code&gt; package into, above.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;;; ocp-indent&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(load-file (concat&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            (substring (shell-command-to-string &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;opam config var prefix&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;0 -1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;            &amp;quot;&#x2F;share&#x2F;typerex&#x2F;ocp-indent&#x2F;ocp-indent.el&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;            ))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #586E75;font-style: italic;&quot;&gt;;; merlin-mode&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;push&lt;&#x2F;span&gt;&lt;span&gt; (concat&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;       (substring (shell-command-to-string &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;opam config var share&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;0 -1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;       &amp;quot;&#x2F;emacs&#x2F;site-lisp&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;       )&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      load-path)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;setq&lt;&#x2F;span&gt;&lt;span&gt; merlin-command&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;      (concat&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;       (substring (shell-command-to-string &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;opam config var bin&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #D33682;&quot;&gt;0 -1&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;       &amp;quot;&#x2F;ocamlmerlin&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;       ))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(autoload &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;merlin-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;merlin&amp;quot; &amp;quot;Merlin mode&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt; t&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now the meat: when we select &lt;code&gt;tuareg-mode&lt;&#x2F;code&gt;, use &lt;code&gt;ocp-indent&lt;&#x2F;code&gt; to indent lines,
turn on &lt;code&gt;merlin&lt;&#x2F;code&gt; auto-complete, and finally set a couple of local key bindings
so that I can fix up &lt;code&gt;merlin&lt;&#x2F;code&gt; to not conflict with my
now-neurologically-hardwired navigation keys.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(add-hook &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;tuareg-mode-hook&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;          &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;lambda&lt;&#x2F;span&gt;&lt;span&gt; ()&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;             (merlin-mode)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;             (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;setq&lt;&#x2F;span&gt;&lt;span&gt; indent-line-function &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;ocp-indent-line)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;             (&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;setq&lt;&#x2F;span&gt;&lt;span&gt; merlin-use-auto-complete-mode &lt;&#x2F;span&gt;&lt;span style=&quot;color: #B58900;&quot;&gt;t&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;             (local-set-key (kbd &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-S-&amp;lt;up&amp;gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;merlin-type-enclosing-go-up)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;             (local-set-key (kbd &lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;C-S-&amp;lt;down&amp;gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;merlin-type-enclosing-go-down)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;             ))&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Finally, do the usual to use &lt;code&gt;tuareg-mode&lt;&#x2F;code&gt; for OCaml&#x2F;F# editing.&lt;&#x2F;p&gt;
&lt;pre class=&quot;giallo&quot; style=&quot;color: #839496; background-color: #002B36;&quot;&gt;&lt;code data-lang=&quot;common-lisp&quot;&gt;&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(push&amp;#39;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.ml[iylp]?&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; tuareg-mode) auto-mode-alist)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;giallo-l&quot;&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #93A1A1;font-weight: bold;&quot;&gt;push&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; &amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #CB4B16;&quot;&gt;\\&lt;&#x2F;span&gt;&lt;span style=&quot;color: #2AA198;&quot;&gt;.fs[ix]?&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color: #268BD2;&quot;&gt; .&lt;&#x2F;span&gt;&lt;span&gt; tuareg-mode) auto-mode-alist)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And that’s it!&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
