<!doctype html><html lang=en><head><link href="https://mort.io/abridge.css?h=5f1494977bbccc1fddc1" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://mort.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link title="mort’s mythopœia Atom Feed" href=https://mort.io/atom.xml rel=alternate type=application/atom+xml><link title="mort’s mythopœia RSS Feed" href=https://mort.io/rss.xml rel=alternate type=application/rss+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>WSL2 / Windows 11 | mort’s mythopœia</title><meta content="mort’s mythopœia" name=copyright><meta content="Trying out WSL2 on Windows 11" name=description><link href=https://mort.io/blog/windows-wsl2/ rel=canonical><meta content=https://mort.io/blog/windows-wsl2/ property=og:url><meta content=https://mort.io/blog/windows-wsl2/ name=twitter:url><meta content="Trying out WSL2 on Windows 11" property=og:description><meta content="Trying out WSL2 on Windows 11" name=twitter:description><meta content="WSL2 / Windows 11 | mort’s mythopœia" property=og:title><meta content="WSL2 / Windows 11 | mort’s mythopœia" name=twitter:title><meta content=summary name=twitter:card><meta content="mort’s mythopœia" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta content=2023-03-13 property=og:updated_time><noscript><link href=https://mort.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="mort’s mythopœia" href=https://mort.io>mort’s mythopœia</a></big></div><div><div><ul><li><a class=s110 href=https://mort.io/research/> research </a><li><a class=s110 href=https://mort.io/students/> students </a><li><a class=s110 href=https://mort.io/teaching/> teaching </a><li><a class=s110 href=https://mort.io/codes/> codes </a><li><a class=s110 href=https://mort.io/me/> me </a></ul></div><div></div></div></nav><div class=desc>with apologies</div><hr></header><main><article><h1><a href=https://mort.io/blog/windows-wsl2/>WSL2 / Windows 11</a></h1><span class=s95><span class=hpad> ·</span> 2 min read<span class=hpad> ·</span> March 13, 2023<span class=hpad> ·</span> #<a href=https://mort.io/tags/old/>old</a> #<a href=https://mort.io/tags/tech/>tech</a> #<a href=https://mort.io/tags/wsl2/>wsl2</a> </span><aside class=updates><ul><li>2025-05-29: Fixed typo, and moved floating URL to the end</ul></aside><nav><div><a href=https://mort.io/blog/nixos-onedrive/>‹ OneDrive and NixOS</a></div><div><a href=https://mort.io/blog/ocaml-operators/> OCaml operators ›</a></div></nav><p>I naively thought I could just use WSL2 on Windows on my new laptop. But it turned out this was the year of Linux on the Laptop for me. For posterity here’s the crib sheet though.<pre class=giallo style=color:#839496;background-color:#002b36><code data-lang=shellscript><span class=giallo-l><span style=color:#268bd2>wsl</span><span style=color:#cb4b16> --set-default-version</span><span style=color:#d33682> 2</span></span>
<span class=giallo-l><span style=color:#268bd2>sudo</span><span style=color:#2aa198> apt update</span><span> &&</span><span style=color:#268bd2> sudo</span><span style=color:#2aa198> apt upgrade</span><span style=color:#cb4b16> -yy</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#268bd2>sudo</span><span style=color:#2aa198> apt install locales</span></span>
<span class=giallo-l><span style=color:#268bd2>sudo</span><span style=color:#2aa198> locale-gen en_GB.UTF-8</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#268bd2>sudo</span><span style=color:#2aa198> apt install</span><span style=color:#cb4b16> -yy</span><span style=color:#2aa198> emacs-gtk direnv gedit</span></span>
<span class=giallo-l><span style=color:#268bd2>git</span><span style=color:#2aa198> clone ./..rc-files</span></span>
<span class=giallo-l><span style=color:#268bd2>./scripts/install.sh</span></span></code></pre><p>Some Windows native packages using <a href=https://chocolatey.org/ rel=external>Chocolatey</a><pre class=giallo style=color:#839496;background-color:#002b36><code data-lang=shellscript><span class=giallo-l><span style=color:#268bd2>choco</span><span style=color:#2aa198> install signal skype wire slack zoom</span></span>
<span class=giallo-l><span style=color:#268bd2>choco</span><span style=color:#2aa198> install git</span></span>
<span class=giallo-l><span style=color:#268bd2>choco</span><span style=color:#2aa198> install rustup.install rust-analyzer python</span></span>
<span class=giallo-l><span style=color:#268bd2>choco</span><span style=color:#2aa198> install docker</span></span>
<span class=giallo-l><span style=color:#268bd2>choco</span><span style=color:#2aa198> install powertyos dropbox googledrive wiztree</span></span></code></pre><p>However, <code>choco install texlive</code> didn’t work so well, so I fell back to WSL2: <code>sudo apt install latexmk texlive-latex-base texlive-xetex ttf-mscorefonts-installer</code>.<p>Use MS Powertoys to remap keyboard for <code>CAPSLOCK</code>, <code>€</code>.<p>Timesync is a bit broken, cf <a href=https://stackoverflow.com/a/72318510 rel=external>https://stackoverflow.com/a/72318510</a>.<p>Unfortunately it all went pear-shaped when I tried to <code>rsync</code> files across from MacOS into Windows/WSL2.<p>I mapped the network drive via Network and Sharing Center > Settings > Network & internet > Advanced network settings > Advanced sharing settings > Public networks > Network discovery = ON<p>…and then<pre class=giallo style=color:#839496;background-color:#002b36><code data-lang=shellscript><span class=giallo-l></span>
<span class=giallo-l><span style=color:#859900>for</span><span style=color:#268bd2> d</span><span style=color:#859900> in</span><span style=color:#2aa198> admin christs docs rc-files research src teaching me</span><span> ;</span><span style=color:#859900> do</span></span>
<span class=giallo-l><span style=color:#268bd2>  echo</span><span style=color:#2aa198> "=== </span><span style=color:#268bd2>$d</span><span style=color:#2aa198>"</span></span>
<span class=giallo-l><span style=color:#268bd2>  rsync</span><span style=color:#cb4b16> -uavzsP --log-file=</span><span style=color:#268bd2>$d</span><span style=color:#cb4b16>.$(</span><span style=color:#268bd2>date</span><span style=color:#cb4b16> -Iseconds) -e</span><span style=color:#2aa198> ssh mort@IPADDRESS:/Users/mort/</span><span style=color:#268bd2>$d</span><span style=color:#2aa198>/ ./</span><span style=color:#268bd2>$d</span></span>
<span class=giallo-l><span style=color:#859900>done</span></span></code></pre><p>…but found that moving files to the host mashed things a bit (<code>rw</code> bits carried, but <code>x</code> not; hidden files not; no content translation; owner carried) while moving host files to wsl was sort-of ok (owner carried, rw bits carried) except that <code>group</code> and <code>other</code> access bits are all set to whatever the <code>user</code> access bits were.<p>See <a href=https://stackoverflow.com/questions/41513597/how-do-i-access-the-wsl-linux-file-system-from-windows rel=external>https://stackoverflow.com/questions/41513597/how-do-i-access-the-wsl-linux-file-system-from-windows</a> for more, perhaps.<p>Getting Docker installed was also rather painful:<pre class=giallo style=color:#839496;background-color:#002b36><code data-lang=shellscript><span class=giallo-l><span style=color:#586e75;font-style:italic># remove old distribution dockers</span></span>
<span class=giallo-l><span style=color:#268bd2>sudo</span><span style=color:#2aa198> apt remove docker.io containerd runc</span><span> &&</span><span style=color:#268bd2> sudo</span><span style=color:#2aa198> apt autoremove</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#586e75;font-style:italic># install dependencies to use an alternative package repo</span></span>
<span class=giallo-l><span style=color:#268bd2>sudo</span><span style=color:#2aa198> apt-get update</span><span> &&</span><span style=color:#268bd2> sudo</span><span style=color:#2aa198> apt-get install ca-certificates curl gnupg lsb-release</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#586e75;font-style:italic># install the new package repo</span></span>
<span class=giallo-l><span style=color:#268bd2>sudo</span><span style=color:#2aa198> mkdir</span><span style=color:#cb4b16> -m</span><span style=color:#d33682> 0755</span><span style=color:#cb4b16> -p</span><span style=color:#2aa198> /etc/apt/keyrings</span></span>
<span class=giallo-l><span style=color:#268bd2>curl</span><span style=color:#cb4b16> -fsSL</span><span style=color:#2aa198> https://download.docker.com/linux/ubuntu/gpg</span><span style=color:#859900> |</span><span style=color:#268bd2> sudo</span><span style=color:#2aa198> gpg</span><span style=color:#cb4b16> --dearmor -o</span><span style=color:#2aa198> /etc/apt/keyrings/docker.gpg</span></span>
<span class=giallo-l><span style=color:#268bd2>echo</span><span style=color:#2aa198>   "deb [arch=$(</span><span style=color:#268bd2>dpkg</span><span style=color:#cb4b16> --print-architecture</span><span style=color:#2aa198>) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(</span><span style=color:#268bd2>lsb_release</span><span style=color:#cb4b16> -cs</span><span style=color:#2aa198>) stable"</span><span style=color:#859900> |</span><span style=color:#268bd2> sudo</span><span style=color:#2aa198> tee /etc/apt/sources.list.d/docker.list</span><span style=color:#859900> ></span><span style=color:#2aa198> /dev/null</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#586e75;font-style:italic># install up-to-date Docker</span></span>
<span class=giallo-l><span style=color:#268bd2>sudo</span><span style=color:#2aa198> apt-get update</span><span> &&</span><span style=color:#268bd2> sudo</span><span style=color:#2aa198> apt-get install</span><span style=color:#cb4b16> \</span></span>
<span class=giallo-l><span style=color:#2aa198>  docker-ce</span><span style=color:#cb4b16> \</span></span>
<span class=giallo-l><span style=color:#2aa198>  docker-ce-cli</span><span style=color:#cb4b16> \</span></span>
<span class=giallo-l><span style=color:#2aa198>  containerd.io</span><span style=color:#cb4b16> \</span></span>
<span class=giallo-l><span style=color:#2aa198>  docker-buildx-plugin</span><span style=color:#cb4b16> \</span></span>
<span class=giallo-l><span style=color:#2aa198>  docker-compose-plugin</span></span></code></pre><p>Finally, some further references that may or may not be useful:<ul><li><a href=https://stephenreescarter.net/how-to-shrink-a-wsl2-virtual-disk/ rel=external>https://stephenreescarter.net/how-to-shrink-a-wsl2-virtual-disk/</a><li><a href=https://www.linkedin.com/pulse/acceso-wsl2-desde-windows-con-samba-manuel-nicol%C3%A1s-ortu%C3%B1o/ rel=external>https://www.linkedin.com/pulse/acceso-wsl2-desde-windows-con-samba-manuel-nicol%C3%A1s-ortu%C3%B1o/</a><li><a href=https://www.howtogeek.com/193013/how-to-create-an-encrypted-container-file-with-bitlocker-on-windows/ rel=external>https://www.howtogeek.com/193013/how-to-create-an-encrypted-container-file-with-bitlocker-on-windows/</a></ul><nav><div><a href=https://mort.io/blog/nixos-onedrive/>‹ OneDrive and NixOS</a></div><div><a href=https://mort.io/blog/ocaml-operators/> OCaml operators ›</a></div></nav></article></main><footer><hr><div class=c><nav class=tpad><div><a title="mort’s mythopœia Atom Feed" href=https://mort.io/atom.xml target=_blank type=application/atom+xml><i class="svg rss" title="mort’s mythopœia Atom Feed" type=Button></i></a><a title="mort’s mythopœia RSS Feed" href=https://mort.io/rss.xml target=_blank type=application/rss+xml><i class="svg rss" title="mort’s mythopœia RSS Feed" type=Button></i></a><a href=mailto:richard.mortier@cl.cam.ac.uk target=_blank title=Mail><i class="svg mail" title=Mail type=Button></i></a><a href=https://mastodon.me.uk/@mort rel=me target=_blank title=Mastodon><i class="svg mastodon" title=Mastodon type=Button></i></a><a href=https://www.linkedin.com/in/richard-mortier/ target=_blank title=LinkedIn><i class="svg linkedin" title=LinkedIn type=Button></i></a><a href=https://github.com/mor1/ target=_blank title=Github><i class="svg github" title=Github type=Button></i></a><a href=https://hub.docker.com/u/mor1/ target=_blank title=Docker><i class="svg docker" title=Docker type=Button></i></a><a href="https://www.youtube.com/playlist?list=PLkRF0fgqvvMx5Owh1QgilmExGQe58go_u" target=_blank title=YouTube><i class="svg youtube" title=YouTube type=Button></i></a></div></nav><nav class=vpad><a class=rpad href=https://mort.io/sitemap.xml target=_blank> sitemap </a><a class=rpad href=https://mort.io/tags/> tags </a></nav><p class=s90>mort’s mythopœia © 2013—<span id=year>2026</span> Richard Mortier</div></footer>