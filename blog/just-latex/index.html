<!doctype html><html lang=en><head><link href="https://mort.io/abridge.css?h=ef0df812e427238e124c" rel=stylesheet><meta charset=utf-8><meta content="ie=edge" http-equiv=x-ua-compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=https://mort.io name=base><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><link title="mort’s mythopœia Atom Feed" href=https://mort.io/atom.xml rel=alternate type=application/atom+xml><link title="mort’s mythopœia RSS Feed" href=https://mort.io/rss.xml rel=alternate type=application/rss+xml><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=bingbot><title>`just` LaTeX it! | mort’s mythopœia</title><meta content="mort’s mythopœia" name=copyright><meta content="Some `Justfile` targets for building PDF from LaTeX" name=description><link href=https://mort.io/blog/just-latex/ rel=canonical><meta content=https://mort.io/blog/just-latex/ property=og:url><meta content=https://mort.io/blog/just-latex/ name=twitter:url><meta content="Some `Justfile` targets for building PDF from LaTeX" property=og:description><meta content="Some `Justfile` targets for building PDF from LaTeX" name=twitter:description><meta content="`just` LaTeX it! | mort’s mythopœia" property=og:title><meta content="`just` LaTeX it! | mort’s mythopœia" name=twitter:title><meta content=summary name=twitter:card><meta content="mort’s mythopœia" property=og:site_name><meta content=en_US property=og:locale><meta content=website property=og:type><meta content=2025-01-18 property=og:updated_time><noscript><link href=https://mort.io/nojs.css rel=stylesheet></noscript><body><header><nav><div><big><a title="mort’s mythopœia" href=https://mort.io>mort’s mythopœia</a></big></div><div><div><ul><li><a class=s110 href=https://mort.io/research/> research </a><li><a class=s110 href=https://mort.io/students/> students </a><li><a class=s110 href=https://mort.io/teaching/> teaching </a><li><a class=s110 href=https://mort.io/codes/> codes </a><li><a class=s110 href=https://mort.io/me/> me </a></ul></div><div></div></div></nav><div class=desc>with apologies</div><hr></header><main><article><h1><a href=https://mort.io/blog/just-latex/><code>just</code> LaTeX it!</a></h1><span class=s95><span class=hpad> ·</span> 2 min read<span class=hpad> ·</span> January 18, 2025<span class=hpad> ·</span> #<a href=https://mort.io/tags/tech/>tech</a> </span><nav><div><a href=https://mort.io/blog/fontsizing/>‹ Fontsizing in LaTeX</a></div><div><a href=https://mort.io/blog/bibtox/> Introducing <code>bibtox</code> ›</a></div></nav><p>I have recently become a fan of <a href=https://just.systems/><code>just</code></a> as a replacement for the venerable <a href=https://www.gnu.org/software/make/manual/make.html><code>make</code></a>. I find that nowadays I rarely need the built-in dependency rules that <a href=https://www.gnu.org/software/make/manual/make.html><code>make</code></a> provides. Perhaps more radically, I also rarely need to write my own as the prevelance of format-specific build tools such as <a href=https://doc.rust-lang.org/stable/cargo/><code>cargo</code></a>, <a href=https://docs.astral.sh/uv/><code>uv</code></a>, <a href=https://ctan.org/pkg/latexmk/><code>latexmk</code></a> and the like mean I don’t need to write my own either.<p>Recently, while writing references and then helping out get submissions for <a href=https://www.cl.cam.ac.uk/events/rossfest/>Rossfest</a> consistently formatted and building cleanly, I found myself extending my various <a href=https://just.systems/><code>just</code></a> targets for <a href=https://www.latex-project.org/>LaTeX</a>. So I thought I’d document them here.<p>I always begin my <code>Justfile</code> with the apparently idiomatic “just show me the targets and associated help text” target:<pre class="language-just z-code" data-lang=just><code class=language-just data-lang=just><span class="z-source z-just"><span class="z-meta z-function z-just"><span class="z-entity z-name z-function z-just">_default</span></span>:
</span><span class="z-source z-just">    <span class="z-storage z-modifier z-quiet z-just">@</span>just --list
</span></code></pre><p>This seems considerably easier – and more powerful – than the equivalent hack I used to use in a <code>Makefile</code>!<pre class="language-make z-code" data-lang=make><code class=language-make data-lang=make><span class="z-source z-makefile"><span class="z-meta z-function z-makefile"><span class="z-entity z-name z-function z-makefile">.DEFAULT</span></span><span class="z-keyword z-operator z-assignment z-makefile">:</span> <span class="z-meta z-function z-arguments z-makefile"><span class="z-string z-unquoted z-makefile">help</span></span><span class="z-meta z-function z-body z-makefile">
</span></span><span class="z-source z-makefile"><span class="z-meta z-function z-body z-makefile"></span>
</span><span class="z-source z-makefile"><span class="z-meta z-function z-makefile"><span class="z-entity z-name z-function z-makefile">.PHONY</span></span><span class="z-keyword z-operator z-assignment z-makefile">:</span> <span class="z-meta z-function z-arguments z-makefile"><span class="z-string z-unquoted z-makefile">help</span></span><span class="z-meta z-function z-body z-makefile">
</span></span><span class="z-source z-makefile"><span class="z-meta z-function z-body z-makefile"></span><span class="z-meta z-function z-makefile"><span class="z-entity z-name z-function z-makefile">help</span></span><span class="z-keyword z-operator z-assignment z-makefile">:</span>
<span class="z-meta z-function z-arguments z-makefile"></span><span class="z-meta z-function z-body z-makefile"></span></span><span class="z-source z-makefile"><span class="z-meta z-function z-body z-makefile"></span><span class="z-meta z-function z-body z-makefile">	<span class="z-constant z-language z-makefile">@</span><span class="z-source z-shell"><span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>Targets are:<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span></span>
</span></span><span class="z-source z-makefile"><span class="z-meta z-function z-body z-makefile">	<span class="z-constant z-language z-makefile">@</span><span class="z-source z-shell"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">grep</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>E</span> <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">'</span>^(^## |[^.#][ a-zA-Z0-9-]+:.*#)<span class="z-punctuation z-definition z-string z-end z-shell">'</span></span> Makefile <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span></span></span></span></span><span class="z-source z-makefile"><span class="z-meta z-function z-body z-makefile"><span class="z-source z-shell"><span class="z-meta z-function-call z-arguments z-shell"></span>	<span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sed</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>E</span> <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">'</span>s/:[[:print:]]+#/:/;s/^([^#])/-- <span class="z-constant z-character z-escape z-shell">\1</span>/<span class="z-punctuation z-definition z-string z-end z-shell">'</span></span></span></span>
</span></span></code></pre><p>Next setup up some useful variables: the command we’ll use (<code>latex</code>) plus sources (<code>texs</code>) and targets (<code>pdfs</code>), and droppings that might be produced but not cleaned up by <code>latexmk -[cC]</code>:<pre class="language-just z-code" data-lang=just><code class=language-just data-lang=just><span class="z-source z-just"><span class="z-variable z-other z-just">latex</span> <span class="z-keyword z-operator z-assignment z-just">:=</span> <span class="z-string z-quoted z-double z-just"><span class="z-punctuation z-definition z-string z-begin z-just">"</span>latexmk -pdf<span class="z-punctuation z-definition z-string z-end z-just">"</span></span>
</span><span class="z-source z-just">
</span><span class="z-source z-just"><span class="z-variable z-other z-just">texs</span> <span class="z-keyword z-operator z-assignment z-just">:=</span> <span class="z-meta z-string z-shell"><span class="z-meta z-interpolation z-command z-shell"><span class="z-punctuation z-section z-interpolation z-begin z-just">`</span>echo [0-9][0-9]-*.tex<span class="z-punctuation z-section z-interpolation z-end z-just">`</span></span></span>
</span><span class="z-source z-just"><span class="z-variable z-other z-just">pdfs</span> <span class="z-keyword z-operator z-assignment z-just">:=</span> <span class="z-meta z-function-call z-identifier z-just"><span class="z-support z-function z-builtin z-just">replace</span></span><span class="z-meta z-function-call z-arguments z-just"><span class="z-punctuation z-section z-group z-begin z-just">(</span><span class="z-variable z-other z-just">texs</span><span class="z-punctuation z-separator z-sequence z-just">,</span> <span class="z-string z-quoted z-single z-just"><span class="z-punctuation z-definition z-string z-begin z-just">'</span>.tex<span class="z-punctuation z-definition z-string z-end z-just">'</span></span><span class="z-punctuation z-separator z-sequence z-just">,</span> <span class="z-string z-quoted z-single z-just"><span class="z-punctuation z-definition z-string z-begin z-just">'</span>.pdf<span class="z-punctuation z-definition z-string z-end z-just">'</span></span><span class="z-punctuation z-section z-group z-end z-just">)</span></span>
</span><span class="z-source z-just"><span class="z-variable z-other z-just">droppings</span> <span class="z-keyword z-operator z-assignment z-just">:=</span> <span class="z-string z-quoted z-double z-just"><span class="z-punctuation z-definition z-string z-begin z-just">"</span>$f.nav $f.snm $f.bbl<span class="z-punctuation z-definition z-string z-end z-just">"</span></span>
</span></code></pre><p>Now to actually building and cleaning things; first, individual targets:<pre class="language-just z-code" data-lang=just><code class=language-just data-lang=just><span class="z-source z-just"><span class="z-comment z-line z-number-sign z-just"><span class="z-punctuation z-definition z-comment z-begin z-just"># </span>build a PDF</span>
</span><span class="z-source z-just"><span class="z-meta z-function z-just"><span class="z-entity z-name z-function z-just">pdf</span></span> tgt:
</span><span class="z-source z-just">    <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-variable z-other z-just">latex</span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span> <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-meta z-function-call z-identifier z-just"><span class="z-support z-function z-builtin z-just">file_stem</span></span><span class="z-meta z-function-call z-arguments z-just"><span class="z-punctuation z-section z-group z-begin z-just">(</span><span class="z-variable z-other z-just">tgt</span><span class="z-punctuation z-section z-group z-end z-just">)</span></span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span>.tex
</span><span class="z-source z-just">
</span><span class="z-source z-just"><span class="z-comment z-line z-number-sign z-just"><span class="z-punctuation z-definition z-comment z-begin z-just"># </span>clean generated files</span>
</span><span class="z-source z-just"><span class="z-meta z-function z-just"><span class="z-entity z-name z-function z-just">clean</span></span> tgt:
</span><span class="z-source z-just">    <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-variable z-other z-just">latex</span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span> -C <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-meta z-function-call z-identifier z-just"><span class="z-support z-function z-builtin z-just">file_stem</span></span><span class="z-meta z-function-call z-arguments z-just"><span class="z-punctuation z-section z-group z-begin z-just">(</span><span class="z-variable z-other z-just">tgt</span><span class="z-punctuation z-section z-group z-end z-just">)</span></span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span>.tex
</span><span class="z-source z-just">    for f in <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-meta z-function-call z-identifier z-just"><span class="z-support z-function z-builtin z-just">file_stem</span></span><span class="z-meta z-function-call z-arguments z-just"><span class="z-punctuation z-section z-group z-begin z-just">(</span><span class="z-variable z-other z-just">tgt</span><span class="z-punctuation z-section z-group z-end z-just">)</span></span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span>; do rm -f <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-variable z-other z-just">droppings</span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span> ; done
</span></code></pre><p>(Yes, ok, so it seems a bit silly to have to wrap a <code>for</code> loop around simply to propagate a variable from the <code>Justfile</code> into the shell. But no matter.)<p>Next, all available targets:<pre class="language-just z-code" data-lang=just><code class=language-just data-lang=just><span class="z-source z-just"><span class="z-comment z-line z-number-sign z-just"><span class="z-punctuation z-definition z-comment z-begin z-just"># </span>build all PDFs</span>
</span><span class="z-source z-just"><span class="z-meta z-function z-just"><span class="z-entity z-name z-function z-just">pdfs</span></span>:
</span><span class="z-source z-just">    for f in <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-variable z-other z-just">texs</span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span>; do just pdf $f ; done
</span><span class="z-source z-just">
</span><span class="z-source z-just"><span class="z-comment z-line z-number-sign z-just"><span class="z-punctuation z-definition z-comment z-begin z-just"># </span>clean all PDFs</span>
</span><span class="z-source z-just"><span class="z-meta z-function z-just"><span class="z-entity z-name z-function z-just">clean-pdfs</span></span>:
</span><span class="z-source z-just">    for f in <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-variable z-other z-just">pdfs</span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span>; do just clean $f ; done
</span></code></pre><p>Finally, <em>watch</em> a target, rebuilding on save – it may be helpful therefore to avoid automatically saving the source while in a state in which it will not successfully build!<pre class="language-just z-code" data-lang=just><code class=language-just data-lang=just><span class="z-source z-just"><span class="z-comment z-line z-number-sign z-just"><span class="z-punctuation z-definition z-comment z-begin z-just"># </span>watch a file, rebuilding when saved</span>
</span><span class="z-source z-just"><span class="z-meta z-function z-just"><span class="z-entity z-name z-function z-just">watch</span></span> tgt:
</span><span class="z-source z-just">    while inotifywait -e close_write <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-variable z-other z-just">tgt</span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span>* ; do just pdf <span class="z-meta z-interpolation z-just"><span class="z-punctuation z-section z-interpolation z-begin z-just">{{</span><span class="z-variable z-other z-just">tgt</span><span class="z-punctuation z-section z-interpolation z-end z-just">}}</span></span> ; done
</span></code></pre><nav><div><a href=https://mort.io/blog/fontsizing/>‹ Fontsizing in LaTeX</a></div><div><a href=https://mort.io/blog/bibtox/> Introducing <code>bibtox</code> ›</a></div></nav></article></main><footer><hr><div class=c><nav class=tpad><div><a title="mort’s mythopœia Atom Feed" href=https://mort.io/atom.xml target=_blank type=application/atom+xml><i class="svg rss" title="mort’s mythopœia Atom Feed" type=Button></i></a><a title="mort’s mythopœia RSS Feed" href=https://mort.io/rss.xml target=_blank type=application/rss+xml><i class="svg rss" title="mort’s mythopœia RSS Feed" type=Button></i></a><a href=mailto:richard.mortier@cl.cam.ac.uk target=_blank title=Mail><i class="svg mail" title=Mail type=Button></i></a><a href=https://mastodon.me.uk/@mort rel=me target=_blank title=Mastodon><i class="svg mastodon" title=Mastodon type=Button></i></a><a href=https://www.linkedin.com/in/richard-mortier/ target=_blank title=LinkedIn><i class="svg linkedin" title=LinkedIn type=Button></i></a><a href=https://github.com/mor1/ target=_blank title=Github><i class="svg github" title=Github type=Button></i></a><a href=https://hub.docker.com/u/mor1/ target=_blank title=Docker><i class="svg docker" title=Docker type=Button></i></a><a href="https://www.youtube.com/playlist?list=PLkRF0fgqvvMx5Owh1QgilmExGQe58go_u" target=_blank title=YouTube><i class="svg youtube" title=YouTube type=Button></i></a></div></nav><nav class=vpad><a class=rpad href=https://mort.io/sitemap.xml target=_blank> sitemap </a><a class=rpad href=https://mort.io/tags/> tags </a></nav><p class=s90>mort’s mythopœia © 2013—<span id=year>2025</span> Richard Mortier</div></footer>